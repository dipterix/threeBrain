<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Changelog • threeBrain</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Changelog"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">threeBrain</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0.9007</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/A-getting-started.html">Getting Started</a>
    <a class="dropdown-item" href="../articles/B-data-visualization.html">Data Visualization (Electrodes)</a>
  </div>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/dipterix/threeBrain/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-news">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Changelog</h1>
      <small>Source: <a href="https://github.com/dipterix/threeBrain/blob/HEAD/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.1.0" id="threebrain-110">threeBrain 1.1.0<a class="anchor" aria-label="anchor" href="#threebrain-110"></a></h2>
<div class="section level3">
<h3 id="major-changes-1-1-0">Major Changes<a class="anchor" aria-label="anchor" href="#major-changes-1-1-0"></a></h3>
<ul><li>
<code>threejs</code> engine is upgraded to <code>v160</code>; added support for <code>NIfTI</code> and <code>GIfTI</code> images</li>
<li>Allowed data to be embedded with viewer as <code>dataURI</code>. This results in a truly standalone viewer: no extra engine required, only web-browser is needed.</li>
<li>Added electrode geometry prototype, allowing users to see the electrode rather than using spheres, useful for electrodes with super micro contacts or electrodes with segmented contact like <code>DBS</code>
</li>
<li>Added support for showing (cortical or sub-cortical) <code>ROI</code> surfaces</li>
<li>Implemented drag-and-drop feature to drop arbitrary volume (<code>nii,mgz</code>) or surface (<code>fs,gii</code>) files to the viewer. The surface coordinate system is inferred from file name following <code>BIDS</code> convention. The surface color can be set via a color-map (<code>csv</code>) or in the file name</li>
<li>Implemented slice (in side viewer) overlay</li>
<li>Users can control side camera <code>frustums</code> (near and far) separately</li>
<li>Implemented worker system so the viewer can run truly parallel code in the background</li>
<li>Added <code>snap-to-electrode</code> and <code>line-of-sight</code> mode in addition to canonical anatomical slices.
<ul><li>Under <code>line-of-sight</code> mode, the underlay image will be sliced dynamically with a plane orthogonal to the line of sight; two other (orthogonal) planes parallel to the line of sight</li>
<li>Under <code>snap-to-electrode</code>, the volume slices will be snapped to electrode direction (only available when electrode prototype is used and electrode direction defined). The other two planes will dynamically slice the <code>MRI</code>
</li>
</ul></li>
<li>Users can localize an electrode probe by clicking on the target location, then entry location</li>
<li>Added an option to add <code>QR</code> code to the viewer, allowing people to link to the publication</li>
<li>Loading progress is more informative now</li>
<li>Implemented <code>plot_slices</code> to allow plotting <code>MRI</code> slices for each contact in canonical order</li>
<li>Users can set default colors to electrodes via <code>brain$electrodes$fix_electrode_color</code>
</li>
<li>Users can override underlay images by placing <code>rave_slices.nii[.gz]</code> under the <code>mri/</code> in <code>FreeSurfer</code> folder</li>
<li>File/Data loaders use <code>JavaScript</code> workers now (can be disabled with <code>enable_cache=TRUE</code>)</li>
<li>Added mesh clipping to see depth electrodes without compromising color</li>
<li>Implemented volume clipping</li>
<li>Added new mode for <code>ACPC</code> alignment</li>
<li>Added <code>target</code> flag so objects can be rendered differently on main canvas versus side canvas</li>
</ul></div>
<div class="section level3">
<h3 id="minor-changes-1-1-0">Minor changes<a class="anchor" aria-label="anchor" href="#minor-changes-1-1-0"></a></h3>
<ul><li>Electrode prototype names follow <code>type-company-version.json</code> format</li>
<li>Added compass object to side cameras when slice mode is not canonical</li>
<li>Remove <code>UV</code> mapping on sphere electrodes</li>
<li>Added model up direction to electrodes to assist calculating Euler axis and angles</li>
<li>Volume, atlas threshold is asynchronous now</li>
<li>Changed default values of some controller</li>
<li>Added <code>broadcast()</code> to more controllers;</li>
<li>Atlas key number is displayed so users no longer need to search for look-up table</li>
<li>Added debug flag with keyboard shortcuts</li>
<li>Viewer finally compiles with <code>quarto/rmarkdown</code>
</li>
<li>Implemented functions to create <code>sEEG</code> electrodes</li>
<li>Slices does not write to depth buffer when rendered in side canvas, so electrode contacts are not blocked</li>
<li>Allowed anchor to be fixed when localizing with electrode prototype</li>
<li>Using <code>instancedMesh</code> to render actual electrode spheres when prototype is used and users choose to see the actual contact locations</li>
<li>Implemented <code>mapToTemplate</code> for electrode prototypes</li>
<li>
<code>Pial</code> surface does not write to depth buffer when it’s super transparent</li>
<li>Added drivers to set object transform matrix</li>
<li>Adjust the implementation of background color and <code>arcball</code> radius</li>
<li>Removed composer effects, using <code>shaders</code> to render electrode outline</li>
<li>Trackball uses longer side of the canvas instead of shorter side as radius</li>
<li>Added electrode visibility mode: use <code>threshold-only</code> to show contacts that pass threshold even no display value is given</li>
<li>Overlay brightness can be adjusted via controller</li>
<li>Adjusted title position</li>
<li>Updated <code>CITATION</code>
</li>
<li>New color map is used for electrodes to be consistent with <code>RAVE</code> color</li>
<li>Allow adding additional geometries in <code>brain$plot</code>
</li>
<li>Improved spacing for interpolation and extrapolation (electrode localization); removed old interpolation logic; added <code>distanceRatio</code> to prevent large shift (auto adjust)</li>
<li>Electrodes are opaque on main but transparent on side canvas</li>
<li>Using <code>pial</code> surface center as trackball center</li>
<li>Dithering the <code>datacube2</code> to make rendering more natural on main canvas</li>
<li>By default set <code>MRI</code> slices visible when surfaces are missing</li>
<li>Drag &amp; drop file names is sanitized to avoid displaying issues</li>
<li>Electrode contacts (<code>instancedMesh</code>) are now click-able</li>
<li>
<code>dispose</code> is cleaner now, it also fires events</li>
<li>Added <code>makeClickable</code> and <code>removeClickable</code> to replace previous <code>add_clickable</code> function</li>
<li>Renamed <code>register_object</code> to <code>registerToMap</code>
</li>
<li>Better ways to sanitize <code>datacube</code>
</li>
<li>Improved <code>datacube</code> overlay texture, including using <code>clamp-to-border</code> instead <code>clamp-to-edge</code>
</li>
<li>Ray-casting electrode prototypes with <code>instancedMesh</code> now works under <code>contact-only</code> mode</li>
<li>Show electrode prototype with contacts by default</li>
<li>Added color modes for uploaded images</li>
<li>removed <code>normalize</code> method (replaced by <code>getNormalizedImage</code>) from <code>NiftiImage</code> and <code>MGHImage</code>
</li>
<li>Using script to generate change log automatically from Git commits</li>
<li>Scrolling on side canvas is faster now</li>
<li>Allowed prototype contact colors to be fixed</li>
<li>Prototype control points displays channel information (provided control points are channels) Added color (<code>randomColor</code>, <code>testColorString</code>) and file-name utility functions</li>
<li>Soft removed <code>addColorCoat</code> and using <code>ElectrodeMaterial</code>, this results in massive code improvement in electrode instance</li>
<li>Allow to set default electrode colors if a contact is not rendered with values nor fixed color</li>
<li>Scrolling on side canvas is faster now</li>
<li>Color look-up table can be set with arbitrary single color (in <code>HexString</code>, indicating that all values should be rendered with such color; Drag &amp; Drop volumes can change to single colors</li>
<li>Remembers the state when switching volumes (<code>datacube2</code>)</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-1-1-0">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-1-1-0"></a></h3>
<ul><li>Fixed <code>NamedLut</code> color error when a value range is zero</li>
<li>Prototype electrode click information displays the channel number</li>
<li>Fixed <code>RShinyDriver</code> issue when object does not have construction parameters (using <code>getThreeBrainInstance</code> instead)</li>
<li>Avoid rendering volume data to sub-cortical <code>ROI</code>
</li>
<li>Fixed UV issues in electrode geometry prototypes</li>
<li>Fixed a bug when slice instance is missing but controller tries to set overlay</li>
<li>
<code>JavaScript</code> map is hidden when compiled so browsers will not complain about missing maps</li>
<li>Significantly reduced the chances of viewer crash under R shiny applications</li>
<li>Fixed a <code>shader</code> crash issue on <code>Windows</code>
</li>
<li>
<code>WebGL2</code> is the hard requirement now; users will be notified if this requirement is not met</li>
<li>Mouse position in the canvas is calculated every mouse down instead of every resizing to fix the control issues when page is scrolled in shiny app</li>
<li>Fixed <code>controller.load</code> to handle invalid set controller request</li>
<li>Fixed <code>textsprite</code> depth issues</li>
<li>Fixed light under new engine</li>
<li>Fixed visualization of volume cubes when using <code>NIfTI</code> files</li>
<li>Fixed volume transforms when <code>sform</code> and <code>qform</code> are inconsistent in <code>NIfTI</code>
</li>
<li>Fixed a bug in interpolation with spacing</li>
<li>fixed incorrect <code>ROI</code> label</li>
<li>
<code>as_subcortical_label</code> generates correct white-matter labels</li>
<li>Fixed <code>freesurfer_lut</code>
</li>
<li>Fixed <code>auto-adjust</code> feature (electrode localization)</li>
<li>Fixed <code>UV</code> mapping issue in sphere electrode geometry</li>
<li>Fixed <code>shader</code> issue when transparency is set to negative (treated as 1)</li>
<li>Using <code>NIfTI</code> headers to get calculated color intensities before applying heuristic approach</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.0.2" id="threebrain-102">threeBrain 1.0.2<a class="anchor" aria-label="anchor" href="#threebrain-102"></a></h2>
<ul><li>Removed a <code>shader</code> loop that accidentally used dynamic variable for looping, which may crash on <code>Windows</code> in certain situations</li>
<li>Updated <code>README.md</code>
</li>
<li>Composer effects are removed</li>
<li>Added default color to electrodes (JavaScript) to fix the localization electrode color not set correctly issues</li>
<li>Added <code>z-index</code> base to the side canvas layer (<code>div</code>)</li>
<li>Removed additional unused parameters from material call</li>
<li>Used new material type to make brain more realistic</li>
<li>New background color is implemented</li>
<li>
<code>Trackball</code> uses width instead of height of the viewer as the <code>Arcball</code> radius; mouse positions is calculated whenever mouse-down event is triggered (allowing more accurate track-ball calculation in <code>Shiny</code> applications)</li>
<li>Made <code>col2hexstr</code> internal function</li>
<li>Added a new electrode visibility mode, allowing to show contacts with no values but passing the threshold</li>
<li>Added <code>brain$electrodes$fix_electrode_color</code> to fix the electrode colors under given data names (to display <code>DBS</code> electrodes, for example)</li>
<li>Made <code>controller.load</code> more robust against errors</li>
<li>Fixed the depth issue in <code>TextSprite</code>
</li>
<li>Some default controller values have changed to make more sense</li>
<li>Outline render effect is removed; electrode outlines are implemented directly in the <code>shader</code>
</li>
<li>Updated <code>three.js</code> to <code>v160</code> with light model improved</li>
<li>Added <code>rave_slices.nii</code> to allowed <code>MRI</code> prefix in <code>FreeSurfer</code> folder with highest priority, such that this image will be treated as default volume to load in side canvas (default is still <code>brain.finalsurfs.mgz</code>)</li>
<li>Allow <code>MRI</code> to change brightness dynamically in viewer</li>
<li>Ensure that <code>voxels</code> index from zeros</li>
<li>Added <code>brain$get_atlas_labels</code> to guess the atlas labels from given masks or atlas files</li>
<li>Allowed to spatially transform electrodes to desired coordinate system</li>
<li>Updated citation</li>
<li>The standalone viewer does not require static server anymore: everything is self-contained (require <code>pandoc</code>, which comes with <code>RStudio</code>)</li>
<li>Changed mechanism on animation color map generator (so the color is more accurate for discrete variables)</li>
<li>Added <code>png</code> to dependence</li>
<li>Added support for <code>AC-PC</code> alignment, available in <code>RAVE</code> - <code>YAEL</code> module</li>
<li>Allow <code>brain</code> to plot with additional customized geometries</li>
<li>Added <code>plot_slides</code> to plot <code>MRI</code> centered at each electrode contact for slide-to-slide visualization</li>
<li>Added Line-of-Sight view mode for side canvas; can be enabled using shortcut <code>m</code> (previous shortcut to change the material type is changed to <code>shift+M</code>)</li>
<li>Fixed <code>CT</code> in <code>JavaScript</code> when the <code>sform</code> and <code>qform</code> are different (have different code)</li>
<li>Allowed to specify the spacing for interpolation and extrapolation for unequally spaced electrodes</li>
<li>Added electrode outlines</li>
<li>
<code>YAEL</code> paper is finally out</li>
<li>Fixed incorrect sub-cortical labels</li>
<li>Deprecated old format (no cache is needed anymore)</li>
<li>Made electrodes opaque on main but transparent in side canvas</li>
<li>Let controllers check if the variable is valid before set to avoid invalid viewer state during initialization</li>
<li>Added <code>get_ijk2ras</code> to get <code>Norig</code> and <code>Torig</code> matrix</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.0.1" id="threebrain-101">threeBrain 1.0.1<a class="anchor" aria-label="anchor" href="#threebrain-101"></a></h2><p class="text-muted">CRAN release: 2023-07-03</p>
<ul><li>Updated controller library to have reasonable input focus</li>
<li>Allow <code>MRI</code> slices to be <code>NIfTI</code> format</li>
<li>Set slices to be visible by default when the surface is not available</li>
<li>Fixed transform for <code>datacube2</code>
</li>
<li>Fixed <code>qform</code> when reading <code>NIfTI</code> files</li>
<li>Fixed <code>auto-refine</code> functions in electrode localization</li>
<li>Removed clipboard auto-copy and auto-paste functions since they conflict with other viewers; instead users can use controllers to copy and paste state</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.0.0" id="threebrain-100---egypt">threeBrain 1.0.0 - Egypt<a class="anchor" aria-label="anchor" href="#threebrain-100---egypt"></a></h2><p class="text-muted">CRAN release: 2023-06-03</p>
<p>This version is a major update.</p>
<ul><li>Created <code><a href="../reference/threeBrain.html">threeBrain::threeBrain</a></code> as the formal way to create brain objects</li>
<li>Updated <code>JavaScript</code> engine to <code>v150</code>
</li>
<li>Allow getting <code>HTML</code> tags from saved widget so the widget can be used from <code>Jupyter</code> notebook</li>
<li>Added <code>$render</code> method to remember viewer states</li>
<li>Allowing set title via proxy driver</li>
<li>Added citation information</li>
<li>Fixed hemisphere issue in localization when electrodes are closer to opposite hemispheres</li>
<li>Added electrode registration from anatomical slice cross-hair</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.9" id="threebrain-029">threeBrain 0.2.9<a class="anchor" aria-label="anchor" href="#threebrain-029"></a></h2><p class="text-muted">CRAN release: 2023-03-14</p>
<p>This version plans for a major update. Here are some highlights:</p>
<ul><li>Electrode localization can be done from original <code>CT</code> instead of re-sampled ones</li>
<li>Completely isolate <code>JavaScript</code> engine from <code>R</code> code. The <code>JavaScript</code> code is available as <code>npm</code> package and is used via sub-module</li>
<li>Implemented file readers directly from <code>JavaScript</code>, this allows reading files directly in viewer, and no cache is needed</li>
<li>No home-brew version of <code>threejs</code> is required: standard <code>npm</code> distribution is used</li>
<li>New controller <code>GUI</code> is implemented</li>
<li>The viewer can be driven via <code>JavaScript</code> directly via event dispatchers</li>
<li>Anatomical segmentation map is visible from the side panels; the <code>voxel</code> values are displayed when setting <code>crosshair</code>
</li>
</ul><div class="section level3">
<h3 id="detailed-changes-0-2-9">Detailed Changes<a class="anchor" aria-label="anchor" href="#detailed-changes-0-2-9"></a></h3>
<ul><li>Added step size in <code>datacube2</code> material uniforms</li>
<li>Upgraded <code>threejs</code> to <code>r148</code>, and use <code>npm</code> distribution “three”</li>
<li>Massive code re-factory (variable names, trackball controls, legacy classes…)</li>
<li>Removed <code>data-GUI</code> and use <code>lil-GUI</code>
</li>
<li>Fixed compass (finally…)</li>
<li>Added title to the viewer</li>
<li>Reworked the whole message signal system, added <code>ThrottledEventDispatcher.js</code>
</li>
<li>Added <code>MouseKeyboard</code> class to track mouse and keyboard events, greatly reduced canvas burden</li>
<li>Added <code>animParameter</code> object to canvas to keep track of the animation parameters</li>
<li>reworked shiny drivers</li>
<li>fixed one-voxel shift issues</li>
<li>Added format support for <code>nii</code>, <code>mgh/mgz</code>, <code>FreeSurfer</code> surface, <code>FreeSurfer</code> node value binary formats</li>
<li>Added function <code>threeBrain</code> to allow 3D viewer to run without cache (with fs only)</li>
<li>Fixed memory leak issues in <code>JavaScript</code> code</li>
<li>Geometry groups can now change its storage path</li>
<li>JS is completely independent now (available on <code>npm</code> now)</li>
<li>Peel event dispatcher from the canvas class so the events can be managed separately</li>
<li>Hide time-stamps when there is no data/animation available</li>
<li>Added experimental support to show labels on regular electrodes; currently no depth-test is turned on</li>
<li>Added <code>GUI</code> support to change electrode label visibility and size</li>
<li>Electrode label size adjusts along with electrode radius</li>
<li>
<code>handle_resize</code> now put off resizing function when detecting widget size is too small</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-0-2-9">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-2-9"></a></h3>
<ul><li>Fixing <code>xfm</code> not parsed correctly when the line starts with blank spaces</li>
<li>Stopped rendering canvas when canvas is too small (less than 10 pixels)</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.7" id="threebrain-027">threeBrain 0.2.7<a class="anchor" aria-label="anchor" href="#threebrain-027"></a></h2><p class="text-muted">CRAN release: 2022-10-15</p>
<div class="section level3">
<h3 id="changes-0-2-7">Changes<a class="anchor" aria-label="anchor" href="#changes-0-2-7"></a></h3>
<ul><li>Rewired events, allowing to drive the viewer via <code>JavaScript</code> events</li>
<li>Allowed to set animation playback status</li>
<li>Remove modal by default if <code>raveio</code> or <code>ravedash</code> is loaded</li>
<li>Edited launch script to always use <code>Python3</code>
</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-0-2-7">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-2-7"></a></h3>
<ul><li>Fixed installation issues (template brain) on <code>Windows</code>, avoid backslashes</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.6" id="threebrain-026">threeBrain 0.2.6<a class="anchor" aria-label="anchor" href="#threebrain-026"></a></h2><p class="text-muted">CRAN release: 2022-08-25</p>
<div class="section level3">
<h3 id="changes-0-2-6">Changes<a class="anchor" aria-label="anchor" href="#changes-0-2-6"></a></h3>
<ul><li>Allowed users to pan the camera when localizing electrodes</li>
<li>Added line segment geometry type that can either display static line segments (such as <code>DTI</code>), or connect two electrodes dynamically</li>
<li>Printing brain now uses more accurate terms</li>
<li>Allowed <code>CT</code> to be either path or the actual data when calling localizing function</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-0-2-6">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-2-6"></a></h3>
<ul><li>Fixed <code>NifTi</code> orientation issues and use <code>sform</code>
</li>
<li>Fixed localization issue when <code>NifTi</code> transform matrix has determinant not equally to 1</li>
<li>Fixed volume shader, resolved shift issues when panning the camera</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.5" id="threebrain-025">threeBrain 0.2.5<a class="anchor" aria-label="anchor" href="#threebrain-025"></a></h2><p class="text-muted">CRAN release: 2022-05-30</p>
<div class="section level3">
<h3 id="changes-0-2-5">Changes<a class="anchor" aria-label="anchor" href="#changes-0-2-5"></a></h3>
<ul><li>Surface <code>sync from voxels</code> now clamp the surface nodes</li>
<li>Added <code>Voxel Display</code> controller to toggle volume display modes</li>
<li>Changed shortcut <code>l</code> from <code>Voxel Type</code> to <code>Voxel Display</code>
</li>
<li>Volume <code>fragmentShader</code> uses non-linear function to calculate fragment colors combined with face normal; this will create smoother results</li>
<li>
<code>DataCube2</code> geometry uses <code>ConvexHull</code> instead of box/sphere to improve the performance</li>
<li>
<code>DataCube2</code> are no longer hidden when <code>sync from voxels</code> is on: users can use shortcuts <code>l</code> and <code>k</code> to easily control the visibility.</li>
<li>
<code>download_template_subject</code> can download other templates such as <code>fsaverage</code>, <code>cvs_avg35</code>, <code>bert</code>.</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-0-2-5">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-2-5"></a></h3>
<ul><li>Fixed a volume rendering issue where ray-marching directions are not calculated correctly</li>
<li>Fixed color not set correctly when changing <code>Voxel Labels</code> while surface colors are <code>sync from voxels</code>
</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.4" id="threebrain-024">threeBrain 0.2.4<a class="anchor" aria-label="anchor" href="#threebrain-024"></a></h2><p class="text-muted">CRAN release: 2021-12-03</p>
<p>This version mainly works on the electrode localization. Most changes occur in the <code>JavaScript</code> engine.</p>
<div class="section level3">
<h3 id="changes-0-2-4">Changes<a class="anchor" aria-label="anchor" href="#changes-0-2-4"></a></h3>
<ul><li>Allows electrodes to be reset</li>
<li>Displays electrode labels along with the electrodes</li>
<li>Allows resizing electrode size on the fly</li>
<li>Allows resizing the electrode labels</li>
<li>Localization module has been integrated into <code>RAVE</code>
</li>
<li>Added line mesh to mark the distance of the electrode deviating from its original position. The line color changes with the distance value.</li>
</ul><div class="section level4">
<h4 id="improvements-0-2-4">Improvements<a class="anchor" aria-label="anchor" href="#improvements-0-2-4"></a></h4>
<ul><li>Improved localization precision</li>
<li>Auto-adjusting electrodes now respects the topology</li>
<li>Electrodes in the localization mode now have <code>LocElectrode</code> class</li>
<li>Volume rendering and ray-casters now respects the transform matrices</li>
</ul></div>
</div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.3" id="threebrain-023">threeBrain 0.2.3<a class="anchor" aria-label="anchor" href="#threebrain-023"></a></h2><p class="text-muted">CRAN release: 2021-10-13</p>
<div class="section level3">
<h3 id="changes-0-2-3">Changes<a class="anchor" aria-label="anchor" href="#changes-0-2-3"></a></h3>
<ul><li>Electrode localization now has a <code>shiny</code> application</li>
</ul><div class="section level4">
<h4 id="improvements-0-2-3">Improvements<a class="anchor" aria-label="anchor" href="#improvements-0-2-3"></a></h4>
<ul><li>Added 3 vignettes</li>
</ul></div>
</div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.2" id="threebrain-022">threeBrain 0.2.2<a class="anchor" aria-label="anchor" href="#threebrain-022"></a></h2>
<div class="section level3">
<h3 id="changes-0-2-2">Changes<a class="anchor" aria-label="anchor" href="#changes-0-2-2"></a></h3>
<ul><li>Supported video content to display auditory visual stimuli along the response</li>
<li>Default to closing the <code>default</code> and <code>volume</code> side folders</li>
</ul><div class="section level4">
<h4 id="improvements-0-2-2">Improvements<a class="anchor" aria-label="anchor" href="#improvements-0-2-2"></a></h4>
<ul><li>Fixed electrode localization interpolation issue</li>
<li>Proper dispose the localized electrodes</li>
<li>Fixed screenshot and video recording functions</li>
<li>Renamed recording button to <code>Chrome</code>-specific</li>
</ul></div>
</div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.1" id="threebrain-021">threeBrain 0.2.1<a class="anchor" aria-label="anchor" href="#threebrain-021"></a></h2><p class="text-muted">CRAN release: 2021-08-03</p>
<div class="section level3">
<h3 id="changes-0-2-1">Changes<a class="anchor" aria-label="anchor" href="#changes-0-2-1"></a></h3>
<ul><li>Finally, electrode localization is added!</li>
<li>Added <code>TextTexture</code> in the internal code to display text <code>Sprite</code> easily</li>
<li>Can download electrodes as <code>csv</code>
</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.0" id="threebrain-020">threeBrain 0.2.0<a class="anchor" aria-label="anchor" href="#threebrain-020"></a></h2><p class="text-muted">CRAN release: 2021-07-27</p>
<div class="section level3">
<h3 id="changes-0-2-0">Changes<a class="anchor" aria-label="anchor" href="#changes-0-2-0"></a></h3>
<ul><li>More efficient volume rendering with transparency</li>
<li>Added shader functions to surface instances, allowing color rendering from volume, electrodes, or vertices (major change)</li>
<li>Added color-map generator for surface and volume data</li>
<li>Added method to generate data cube (volume) from <code>MNI305</code> coordinates</li>
<li>Optimized loading procedure</li>
<li>Removed <code>crayon</code>, <code>base64enc</code>, <code>htmltools</code>, <code>pryr</code> from dependence</li>
</ul><div class="section level4">
<h4 id="improvements-0-2-0">Improvements<a class="anchor" aria-label="anchor" href="#improvements-0-2-0"></a></h4>
<ul><li>Bumped <code>threejs</code> version to <code>v131dev</code>
</li>
<li>Fixed surface transparency losing fragments issue</li>
<li>Added loaders to shiny applications to avoid performance issues on old computers</li>
<li>Fixed electrodes not selected on mouse click-down (on <code>Firefox</code>)</li>
</ul></div>
</div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.9" id="threebrain-019">threeBrain 0.1.9<a class="anchor" aria-label="anchor" href="#threebrain-019"></a></h2><p class="text-muted">CRAN release: 2021-01-10</p>
<div class="section level3">
<h3 id="changes-0-1-9">Changes<a class="anchor" aria-label="anchor" href="#changes-0-1-9"></a></h3>
<ul><li>Added backend engine for volume rendering to show atlas files</li>
<li>Standalone viewers now use native system tools for <code>Mac</code> and <code>Linux</code> (On <code>Windows</code>, it still needs <code>R</code> to be installed)</li>
</ul><div class="section level4">
<h4 id="improvements-0-1-9">Improvements<a class="anchor" aria-label="anchor" href="#improvements-0-1-9"></a></h4>
<ul><li>Allows super slow play speed to show animations in millisecond level</li>
<li>Bumped <code>threejs</code> to a newer version and fixed compatibility issues</li>
<li>Animation time range is more reasonable</li>
</ul></div>
</div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.8" id="threebrain-018">threeBrain 0.1.8<a class="anchor" aria-label="anchor" href="#threebrain-018"></a></h2><p class="text-muted">CRAN release: 2020-06-23</p>
<div class="section level3">
<h3 id="changes-0-1-8">Changes<a class="anchor" aria-label="anchor" href="#changes-0-1-8"></a></h3>
<ul><li>Screenshot now downloads <code>pdf</code> format</li>
</ul><div class="section level4">
<h4 id="improvements-0-1-8">Improvements<a class="anchor" aria-label="anchor" href="#improvements-0-1-8"></a></h4>
<ul><li>Fixed <code>freesurferformats</code> face index starting from 1 instead of 0</li>
</ul></div>
</div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.7" id="threebrain-017">threeBrain 0.1.7<a class="anchor" aria-label="anchor" href="#threebrain-017"></a></h2><p class="text-muted">CRAN release: 2020-05-12</p>
<div class="section level3">
<h3 id="changes-0-1-7">Changes<a class="anchor" aria-label="anchor" href="#changes-0-1-7"></a></h3>
<ul><li>Now displays <code>MNI305</code> coordinates instead of <code>tkRAS</code> coordinates</li>
<li>Removed <code>reticulate</code> and related functions to support native R functions</li>
</ul><div class="section level4">
<h4 id="improvements-0-1-7">Improvements<a class="anchor" aria-label="anchor" href="#improvements-0-1-7"></a></h4>
<ul><li>Fixed <code>MNI305</code> calculation issues</li>
<li>Internally calculates anterior commissure</li>
</ul></div>
</div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.6" id="threebrain-016">threeBrain 0.1.6<a class="anchor" aria-label="anchor" href="#threebrain-016"></a></h2>
<div class="section level3">
<h3 id="changes-0-1-6">Changes<a class="anchor" aria-label="anchor" href="#changes-0-1-6"></a></h3>
<ul><li>Implemented <code>view_ct_t1</code> to view <code>CT</code> aligned to <code>T1</code> images</li>
<li>Updated document on how to generate <code>FreeSurfer</code> brain</li>
<li>Removed dependency to <code>nibabel</code> and use native R packages</li>
<li>Re-designed legends, added options to show, hide display information</li>
<li>Added screenshot to download as image</li>
</ul><div class="section level4">
<h4 id="improvements-0-1-6">Improvements<a class="anchor" aria-label="anchor" href="#improvements-0-1-6"></a></h4>
<ul><li>Added hints for keyboard shortcuts</li>
</ul></div>
</div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.5" id="threebrain-015">threeBrain 0.1.5<a class="anchor" aria-label="anchor" href="#threebrain-015"></a></h2><p class="text-muted">CRAN release: 2020-01-20</p>
<div class="section level3">
<h3 id="changes-0-1-5">Changes<a class="anchor" aria-label="anchor" href="#changes-0-1-5"></a></h3>
<ul><li>Import <code>FreeSurfer</code> and <code>SUMA</code> files <code>sulc</code>
</li>
<li>Control element update</li>
<li>Added <code>brain_proxy</code> to control in shiny element</li>
<li>Separated display and threshold data</li>
<li>
<code>FreeMesh</code> material can be switched between <code>MeshPhongMaterial</code> and <code>MeshLambertMaterial</code>
</li>
</ul><div class="section level4">
<h4 id="improvements-0-1-5">Improvements<a class="anchor" aria-label="anchor" href="#improvements-0-1-5"></a></h4>
<ul><li>UI will blur focus when clicking on canvas</li>
<li>Allow customizing widgets <code>background</code>, <code>cex</code> (font magnification), <code>timestamp</code> (display time)</li>
<li>Allow <code>controllers</code> (list) to override control UI</li>
<li>Added preset <code>syncviewers</code> (<code>threejs_brain(control_presets = ...)</code>) to synchronize multiple viewers in shiny environment</li>
</ul></div>
</div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.4" id="threebrain-014">threeBrain 0.1.4<a class="anchor" aria-label="anchor" href="#threebrain-014"></a></h2><p class="text-muted">CRAN release: 2019-10-18</p>
<div class="section level3">
<h3 id="changes-0-1-4">Changes<a class="anchor" aria-label="anchor" href="#changes-0-1-4"></a></h3>
<ul><li>Implemented a new mesh type - volume rendering using ray marching</li>
<li>Added alternative methods to read <code>.nii</code> files, <code>nibabel</code> is now optional</li>
<li>Customized color palettes and value range for better visualizations with outliers</li>
<li>Only requires <code>T1.mgz</code> or <code>brainmask</code> of <code>brain.finalsurf</code> is not found. This allows users only run <code>FreeSurfer</code> to the first stage, which only takes around 8 to 10 minutes instead of 6 hours.</li>
<li>Fully compatible with <code>htmlwidgets</code> in <code>shiny</code> mode. When calling <code>threejsBrainOutput</code> under <code><a href="https://rdrr.io/pkg/shiny/man/renderUI.html" class="external-link">shiny::renderUI</a></code>, the <code>DOM</code> element might get reset by <code>shiny</code>, causing a new 3D viewer created. This might consume more resource, causing memory leaks and even conflict context renderings. Also event listeners couldn’t reset correctly. A cache is created and now is reusing the canvas.</li>
</ul><div class="section level4">
<h4 id="improvements-0-1-4">Improvements<a class="anchor" aria-label="anchor" href="#improvements-0-1-4"></a></h4>
<ul><li>More flexible directory requirement</li>
<li>Added dispose function to canvas so that memory gets cleared correctly</li>
<li>Renderer optimization and memory optimization</li>
</ul></div>
<div class="section level4">
<h4 id="bug-fixes-0-1-4">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-1-4"></a></h4>
<ul><li>Fixed keyboard listeners locking the keys</li>
<li>Fixed huge memory leaks due to <code>threejs</code> not garbage collecting geometries and textures</li>
</ul></div>
</div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.3" id="threebrain-013">threeBrain 0.1.3<a class="anchor" aria-label="anchor" href="#threebrain-013"></a></h2><p class="text-muted">CRAN release: 2019-09-10</p>
<div class="section level3">
<h3 id="changes-0-1-3">Changes<a class="anchor" aria-label="anchor" href="#changes-0-1-3"></a></h3>
<ul><li>File structure change: now directly read in from <code>FreeSurfer</code> folder</li>
<li>Added readers for <code>.mgz</code>, <code>.m3z</code> files</li>
<li>Added coordinate system to align volume with surface data</li>
<li>Implemented side-viewers, added three side cameras at XYZ axis</li>
<li>Can now read, export electrodes as csv file</li>
<li>Re-write brain generating function</li>
<li>Can display/switch multiple value types</li>
<li>Added transparency to surfaces</li>
<li>Implemented experimental electrode localization</li>
<li>Automatically determine color type (continuous or discrete) and value range</li>
</ul><div class="section level4">
<h4 id="improvements-0-1-3">Improvements<a class="anchor" aria-label="anchor" href="#improvements-0-1-3"></a></h4>
<ul><li>Shortcuts available at <a href="https://github.com/dipterix/threeBrain/blob/master/shortcuts.md" class="external-link">here</a>
</li>
<li>Optimized electrode value settings</li>
</ul></div>
</div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.2" id="threebrain-012">threeBrain 0.1.2<a class="anchor" aria-label="anchor" href="#threebrain-012"></a></h2><p class="text-muted">CRAN release: 2019-06-28</p>
<div class="section level3">
<h3 id="changes-0-1-2">Changes<a class="anchor" aria-label="anchor" href="#changes-0-1-2"></a></h3>
<ul><li>Re-draw canvas on a 2D context to make customized overlay directly on canvas.</li>
<li>Implemented continuous and discrete legends to replace D3.</li>
<li>Added support to set main camera position and initial zoom level.</li>
<li>Added 3D scatter plot and examples.</li>
<li>Use hybrid render mode when animation not required to save battery usage.</li>
<li>Improved color palette calculation.</li>
<li>Support customized title.</li>
</ul><div class="section level4">
<h4 id="improvements-0-1-2">Improvements<a class="anchor" aria-label="anchor" href="#improvements-0-1-2"></a></h4>
<ul><li>Support customized datapath when saving widgets.</li>
<li>Added instructions on how to embed widgets into websites without R.</li>
</ul></div>
</div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.1" id="threebrain-011">threeBrain 0.1.1<a class="anchor" aria-label="anchor" href="#threebrain-011"></a></h2>
<ul><li>Implemented three types of geometries: plane, sphere and free. A free geometry takes arbitrary geometry vertices and faces to form a 3D mesh object.</li>
<li>Added animation to sphere object.</li>
<li>Replaced old JavaScript with npx driven modules.</li>
<li>Implemented D3 side-widget</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0" id="threebrain-010">threeBrain 0.1.0<a class="anchor" aria-label="anchor" href="#threebrain-010"></a></h2>
<ul><li>Initial private beta release!</li>
</ul></div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Zhengjia Wang, John Magnotti.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer></div>

  

  

  </body></html>

