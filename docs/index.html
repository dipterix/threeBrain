<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>3D Brain Visualization • threeBrain</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="3D Brain Visualization">
<meta property="og:description" content="In neuroscience, 'AFNI/SUMA' is a great tool to visualize 3D brain.
    However, it takes efforts to interact and share the viewer to others. In
    addition, 'AFNI/SUMA' doesn't support Windows platform. In the 'EEG/iEEG'
    field, it's hard to have multiple cortical electrodes mapped to a template
    brain for group analysis. Therefore this package is written aimed at
    providing a fast, stable, interactive and easy to share tool based on 'Three.js',
    a 'WebGL' engine to render 3D objects in the web browser such that we can
    display brain surfaces on webpage interactively. This package translates R
    objects to JavaScript objects via 'JSON' format, and provides 'R-Shiny' interface
    to manipulate geometries interactively. The visualizations can also serve as
    standalone widgets that can be easily shared across different platforms.
    Along with 'rave', another package developed by Beauchamp's lab at Baylor
    College Medicine, this package provides solutions to easily map surface
    electrodes from multiple subjects to one template 141 brain.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">threeBrain</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>

  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->


      </header><div class="row">
  <div class="contents col-md-9">
<div id="threebrain---html-webgl-based-3d-viewer" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#threebrain---html-webgl-based-3d-viewer" class="anchor"></a>threeBrain - HTML, WebGL based 3D Viewer</h1></div>
<p><img src="demo.gif"></p>
<p>A live <a href="">demo</a> is under construction!</p>
<div id="a-installation" class="section level2">
<h2 class="hasAnchor">
<a href="#a-installation" class="anchor"></a>A. Installation</h2>
<ol>
<li>Install <a href="https://www.python.org/downloads/"><code>Python3</code></a>, <a href="https://cran.r-project.org/"><code>R</code></a> and <a href="https://www.rstudio.com/products/rstudio/download/"><code>RStudio Desktop (Free Version)</code></a>
</li>
<li>Open <code>RStudio</code>, enter from its console:</li>
</ol>
<pre class="{r}"><code><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages("threeBrain")</a></code></pre>
<p>If you want to install <code>dev</code> version from <em>Github</em>, then use:</p>
<pre class="{r}"><code><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages("devtools")
devtools::install_github("dipterix/threeBrain@dev")</a></code></pre>
<ol>
<li>Setups: after installation, in <code>RStudio</code> console, type the following command</li>
</ol>
<pre class="{r}"><code><a href="reference/brain_setup.html">threeBrain::brain_setup()</a></code></pre>
<p>and follow the instructions.</p>
</div>
<div id="b-basic-brain-viewer" class="section level2">
<h2 class="hasAnchor">
<a href="#b-basic-brain-viewer" class="anchor"></a>B. Basic Brain Viewer</h2>
<p>Once finishing setting up of <code>threeBrain</code>, there will be a template subject <code>N27</code> (Collin’s 27) created at</p>
<pre><code>~/rave_data/others/three_brain/N27</code></pre>
<p><code>~</code> is your home directory. For example on my laptop, it’s <code>/Users/zhengjia/rave_data/others/three_brain/N27</code>. On Windows, it’s <code>C:\Users\zhengjia\rave_data\others\three_brain\N27</code>.</p>
<p>Let’s view this subject. The following commands all go to <code>RStudio</code> console.</p>
<ol>
<li>Import subject</li>
</ol>
<pre class="{r}"><code>n27 = freesurfer_brain(
    fs_subject_folder = '~/rave_data/others/three_brain/N27',
    subject_name = 'N27',
    additional_surfaces = c('white', 'smoothwm')
)</code></pre>
<ol>
<li>Visualize</li>
</ol>
<pre class="{r}"><code><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot(x)       # alternatively, you can use `x$plot()`</a></code></pre>
<p>If you have electrode file, you can import it before calling <code>plot</code> function. Please make sure it’s in <code>csv</code> format.</p>
<pre class="{r}"><code>x$set_electrodes(electrodes = "[PATH to ELECTRODE FILE]")</code></pre>
<p>Here is an example of electrode csv file. Only the first five columns (<strong>case-sensitive</strong>) are mandatory: <code>Electrode (integer)</code>, <code>Coord_x</code>, <code>Coord_y</code>, <code>Coord_z</code>, and <code>Label (character)</code>. <code>Coord_*</code> is <code>RAS</code> location from <code>FreeSurfer</code> coordinates.</p>
<pre><code>| Electrode| Coord_x| Coord_y| Coord_z|Label  | MNI305_x|  MNI305_y|  MNI305_z|SurfaceElectrode |SurfaceType | Radius| VertexNumber|Hemisphere |
|---------:|-------:|-------:|-------:|:------|--------:|---------:|---------:|:----------------|:-----------|------:|------------:|:----------|
|         1|    29.0|    -7.8|   -34.6|RMHCH1 | 30.46817| -17.98119| -23.40022|FALSE            |pial          |    0.5|           -1|right      |
|         2|    33.8|    -8.0|   -34.2|RMHCH2 | 35.57109| -17.76624| -22.80131|FALSE            |pial          |    0.5|           -1|right      |
|         3|    38.0|    -7.5|   -33.5|RMHCH3 | 39.97102| -16.81249| -22.17986|FALSE            |white          |    0.5|           -1|right      |
|         4|    42.6|    -6.8|   -33.0|RMHCH4 | 44.79092| -15.73442| -21.82591|FALSE            |smoothwm          |    0.5|           -1|right      |
|         5|    47.0|    -6.8|   -32.6|RMHCH5 | 49.45370| -15.35431| -21.31272|FALSE            |pial          |    0.5|           -1|right      |
|         ...</code></pre>
</div>
<div id="c-merge-subjects-and-template-mapping" class="section level2">
<h2 class="hasAnchor">
<a href="#c-merge-subjects-and-template-mapping" class="anchor"></a>C. Merge Subjects and Template mapping</h2>
<p>If you have your own subjects with <code>FreeSurfer</code> output, for example, I have two subjects <code>YAB</code> and <code>YCQ</code>. To merge these two subjects and show them on <code>N27</code> template,</p>
<pre class="{r}"><code># yab = ... (see section B for import a single subject)
# ycq = ...
template_n27 = threeBrain::merge_brain(yab, ycq, template_subject = 'N27')

plot( template_n27 )</code></pre>
<p>The viewer will be in <code>N27</code> template, and electrodes of these two subjects can be mapped via <code>MNI305</code> (for surface and stereo EEG) or <code>std.141</code> (for surface-only).</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=threeBrain">https://cloud.r-project.org/package=threeBrain</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Zhengjia Wang <br><small class="roles"> Author, maintainer, copyright holder </small>  </li>
<li>John Magnotti <br><small class="roles"> Author </small>  </li>
<li>Michael Beauchamp <br><small class="roles"> Author, data contributor, funder </small>  </li>
</ul>
</div>

  </div>
</div>

      <footer><div class="copyright">
  <p>Developed by Zhengjia Wang, John Magnotti, Michael Beauchamp.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>



  </body>
</html>
