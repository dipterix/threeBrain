/*! For license information please see threebrain-worker.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.threeBrain=e():t.threeBrain=e()}(this,(()=>(()=>{var t={7526:(t,e)=>{"use strict";e.byteLength=function(t){var e=o(t),i=e[0],r=e[1];return 3*(i+r)/4-r},e.toByteArray=function(t){var e,i,n=o(t),a=n[0],h=n[1],l=new s(function(t,e,i){return 3*(e+i)/4-i}(0,a,h)),u=0,c=h>0?a-4:a;for(i=0;i<c;i+=4)e=r[t.charCodeAt(i)]<<18|r[t.charCodeAt(i+1)]<<12|r[t.charCodeAt(i+2)]<<6|r[t.charCodeAt(i+3)],l[u++]=e>>16&255,l[u++]=e>>8&255,l[u++]=255&e;2===h&&(e=r[t.charCodeAt(i)]<<2|r[t.charCodeAt(i+1)]>>4,l[u++]=255&e);1===h&&(e=r[t.charCodeAt(i)]<<10|r[t.charCodeAt(i+1)]<<4|r[t.charCodeAt(i+2)]>>2,l[u++]=e>>8&255,l[u++]=255&e);return l},e.fromByteArray=function(t){for(var e,r=t.length,s=r%3,n=[],a=16383,o=0,l=r-s;o<l;o+=a)n.push(h(t,o,o+a>l?l:o+a));1===s?(e=t[r-1],n.push(i[e>>2]+i[e<<4&63]+"==")):2===s&&(e=(t[r-2]<<8)+t[r-1],n.push(i[e>>10]+i[e>>4&63]+i[e<<2&63]+"="));return n.join("")};for(var i=[],r=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)i[a]=n[a],r[n.charCodeAt(a)]=a;function o(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");return-1===i&&(i=e),[i,i===e?0:4-i%4]}function h(t,e,r){for(var s,n,a=[],o=e;o<r;o+=3)s=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),a.push(i[(n=s)>>18&63]+i[n>>12&63]+i[n>>6&63]+i[63&n]);return a.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},8287:(t,e,i)=>{"use strict";const r=i(7526),s=i(251),n="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=h,e.SlowBuffer=function(t){+t!=t&&(t=0);return h.alloc(+t)},e.INSPECT_MAX_BYTES=50;const a=2147483647;function o(t){if(t>a)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,h.prototype),e}function h(t,e,i){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return c(t)}return l(t,e,i)}function l(t,e,i){if("string"==typeof t)return function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!h.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const i=0|m(t,e);let r=o(i);const s=r.write(t,e);s!==i&&(r=r.slice(0,s));return r}(t,e);if(ArrayBuffer.isView(t))return function(t){if(X(t,Uint8Array)){const e=new Uint8Array(t);return f(e.buffer,e.byteOffset,e.byteLength)}return d(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(X(t,ArrayBuffer)||t&&X(t.buffer,ArrayBuffer))return f(t,e,i);if("undefined"!=typeof SharedArrayBuffer&&(X(t,SharedArrayBuffer)||t&&X(t.buffer,SharedArrayBuffer)))return f(t,e,i);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return h.from(r,e,i);const s=function(t){if(h.isBuffer(t)){const e=0|p(t.length),i=o(e);return 0===i.length||t.copy(i,0,0,e),i}if(void 0!==t.length)return"number"!=typeof t.length||$(t.length)?o(0):d(t);if("Buffer"===t.type&&Array.isArray(t.data))return d(t.data)}(t);if(s)return s;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return h.from(t[Symbol.toPrimitive]("string"),e,i);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function c(t){return u(t),o(t<0?0:0|p(t))}function d(t){const e=t.length<0?0:0|p(t.length),i=o(e);for(let r=0;r<e;r+=1)i[r]=255&t[r];return i}function f(t,e,i){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(i||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===e&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,e):new Uint8Array(t,e,i),Object.setPrototypeOf(r,h.prototype),r}function p(t){if(t>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|t}function m(t,e){if(h.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||X(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const i=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===i)return 0;let s=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return Z(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return W(t).length;default:if(s)return r?-1:Z(t).length;e=(""+e).toLowerCase(),s=!0}}function g(t,e,i){let r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return k(this,e,i);case"utf8":case"utf-8":return E(this,e,i);case"ascii":return S(this,e,i);case"latin1":case"binary":return M(this,e,i);case"base64":return A(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,e,i);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function y(t,e,i){const r=t[e];t[e]=t[i],t[i]=r}function _(t,e,i,r,s){if(0===t.length)return-1;if("string"==typeof i?(r=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),$(i=+i)&&(i=s?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(s)return-1;i=t.length-1}else if(i<0){if(!s)return-1;i=0}if("string"==typeof e&&(e=h.from(e,r)),h.isBuffer(e))return 0===e.length?-1:b(t,e,i,r,s);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?s?Uint8Array.prototype.indexOf.call(t,e,i):Uint8Array.prototype.lastIndexOf.call(t,e,i):b(t,[e],i,r,s);throw new TypeError("val must be string, number or Buffer")}function b(t,e,i,r,s){let n,a=1,o=t.length,h=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,o/=2,h/=2,i/=2}function l(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(s){let r=-1;for(n=i;n<o;n++)if(l(t,n)===l(e,-1===r?0:n-r)){if(-1===r&&(r=n),n-r+1===h)return r*a}else-1!==r&&(n-=n-r),r=-1}else for(i+h>o&&(i=o-h),n=i;n>=0;n--){let i=!0;for(let r=0;r<h;r++)if(l(t,n+r)!==l(e,r)){i=!1;break}if(i)return n}return-1}function x(t,e,i,r){i=Number(i)||0;const s=t.length-i;r?(r=Number(r))>s&&(r=s):r=s;const n=e.length;let a;for(r>n/2&&(r=n/2),a=0;a<r;++a){const r=parseInt(e.substr(2*a,2),16);if($(r))return a;t[i+a]=r}return a}function w(t,e,i,r){return H(Z(e,t.length-i),t,i,r)}function T(t,e,i,r){return H(function(t){const e=[];for(let i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,i,r)}function I(t,e,i,r){return H(W(e),t,i,r)}function v(t,e,i,r){return H(function(t,e){let i,r,s;const n=[];for(let a=0;a<t.length&&!((e-=2)<0);++a)i=t.charCodeAt(a),r=i>>8,s=i%256,n.push(s),n.push(r);return n}(e,t.length-i),t,i,r)}function A(t,e,i){return 0===e&&i===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,i))}function E(t,e,i){i=Math.min(t.length,i);const r=[];let s=e;for(;s<i;){const e=t[s];let n=null,a=e>239?4:e>223?3:e>191?2:1;if(s+a<=i){let i,r,o,h;switch(a){case 1:e<128&&(n=e);break;case 2:i=t[s+1],128==(192&i)&&(h=(31&e)<<6|63&i,h>127&&(n=h));break;case 3:i=t[s+1],r=t[s+2],128==(192&i)&&128==(192&r)&&(h=(15&e)<<12|(63&i)<<6|63&r,h>2047&&(h<55296||h>57343)&&(n=h));break;case 4:i=t[s+1],r=t[s+2],o=t[s+3],128==(192&i)&&128==(192&r)&&128==(192&o)&&(h=(15&e)<<18|(63&i)<<12|(63&r)<<6|63&o,h>65535&&h<1114112&&(n=h))}}null===n?(n=65533,a=1):n>65535&&(n-=65536,r.push(n>>>10&1023|55296),n=56320|1023&n),r.push(n),s+=a}return function(t){const e=t.length;if(e<=N)return String.fromCharCode.apply(String,t);let i="",r=0;for(;r<e;)i+=String.fromCharCode.apply(String,t.slice(r,r+=N));return i}(r)}e.kMaxLength=a,h.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),h.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}}),h.poolSize=8192,h.from=function(t,e,i){return l(t,e,i)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array),h.alloc=function(t,e,i){return function(t,e,i){return u(t),t<=0?o(t):void 0!==e?"string"==typeof i?o(t).fill(e,i):o(t).fill(e):o(t)}(t,e,i)},h.allocUnsafe=function(t){return c(t)},h.allocUnsafeSlow=function(t){return c(t)},h.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==h.prototype},h.compare=function(t,e){if(X(t,Uint8Array)&&(t=h.from(t,t.offset,t.byteLength)),X(e,Uint8Array)&&(e=h.from(e,e.offset,e.byteLength)),!h.isBuffer(t)||!h.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let i=t.length,r=e.length;for(let s=0,n=Math.min(i,r);s<n;++s)if(t[s]!==e[s]){i=t[s],r=e[s];break}return i<r?-1:r<i?1:0},h.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return h.alloc(0);let i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;const r=h.allocUnsafe(e);let s=0;for(i=0;i<t.length;++i){let e=t[i];if(X(e,Uint8Array))s+e.length>r.length?(h.isBuffer(e)||(e=h.from(e)),e.copy(r,s)):Uint8Array.prototype.set.call(r,e,s);else{if(!h.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(r,s)}s+=e.length}return r},h.byteLength=m,h.prototype._isBuffer=!0,h.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)y(this,e,e+1);return this},h.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},h.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},h.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?E(this,0,t):g.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(t){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===h.compare(this,t)},h.prototype.inspect=function(){let t="";const i=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim(),this.length>i&&(t+=" ... "),"<Buffer "+t+">"},n&&(h.prototype[n]=h.prototype.inspect),h.prototype.compare=function(t,e,i,r,s){if(X(t,Uint8Array)&&(t=h.from(t,t.offset,t.byteLength)),!h.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===r&&(r=0),void 0===s&&(s=this.length),e<0||i>t.length||r<0||s>this.length)throw new RangeError("out of range index");if(r>=s&&e>=i)return 0;if(r>=s)return-1;if(e>=i)return 1;if(this===t)return 0;let n=(s>>>=0)-(r>>>=0),a=(i>>>=0)-(e>>>=0);const o=Math.min(n,a),l=this.slice(r,s),u=t.slice(e,i);for(let t=0;t<o;++t)if(l[t]!==u[t]){n=l[t],a=u[t];break}return n<a?-1:a<n?1:0},h.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},h.prototype.indexOf=function(t,e,i){return _(this,t,e,i,!0)},h.prototype.lastIndexOf=function(t,e,i){return _(this,t,e,i,!1)},h.prototype.write=function(t,e,i,r){if(void 0===e)r="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)r=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(i)?(i>>>=0,void 0===r&&(r="utf8")):(r=i,i=void 0)}const s=this.length-e;if((void 0===i||i>s)&&(i=s),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let n=!1;for(;;)switch(r){case"hex":return x(this,t,e,i);case"utf8":case"utf-8":return w(this,t,e,i);case"ascii":case"latin1":case"binary":return T(this,t,e,i);case"base64":return I(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v(this,t,e,i);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),n=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const N=4096;function S(t,e,i){let r="";i=Math.min(t.length,i);for(let s=e;s<i;++s)r+=String.fromCharCode(127&t[s]);return r}function M(t,e,i){let r="";i=Math.min(t.length,i);for(let s=e;s<i;++s)r+=String.fromCharCode(t[s]);return r}function k(t,e,i){const r=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>r)&&(i=r);let s="";for(let r=e;r<i;++r)s+=K[t[r]];return s}function F(t,e,i){const r=t.slice(e,i);let s="";for(let t=0;t<r.length-1;t+=2)s+=String.fromCharCode(r[t]+256*r[t+1]);return s}function C(t,e,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function z(t,e,i,r,s,n){if(!h.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>s||e<n)throw new RangeError('"value" argument is out of bounds');if(i+r>t.length)throw new RangeError("Index out of range")}function U(t,e,i,r,s){G(e,r,s,t,i,7);let n=Number(e&BigInt(4294967295));t[i++]=n,n>>=8,t[i++]=n,n>>=8,t[i++]=n,n>>=8,t[i++]=n;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[i++]=a,a>>=8,t[i++]=a,a>>=8,t[i++]=a,a>>=8,t[i++]=a,i}function D(t,e,i,r,s){G(e,r,s,t,i,7);let n=Number(e&BigInt(4294967295));t[i+7]=n,n>>=8,t[i+6]=n,n>>=8,t[i+5]=n,n>>=8,t[i+4]=n;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[i+3]=a,a>>=8,t[i+2]=a,a>>=8,t[i+1]=a,a>>=8,t[i]=a,i+8}function B(t,e,i,r,s,n){if(i+r>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function O(t,e,i,r,n){return e=+e,i>>>=0,n||B(t,0,i,4),s.write(t,e,i,r,23,4),i+4}function R(t,e,i,r,n){return e=+e,i>>>=0,n||B(t,0,i,8),s.write(t,e,i,r,52,8),i+8}h.prototype.slice=function(t,e){const i=this.length;(t=~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),(e=void 0===e?i:~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t);const r=this.subarray(t,e);return Object.setPrototypeOf(r,h.prototype),r},h.prototype.readUintLE=h.prototype.readUIntLE=function(t,e,i){t>>>=0,e>>>=0,i||C(t,e,this.length);let r=this[t],s=1,n=0;for(;++n<e&&(s*=256);)r+=this[t+n]*s;return r},h.prototype.readUintBE=h.prototype.readUIntBE=function(t,e,i){t>>>=0,e>>>=0,i||C(t,e,this.length);let r=this[t+--e],s=1;for(;e>0&&(s*=256);)r+=this[t+--e]*s;return r},h.prototype.readUint8=h.prototype.readUInt8=function(t,e){return t>>>=0,e||C(t,1,this.length),this[t]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(t,e){return t>>>=0,e||C(t,2,this.length),this[t]|this[t+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(t,e){return t>>>=0,e||C(t,2,this.length),this[t]<<8|this[t+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(t,e){return t>>>=0,e||C(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(t,e){return t>>>=0,e||C(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},h.prototype.readBigUInt64LE=Q((function(t){q(t>>>=0,"offset");const e=this[t],i=this[t+7];void 0!==e&&void 0!==i||Y(t,this.length-8);const r=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,s=this[++t]+256*this[++t]+65536*this[++t]+i*2**24;return BigInt(r)+(BigInt(s)<<BigInt(32))})),h.prototype.readBigUInt64BE=Q((function(t){q(t>>>=0,"offset");const e=this[t],i=this[t+7];void 0!==e&&void 0!==i||Y(t,this.length-8);const r=e*2**24+65536*this[++t]+256*this[++t]+this[++t],s=this[++t]*2**24+65536*this[++t]+256*this[++t]+i;return(BigInt(r)<<BigInt(32))+BigInt(s)})),h.prototype.readIntLE=function(t,e,i){t>>>=0,e>>>=0,i||C(t,e,this.length);let r=this[t],s=1,n=0;for(;++n<e&&(s*=256);)r+=this[t+n]*s;return s*=128,r>=s&&(r-=Math.pow(2,8*e)),r},h.prototype.readIntBE=function(t,e,i){t>>>=0,e>>>=0,i||C(t,e,this.length);let r=e,s=1,n=this[t+--r];for(;r>0&&(s*=256);)n+=this[t+--r]*s;return s*=128,n>=s&&(n-=Math.pow(2,8*e)),n},h.prototype.readInt8=function(t,e){return t>>>=0,e||C(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},h.prototype.readInt16LE=function(t,e){t>>>=0,e||C(t,2,this.length);const i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},h.prototype.readInt16BE=function(t,e){t>>>=0,e||C(t,2,this.length);const i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},h.prototype.readInt32LE=function(t,e){return t>>>=0,e||C(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},h.prototype.readInt32BE=function(t,e){return t>>>=0,e||C(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},h.prototype.readBigInt64LE=Q((function(t){q(t>>>=0,"offset");const e=this[t],i=this[t+7];void 0!==e&&void 0!==i||Y(t,this.length-8);const r=this[t+4]+256*this[t+5]+65536*this[t+6]+(i<<24);return(BigInt(r)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),h.prototype.readBigInt64BE=Q((function(t){q(t>>>=0,"offset");const e=this[t],i=this[t+7];void 0!==e&&void 0!==i||Y(t,this.length-8);const r=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(r)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+i)})),h.prototype.readFloatLE=function(t,e){return t>>>=0,e||C(t,4,this.length),s.read(this,t,!0,23,4)},h.prototype.readFloatBE=function(t,e){return t>>>=0,e||C(t,4,this.length),s.read(this,t,!1,23,4)},h.prototype.readDoubleLE=function(t,e){return t>>>=0,e||C(t,8,this.length),s.read(this,t,!0,52,8)},h.prototype.readDoubleBE=function(t,e){return t>>>=0,e||C(t,8,this.length),s.read(this,t,!1,52,8)},h.prototype.writeUintLE=h.prototype.writeUIntLE=function(t,e,i,r){if(t=+t,e>>>=0,i>>>=0,!r){z(this,t,e,i,Math.pow(2,8*i)-1,0)}let s=1,n=0;for(this[e]=255&t;++n<i&&(s*=256);)this[e+n]=t/s&255;return e+i},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(t,e,i,r){if(t=+t,e>>>=0,i>>>=0,!r){z(this,t,e,i,Math.pow(2,8*i)-1,0)}let s=i-1,n=1;for(this[e+s]=255&t;--s>=0&&(n*=256);)this[e+s]=t/n&255;return e+i},h.prototype.writeUint8=h.prototype.writeUInt8=function(t,e,i){return t=+t,e>>>=0,i||z(this,t,e,1,255,0),this[e]=255&t,e+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(t,e,i){return t=+t,e>>>=0,i||z(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(t,e,i){return t=+t,e>>>=0,i||z(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(t,e,i){return t=+t,e>>>=0,i||z(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(t,e,i){return t=+t,e>>>=0,i||z(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},h.prototype.writeBigUInt64LE=Q((function(t,e=0){return U(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),h.prototype.writeBigUInt64BE=Q((function(t,e=0){return D(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),h.prototype.writeIntLE=function(t,e,i,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*i-1);z(this,t,e,i,r-1,-r)}let s=0,n=1,a=0;for(this[e]=255&t;++s<i&&(n*=256);)t<0&&0===a&&0!==this[e+s-1]&&(a=1),this[e+s]=(t/n|0)-a&255;return e+i},h.prototype.writeIntBE=function(t,e,i,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*i-1);z(this,t,e,i,r-1,-r)}let s=i-1,n=1,a=0;for(this[e+s]=255&t;--s>=0&&(n*=256);)t<0&&0===a&&0!==this[e+s+1]&&(a=1),this[e+s]=(t/n|0)-a&255;return e+i},h.prototype.writeInt8=function(t,e,i){return t=+t,e>>>=0,i||z(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},h.prototype.writeInt16LE=function(t,e,i){return t=+t,e>>>=0,i||z(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},h.prototype.writeInt16BE=function(t,e,i){return t=+t,e>>>=0,i||z(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},h.prototype.writeInt32LE=function(t,e,i){return t=+t,e>>>=0,i||z(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},h.prototype.writeInt32BE=function(t,e,i){return t=+t,e>>>=0,i||z(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},h.prototype.writeBigInt64LE=Q((function(t,e=0){return U(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),h.prototype.writeBigInt64BE=Q((function(t,e=0){return D(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),h.prototype.writeFloatLE=function(t,e,i){return O(this,t,e,!0,i)},h.prototype.writeFloatBE=function(t,e,i){return O(this,t,e,!1,i)},h.prototype.writeDoubleLE=function(t,e,i){return R(this,t,e,!0,i)},h.prototype.writeDoubleBE=function(t,e,i){return R(this,t,e,!1,i)},h.prototype.copy=function(t,e,i,r){if(!h.isBuffer(t))throw new TypeError("argument should be a Buffer");if(i||(i=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<i&&(r=i),r===i)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-i&&(r=t.length-e+i);const s=r-i;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,i,r):Uint8Array.prototype.set.call(t,this.subarray(i,r),e),s},h.prototype.fill=function(t,e,i,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,i=this.length):"string"==typeof i&&(r=i,i=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!h.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){const e=t.charCodeAt(0);("utf8"===r&&e<128||"latin1"===r)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;let s;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(s=e;s<i;++s)this[s]=t;else{const n=h.isBuffer(t)?t:h.from(t,r),a=n.length;if(0===a)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(s=0;s<i-e;++s)this[s+e]=n[s%a]}return this};const L={};function P(t,e,i){L[t]=class extends i{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function V(t){let e="",i=t.length;const r="-"===t[0]?1:0;for(;i>=r+4;i-=3)e=`_${t.slice(i-3,i)}${e}`;return`${t.slice(0,i)}${e}`}function G(t,e,i,r,s,n){if(t>i||t<e){const r="bigint"==typeof e?"n":"";let s;throw s=n>3?0===e||e===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(n+1)}${r}`:`>= -(2${r} ** ${8*(n+1)-1}${r}) and < 2 ** ${8*(n+1)-1}${r}`:`>= ${e}${r} and <= ${i}${r}`,new L.ERR_OUT_OF_RANGE("value",s,t)}!function(t,e,i){q(e,"offset"),void 0!==t[e]&&void 0!==t[e+i]||Y(e,t.length-(i+1))}(r,s,n)}function q(t,e){if("number"!=typeof t)throw new L.ERR_INVALID_ARG_TYPE(e,"number",t)}function Y(t,e,i){if(Math.floor(t)!==t)throw q(t,i),new L.ERR_OUT_OF_RANGE(i||"offset","an integer",t);if(e<0)throw new L.ERR_BUFFER_OUT_OF_BOUNDS;throw new L.ERR_OUT_OF_RANGE(i||"offset",`>= ${i?1:0} and <= ${e}`,t)}P("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),P("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),P("ERR_OUT_OF_RANGE",(function(t,e,i){let r=`The value of "${t}" is out of range.`,s=i;return Number.isInteger(i)&&Math.abs(i)>2**32?s=V(String(i)):"bigint"==typeof i&&(s=String(i),(i>BigInt(2)**BigInt(32)||i<-(BigInt(2)**BigInt(32)))&&(s=V(s)),s+="n"),r+=` It must be ${e}. Received ${s}`,r}),RangeError);const j=/[^+/0-9A-Za-z-_]/g;function Z(t,e){let i;e=e||1/0;const r=t.length;let s=null;const n=[];for(let a=0;a<r;++a){if(i=t.charCodeAt(a),i>55295&&i<57344){if(!s){if(i>56319){(e-=3)>-1&&n.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&n.push(239,191,189);continue}s=i;continue}if(i<56320){(e-=3)>-1&&n.push(239,191,189),s=i;continue}i=65536+(s-55296<<10|i-56320)}else s&&(e-=3)>-1&&n.push(239,191,189);if(s=null,i<128){if((e-=1)<0)break;n.push(i)}else if(i<2048){if((e-=2)<0)break;n.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;n.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;n.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return n}function W(t){return r.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(j,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function H(t,e,i,r){let s;for(s=0;s<r&&!(s+i>=e.length||s>=t.length);++s)e[s+i]=t[s];return s}function X(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function $(t){return t!=t}const K=function(){const t="0123456789abcdef",e=new Array(256);for(let i=0;i<16;++i){const r=16*i;for(let s=0;s<16;++s)e[r+s]=t[i]+t[s]}return e}();function Q(t){return"undefined"==typeof BigInt?J:t}function J(){throw new Error("BigInt not supported")}},629:t=>{"use strict";var e={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",decodeArrayBuffer:function(t){var e=this._keyStr.indexOf(t.charAt(t.length-1)),i=this._keyStr.indexOf(t.charAt(t.length-2)),r=t.length/4*3;64==e&&r--,64==i&&r--;var s=new ArrayBuffer(r);return this.decode(t,s,r),s},decode:function(t,e,i){var r,s,n,a,o,h,l,u=0,c=0;for(r=e?new Uint8Array(e):new Uint8Array(i),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),u=0;u<i;u+=3)s=this._keyStr.indexOf(t.charAt(c++))<<2|(o=this._keyStr.indexOf(t.charAt(c++)))>>4,n=(15&o)<<4|(h=this._keyStr.indexOf(t.charAt(c++)))>>2,a=(3&h)<<6|(l=this._keyStr.indexOf(t.charAt(c++))),r[u]=s,64!=h&&(r[u+1]=n),64!=l&&(r[u+2]=a);return r}};t.exports&&(t.exports=e)},5686:(t,e,i)=>{"use strict";var r=r||{};r.Transform=r.Transform||i(9771);var s=s||i(629),n=n||i(4419);r.NIFTI_INTENT_GENMATRIX="NIFTI_INTENT_GENMATRIX",r.NIFTI_INTENT_LABEL="NIFTI_INTENT_LABEL",r.NIFTI_INTENT_NODE_INDEX="NIFTI_INTENT_NODE_INDEX",r.NIFTI_INTENT_POINTSET="NIFTI_INTENT_POINTSET",r.NIFTI_INTENT_RGB_VECTOR="NIFTI_INTENT_RGB_VECTOR",r.NIFTI_INTENT_RGBA_VECTOR="NIFTI_INTENT_RGBA_VECTOR",r.NIFTI_INTENT_SHAPE="NIFTI_INTENT_SHAPE",r.NIFTI_INTENT_TIME_SERIES="NIFTI_INTENT_TIME_SERIES",r.NIFTI_INTENT_TRIANGLE="NIFTI_INTENT_TRIANGLE",r.NIFTI_INTENT_NONE="NIFTI_INTENT_NONE",r.NIFTI_INTENT_VECTOR="NIFTI_INTENT_VECTOR",r.ATT_ARRAYINDEXINGORDER="ArrayIndexingOrder",r.ATT_DATATYPE="DataType",r.ATT_DIMENSIONALITY="Dimensionality",r.ATT_DIMN="Dim",r.ATT_ENCODING="Encoding",r.ATT_ENDIAN="Endian",r.ATT_EXTERNALFILENAME="ExternalFileName",r.ATT_EXTERNALFILEOFFSET="ExternalFileOffset",r.ATT_INTENT="Intent",r.ENCODING_ASCII="ASCII",r.ENCODING_BASE64BINARY="Base64Binary",r.ENCODING_GZIPBASE64BINARY="GZipBase64Binary",r.ENCODING_EXTERNALFILEBINARY="ExternalFileBinary",r.TYPE_NIFTI_TYPE_UINT8="NIFTI_TYPE_UINT8",r.TYPE_NIFTI_TYPE_INT32="NIFTI_TYPE_INT32",r.TYPE_NIFTI_TYPE_FLOAT32="NIFTI_TYPE_FLOAT32",r.DataArray=r.DataArray||function(){this.attributes=null,this.metadata={},this.transforms=[],this.data=null,this.dataConverted=!1},r.DataArray.prototype.isPointSet=function(){return this.attributes[r.ATT_INTENT]===r.NIFTI_INTENT_POINTSET},r.DataArray.prototype.isTriangles=function(){return this.attributes[r.ATT_INTENT]===r.NIFTI_INTENT_TRIANGLE},r.DataArray.prototype.isNormals=function(){return this.attributes[r.ATT_INTENT]===r.NIFTI_INTENT_VECTOR},r.DataArray.prototype.isColors=function(){return this.attributes[r.ATT_INTENT]===r.NIFTI_INTENT_RGB_VECTOR||this.attributes[r.ATT_INTENT]===r.NIFTI_INTENT_RGBA_VECTOR},r.DataArray.prototype.getDimensions=function(){return parseInt(this.attributes[r.ATT_DIMENSIONALITY])},r.DataArray.prototype.getNumElements=function(t){return void 0===t&&(t=0),parseInt(this.attributes[r.ATT_DIMN+t])},r.DataArray.prototype.isScalar=function(){return 1==this.getDimensions()},r.DataArray.prototype.isTriple=function(){return 2==this.getDimensions()&&3==this.getNumElements(1)},r.DataArray.prototype.isQuad=function(){return 2==this.getDimensions()&&4==this.getNumElements(1)},r.DataArray.prototype.isAscii=function(){return r.ENCODING_ASCII===this.attributes[r.ATT_ENCODING]},r.DataArray.prototype.isBase64Binary=function(){return r.ENCODING_BASE64BINARY===this.attributes[r.ATT_ENCODING]},r.DataArray.prototype.isGzipBase64Binary=function(){return r.ENCODING_GZIPBASE64BINARY===this.attributes[r.ATT_ENCODING]},r.DataArray.prototype.isBase64Encoded=function(){return this.isBase64Binary()||this.isGzipBase64Binary()},r.DataArray.prototype.isFloat32=function(){return r.TYPE_NIFTI_TYPE_FLOAT32===this.attributes[r.ATT_DATATYPE]},r.DataArray.prototype.isInt32=function(){return r.TYPE_NIFTI_TYPE_INT32===this.attributes[r.ATT_DATATYPE]},r.DataArray.prototype.isUnsignedInt8=function(){return r.TYPE_NIFTI_TYPE_UINT8===this.attributes[r.ATT_DATATYPE]},r.DataArray.prototype.getData=function(){return this.dataConverted||(this.dataConverted=!0,this.isAscii()?this.isUnsignedInt8()?r.DataArray.readUnsignedInt8ASCII(this):this.isInt32()?r.DataArray.readSignedInt32ASCII(this):r.DataArray.readFloat32ASCII(this):this.isBase64Binary()?this.isUnsignedInt8()?r.DataArray.readUnsignedInt8Base64(this):this.isInt32()?r.DataArray.readSignedInt32Base64(this):r.DataArray.readFloat32Base64(this):this.isGzipBase64Binary()&&(this.isUnsignedInt8()?r.DataArray.readUnsignedInt8GZIPBase64(this):this.isInt32()?r.DataArray.readSignedInt32GZIPBase64(this):r.DataArray.readFloat32GZIPBase64(this))),this.data},r.DataArray.prototype.getDataAsync=function(t,e){this.dataConverted||(this.dataConverted=!0,this.isAscii()?(this.isUnsignedInt8()?r.DataArray.readUnsignedInt8ASCII(this):this.isInt32()?r.DataArray.readSignedInt32ASCII(this):r.DataArray.readFloat32ASCII(this),e()):this.isBase64Binary()?(this.isUnsignedInt8()?r.DataArray.readUnsignedInt8Base64(this):this.isInt32()?r.DataArray.readSignedInt32Base64(this):r.DataArray.readFloat32Base64(this),e()):this.isGzipBase64Binary()&&(this.isUnsignedInt8()?r.DataArray.readUnsignedInt8GZIPBase64Async(this,t,e):this.isInt32()?r.DataArray.readSignedInt32GZIPBase64Async(this,t,e):r.DataArray.readFloat32GZIPBase64Async(this,t,e)))},r.DataArray.readFloat32ASCII=function(t){t.data=new Float32Array(t.data.match(/[+-]?\d+(\.\d+)?/g).map((function(t){return parseFloat(t)})))},r.DataArray.readSignedInt32ASCII=function(t){t.data=new Int32Array(t.data.match(/[+-]?\d+(\.\d+)?/g).map((function(t){return parseInt(t)})))},r.DataArray.readUnsignedInt8ASCII=function(t){t.data=new Uint8Array(t.data.match(/[+-]?\d+(\.\d+)?/g).map((function(t){return parseInt(t)})))},r.DataArray.readUnsignedInt8Base64=function(t){var e=s.decodeArrayBuffer(t.data);t.data=new Uint8Array(e,0,e.byteLength)},r.DataArray.readSignedInt32Base64=function(t){var e=s.decodeArrayBuffer(t.data);t.data=new Int32Array(e,0,e.byteLength/4)},r.DataArray.readFloat32Base64=function(t){var e=s.decodeArrayBuffer(t.data);t.data=new Float32Array(e,0,e.byteLength/4)},r.DataArray.readUnsignedInt8GZIPBase64=function(t){var e=s.decodeArrayBuffer(t.data);e=n.decompressSync(new Uint8Array(e)).buffer,t.data=new Uint8Array(e,0,e.byteLength)},r.DataArray.readUnsignedInt8GZIPBase64Async=function(t,e,i){var a=s.decodeArrayBuffer(t.data),o=new n.Inflate,h=function(){t.data=new Uint8Array(o.result.buffer,0,o.result.buffer.byteLength),i(t.data)};setTimeout((function(){r.DataArray.readNext(o,a,0,e,h)}),0)},r.DataArray.readSignedInt32GZIPBase64=function(t){var e=s.decodeArrayBuffer(t.data);e=n.decompressSync(new Uint8Array(e)).buffer,t.data=new Int32Array(e,0,e.byteLength/4)},r.DataArray.readSignedInt32GZIPBase64Async=function(t,e,i){var a=s.decodeArrayBuffer(t.data),o=new n.Inflate,h=function(){t.data=new Int32Array(o.result.buffer,0,o.result.buffer.byteLength/4),i(t.data)};setTimeout((function(){r.DataArray.readNext(o,a,0,e,h)}),0)},r.DataArray.readFloat32GZIPBase64=function(t){var e=s.decodeArrayBuffer(t.data);e=n.decompressSync(new Uint8Array(e)).buffer,t.data=new Float32Array(e,0,e.byteLength/4)},r.DataArray.readFloat32GZIPBase64Async=function(t,e,i){var a=s.decodeArrayBuffer(t.data),o=new n.Inflate,h=function(){t.data=new Float32Array(o.result.buffer,0,o.result.buffer.byteLength/4),i(t.data)};setTimeout((function(){r.DataArray.readNext(o,a,0,e,h)}),0)},r.DataArray.readNext=function(t,e,i,s,n){var a=i+32768,o=a>=e.byteLength;t.push(e.slice(i,i+32768),o),o?n():(s(a/e.byteLength),setTimeout((function(){r.DataArray.readNext(t,e,a,s,n)}),0))};t.exports&&(t.exports=r.DataArray)},1590:(t,e,i)=>{"use strict";var r=r||{};r.Utils=r.Utils||i(6715),r.DataArray=r.DataArray||i(5686),r.Transform=r.Transform||i(9771),r.Label=r.Label||i(9937);var s=s||i(4043);r.TAG_TRANSFORM="CoordinateSystemTransformMatrix",r.TAG_DATA="Data",r.TAG_DATAARRAY="DataArray",r.TAG_DATASPACE="DataSpace",r.TAG_GIFTI="GIFTI",r.TAG_LABEL="Label",r.TAG_LABELTABLE="LabelTable",r.TAG_MATRIXDATA="MatrixData",r.TAG_METADATA="MetaData",r.TAG_MD="MD",r.TAG_NAME="Name",r.TAG_TRANSFORMEDSPACE="TransformedSpace",r.TAG_VALUE="Value",r.GIFTI=r.GIFTI||function(){this.attributes=null,this.metadata={},this.dataArrays=[],this.labelTable=[]},r.GIFTI.prototype.getPointsDataArray=function(){var t;for(t=0;t<this.dataArrays.length;t+=1)if(this.dataArrays[t].isPointSet())return this.dataArrays[t];return null},r.GIFTI.prototype.getTrianglesDataArray=function(){var t;for(t=0;t<this.dataArrays.length;t+=1)if(this.dataArrays[t].isTriangles())return this.dataArrays[t];return null},r.GIFTI.prototype.getNormalsDataArray=function(){var t;for(t=0;t<this.dataArrays.length;t+=1)if(this.dataArrays[t].isNormals())return this.dataArrays[t];return null},r.GIFTI.prototype.getColorsDataArray=function(){var t;for(t=0;t<this.dataArrays.length;t+=1)if(this.dataArrays[t].isColors())return this.dataArrays[t];return null},r.GIFTI.prototype.getNumPoints=function(){var t;for(t=0;t<this.dataArrays.length;t+=1)if(this.dataArrays[t].isPointSet())return this.dataArrays[t].getNumElements();return 0},r.GIFTI.prototype.getNumTriangles=function(){var t;for(t=0;t<this.dataArrays.length;t+=1)if(this.dataArrays[t].isTriangles())return this.dataArrays[t].getNumElements();return 0},r.isThisFormat=function(t){return-1!==t.indexOf(".gii")},r.parse=function(t){var e=s.parser(!0),i=null,n=null,a=null,o=null,h=null,l=null,u="",c=null,d=!1,f=!1,p=!1,m=!1,g=!1,y=!1,_=!1;return e.onopentag=function(t){t.name===r.TAG_GIFTI?(a=i=new r.GIFTI,i.attributes=t.attributes):t.name===r.TAG_METADATA?!0:t.name===r.TAG_MD?!0:t.name===r.TAG_NAME?d=!0:t.name===r.TAG_VALUE?f=!0:t.name===r.TAG_LABELTABLE?!0:t.name===r.TAG_LABEL?(_=!0,c=new r.Label(t.attributes)):t.name===r.TAG_DATAARRAY?(a=n=new r.DataArray,i.dataArrays.push(n),n.attributes=t.attributes):t.name===r.TAG_TRANSFORM?(l=new r.Transform,n.transforms.push(l)):t.name===r.TAG_DATASPACE?p=!0:t.name===r.TAG_TRANSFORMEDSPACE?m=!0:t.name===r.TAG_MATRIXDATA?g=!0:t.name===r.TAG_DATA&&(y=!0)},e.ontext=e.oncdata=function(t){(d||f||p||m||g||y||_)&&(u+=t)},e.onclosetag=function(t){t===r.TAG_GIFTI?!1:t===r.TAG_METADATA?!1:t===r.TAG_MD?a&&(a.metadata[o]=h):t===r.TAG_NAME?(d=!1,o=u,u=""):t===r.TAG_VALUE?(f=!1,h=u,u=""):t===r.TAG_LABELTABLE?!1:t===r.TAG_LABEL?(c.label=u.trim(),i.labelTable[c.key]=c,u=""):t===r.TAG_DATAARRAY?!1:t===r.TAG_TRANSFORM?!1:t===r.TAG_DATASPACE?(p=!1,l.dataSpace=u,u=""):t===r.TAG_TRANSFORMEDSPACE?(m=!1,l.transformedSpace=u,u=""):t===r.TAG_MATRIXDATA?(g=!1,l.matrixData=u,u=""):t===r.TAG_DATA&&(y=!1,n.data=u,u="")},e.onerror=function(t){console.log(t)},e.write(t).close(),i};t.exports&&(t.exports=r)},9937:t=>{"use strict";var e=e||{};e.ATT_KEY="Key",e.ATT_RED="Red",e.ATT_GREEN="Green",e.ATT_BLUE="Blue",e.ATT_ALPHA="Alpha",e.ATT_INDEX="Index",e.Label=e.Label||function(t){this.key=t[e.ATT_KEY]||t[e.ATT_INDEX],this.r=parseFloat(t[e.ATT_RED]),this.g=parseFloat(t[e.ATT_GREEN]),this.b=parseFloat(t[e.ATT_BLUE]),this.a=parseFloat(t[e.ATT_ALPHA]),this.label=null};t.exports&&(t.exports=e.Label)},9771:t=>{"use strict";var e=e||{};e.Transform=e.Transform||function(){this.dataSpace=null,this.transformedSpace=null,this.matrixData=null};t.exports&&(t.exports=e.Transform)},6715:t=>{"use strict";var e=e||{};e.Utils=e.Utils||{},e.Utils.crcTable=null,e.Utils.makeCRCTable=function(){for(var t,e=[],i=0;i<256;i++){t=i;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[i]=t}return e},e.Utils.crc32=function(t){for(var i=e.Utils.crcTable||(e.Utils.crcTable=e.Utils.makeCRCTable()),r=~0,s=0;s<t.byteLength;s++)r=r>>>8^i[255&(r^t.getUint8(s))];return~r>>>0};t.exports&&(t.exports=e.Utils)},251:(t,e)=>{e.read=function(t,e,i,r,s){var n,a,o=8*s-r-1,h=(1<<o)-1,l=h>>1,u=-7,c=i?s-1:0,d=i?-1:1,f=t[e+c];for(c+=d,n=f&(1<<-u)-1,f>>=-u,u+=o;u>0;n=256*n+t[e+c],c+=d,u-=8);for(a=n&(1<<-u)-1,n>>=-u,u+=r;u>0;a=256*a+t[e+c],c+=d,u-=8);if(0===n)n=1-l;else{if(n===h)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),n-=l}return(f?-1:1)*a*Math.pow(2,n-r)},e.write=function(t,e,i,r,s,n){var a,o,h,l=8*n-s-1,u=(1<<l)-1,c=u>>1,d=23===s?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:n-1,p=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-a))<1&&(a--,h*=2),(e+=a+c>=1?d/h:d*Math.pow(2,1-c))*h>=2&&(a++,h/=2),a+c>=u?(o=0,a=u):a+c>=1?(o=(e*h-1)*Math.pow(2,s),a+=c):(o=e*Math.pow(2,c-1)*Math.pow(2,s),a=0));s>=8;t[i+f]=255&o,f+=p,o/=256,s-=8);for(a=a<<s|o,l+=s;l>0;t[i+f]=255&a,f+=p,a/=256,l-=8);t[i+f-p]|=128*m}},8854:(t,e,i)=>{"use strict";var r=r||{};r.NIFTI1=r.NIFTI1||i(3483),r.NIFTI2=r.NIFTI2||i(2158),r.Utils=r.Utils||i(6744);var s=s||i(1668);r.isNIFTI1=function(t){var e,i,s,n;return!(t.byteLength<r.NIFTI1.STANDARD_HEADER_SIZE)&&((e=new DataView(t))&&(i=e.getUint8(r.NIFTI1.MAGIC_NUMBER_LOCATION)),s=e.getUint8(r.NIFTI1.MAGIC_NUMBER_LOCATION+1),n=e.getUint8(r.NIFTI1.MAGIC_NUMBER_LOCATION+2),!(i!==r.NIFTI1.MAGIC_NUMBER[0]||s!==r.NIFTI1.MAGIC_NUMBER[1]||n!==r.NIFTI1.MAGIC_NUMBER[2]))},r.isNIFTI2=function(t){var e,i,s,n;return!(t.byteLength<r.NIFTI1.STANDARD_HEADER_SIZE)&&(i=(e=new DataView(t)).getUint8(r.NIFTI2.MAGIC_NUMBER_LOCATION),s=e.getUint8(r.NIFTI2.MAGIC_NUMBER_LOCATION+1),n=e.getUint8(r.NIFTI2.MAGIC_NUMBER_LOCATION+2),!(i!==r.NIFTI2.MAGIC_NUMBER[0]||s!==r.NIFTI2.MAGIC_NUMBER[1]||n!==r.NIFTI2.MAGIC_NUMBER[2]))},r.isNIFTI=function(t){return r.isNIFTI1(t)||r.isNIFTI2(t)},r.isCompressed=function(t){var e,i,s;if(t){if(i=(e=new DataView(t)).getUint8(0),s=e.getUint8(1),i===r.Utils.GUNZIP_MAGIC_COOKIE1)return!0;if(s===r.Utils.GUNZIP_MAGIC_COOKIE2)return!0}return!1},r.decompress=function(t){return s.inflate(t).buffer},r.readHeader=function(t){var e=null;return r.isCompressed(t)&&(t=r.decompress(t)),r.isNIFTI1(t)?e=new r.NIFTI1:r.isNIFTI2(t)&&(e=new r.NIFTI2),e?e.readHeader(t):console.error("That file does not appear to be NIFTI!"),e},r.hasExtension=function(t){return 0!=t.extensionFlag[0]},r.readImage=function(t,e){var i=t.vox_offset,r=1,s=1;t.dims[4]&&(r=t.dims[4]),t.dims[5]&&(s=t.dims[5]);var n=t.dims[1]*t.dims[2]*t.dims[3]*r*s*(t.numBitsPerVoxel/8);return e.slice(i,i+n)},r.readExtension=function(t,e){var i=t.getExtensionLocation(),r=t.extensionSize;return e.slice(i,i+r)},r.readExtensionData=function(t,e){var i=t.getExtensionLocation(),r=t.extensionSize;return e.slice(i+8,i+r-8)};t.exports&&(t.exports=r)},3483:(t,e,i)=>{"use strict";var r=r||{};r.Utils=r.Utils||i(6744),r.NIFTI1=r.NIFTI1||function(){this.littleEndian=!1,this.dim_info=0,this.dims=[],this.intent_p1=0,this.intent_p2=0,this.intent_p3=0,this.intent_code=0,this.datatypeCode=0,this.numBitsPerVoxel=0,this.slice_start=0,this.slice_end=0,this.slice_code=0,this.pixDims=[],this.vox_offset=0,this.scl_slope=1,this.scl_inter=0,this.xyzt_units=0,this.cal_max=0,this.cal_min=0,this.slice_duration=0,this.toffset=0,this.description="",this.aux_file="",this.intent_name="",this.qform_code=0,this.sform_code=0,this.quatern_b=0,this.quatern_c=0,this.quatern_d=0,this.qoffset_x=0,this.qoffset_y=0,this.qoffset_z=0,this.affine=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],this.magic=0,this.isHDR=!1,this.extensionFlag=[0,0,0,0],this.extensionSize=0,this.extensionCode=0},r.NIFTI1.TYPE_NONE=0,r.NIFTI1.TYPE_BINARY=1,r.NIFTI1.TYPE_UINT8=2,r.NIFTI1.TYPE_INT16=4,r.NIFTI1.TYPE_INT32=8,r.NIFTI1.TYPE_FLOAT32=16,r.NIFTI1.TYPE_COMPLEX64=32,r.NIFTI1.TYPE_FLOAT64=64,r.NIFTI1.TYPE_RGB24=128,r.NIFTI1.TYPE_INT8=256,r.NIFTI1.TYPE_UINT16=512,r.NIFTI1.TYPE_UINT32=768,r.NIFTI1.TYPE_INT64=1024,r.NIFTI1.TYPE_UINT64=1280,r.NIFTI1.TYPE_FLOAT128=1536,r.NIFTI1.TYPE_COMPLEX128=1792,r.NIFTI1.TYPE_COMPLEX256=2048,r.NIFTI1.XFORM_UNKNOWN=0,r.NIFTI1.XFORM_SCANNER_ANAT=1,r.NIFTI1.XFORM_ALIGNED_ANAT=2,r.NIFTI1.XFORM_TALAIRACH=3,r.NIFTI1.XFORM_MNI_152=4,r.NIFTI1.SPATIAL_UNITS_MASK=7,r.NIFTI1.TEMPORAL_UNITS_MASK=56,r.NIFTI1.UNITS_UNKNOWN=0,r.NIFTI1.UNITS_METER=1,r.NIFTI1.UNITS_MM=2,r.NIFTI1.UNITS_MICRON=3,r.NIFTI1.UNITS_SEC=8,r.NIFTI1.UNITS_MSEC=16,r.NIFTI1.UNITS_USEC=24,r.NIFTI1.UNITS_HZ=32,r.NIFTI1.UNITS_PPM=40,r.NIFTI1.UNITS_RADS=48,r.NIFTI1.MAGIC_COOKIE=348,r.NIFTI1.STANDARD_HEADER_SIZE=348,r.NIFTI1.MAGIC_NUMBER_LOCATION=344,r.NIFTI1.MAGIC_NUMBER=[110,43,49],r.NIFTI1.MAGIC_NUMBER2=[110,105,49],r.NIFTI1.EXTENSION_HEADER_SIZE=8,r.NIFTI1.prototype.readHeader=function(t){var e,i,s,n,a=new DataView(t),o=r.Utils.getIntAt(a,0,this.littleEndian);if(o!==r.NIFTI1.MAGIC_COOKIE&&(this.littleEndian=!0,o=r.Utils.getIntAt(a,0,this.littleEndian)),o!==r.NIFTI1.MAGIC_COOKIE)throw new Error("This does not appear to be a NIFTI file!");for(this.dim_info=r.Utils.getByteAt(a,39),e=0;e<8;e+=1)n=40+2*e,this.dims[e]=r.Utils.getShortAt(a,n,this.littleEndian);for(this.intent_p1=r.Utils.getFloatAt(a,56,this.littleEndian),this.intent_p2=r.Utils.getFloatAt(a,60,this.littleEndian),this.intent_p3=r.Utils.getFloatAt(a,64,this.littleEndian),this.intent_code=r.Utils.getShortAt(a,68,this.littleEndian),this.datatypeCode=r.Utils.getShortAt(a,70,this.littleEndian),this.numBitsPerVoxel=r.Utils.getShortAt(a,72,this.littleEndian),this.slice_start=r.Utils.getShortAt(a,74,this.littleEndian),e=0;e<8;e+=1)n=76+4*e,this.pixDims[e]=r.Utils.getFloatAt(a,n,this.littleEndian);for(this.vox_offset=r.Utils.getFloatAt(a,108,this.littleEndian),this.scl_slope=r.Utils.getFloatAt(a,112,this.littleEndian),this.scl_inter=r.Utils.getFloatAt(a,116,this.littleEndian),this.slice_end=r.Utils.getShortAt(a,120,this.littleEndian),this.slice_code=r.Utils.getByteAt(a,122),this.xyzt_units=r.Utils.getByteAt(a,123),this.cal_max=r.Utils.getFloatAt(a,124,this.littleEndian),this.cal_min=r.Utils.getFloatAt(a,128,this.littleEndian),this.slice_duration=r.Utils.getFloatAt(a,132,this.littleEndian),this.toffset=r.Utils.getFloatAt(a,136,this.littleEndian),this.description=r.Utils.getStringAt(a,148,228),this.aux_file=r.Utils.getStringAt(a,228,252),this.qform_code=r.Utils.getShortAt(a,252,this.littleEndian),this.sform_code=r.Utils.getShortAt(a,254,this.littleEndian),this.quatern_b=r.Utils.getFloatAt(a,256,this.littleEndian),this.quatern_c=r.Utils.getFloatAt(a,260,this.littleEndian),this.quatern_d=r.Utils.getFloatAt(a,264,this.littleEndian),this.qoffset_x=r.Utils.getFloatAt(a,268,this.littleEndian),this.qoffset_y=r.Utils.getFloatAt(a,272,this.littleEndian),this.qoffset_z=r.Utils.getFloatAt(a,276,this.littleEndian),i=0;i<3;i+=1)for(s=0;s<4;s+=1)n=280+4*(4*i+s),this.affine[i][s]=r.Utils.getFloatAt(a,n,this.littleEndian);this.affine[3][0]=0,this.affine[3][1]=0,this.affine[3][2]=0,this.affine[3][3]=1,this.intent_name=r.Utils.getStringAt(a,328,344),this.magic=r.Utils.getStringAt(a,344,348),this.isHDR=this.magic===r.NIFTI1.MAGIC_NUMBER2,a.byteLength>r.NIFTI1.MAGIC_COOKIE&&(this.extensionFlag[0]=r.Utils.getByteAt(a,348),this.extensionFlag[1]=r.Utils.getByteAt(a,349),this.extensionFlag[2]=r.Utils.getByteAt(a,350),this.extensionFlag[3]=r.Utils.getByteAt(a,351),this.extensionFlag[0]&&(this.extensionSize=this.getExtensionSize(a),this.extensionCode=this.getExtensionCode(a)))},r.NIFTI1.prototype.toFormattedString=function(){var t=r.Utils.formatNumber,e="";return e+="Dim Info = "+this.dim_info+"\n",e+="Image Dimensions (1-8): "+this.dims[0]+", "+this.dims[1]+", "+this.dims[2]+", "+this.dims[3]+", "+this.dims[4]+", "+this.dims[5]+", "+this.dims[6]+", "+this.dims[7]+"\n",e+="Intent Parameters (1-3): "+this.intent_p1+", "+this.intent_p2+", "+this.intent_p3+"\n",e+="Intent Code = "+this.intent_code+"\n",e+="Datatype = "+this.datatypeCode+" ("+this.getDatatypeCodeString(this.datatypeCode)+")\n",e+="Bits Per Voxel = "+this.numBitsPerVoxel+"\n",e+="Slice Start = "+this.slice_start+"\n",e+="Voxel Dimensions (1-8): "+t(this.pixDims[0])+", "+t(this.pixDims[1])+", "+t(this.pixDims[2])+", "+t(this.pixDims[3])+", "+t(this.pixDims[4])+", "+t(this.pixDims[5])+", "+t(this.pixDims[6])+", "+t(this.pixDims[7])+"\n",e+="Image Offset = "+this.vox_offset+"\n",e+="Data Scale:  Slope = "+t(this.scl_slope)+"  Intercept = "+t(this.scl_inter)+"\n",e+="Slice End = "+this.slice_end+"\n",e+="Slice Code = "+this.slice_code+"\n",e+="Units Code = "+this.xyzt_units+" ("+this.getUnitsCodeString(r.NIFTI1.SPATIAL_UNITS_MASK&this.xyzt_units)+", "+this.getUnitsCodeString(r.NIFTI1.TEMPORAL_UNITS_MASK&this.xyzt_units)+")\n",e+="Display Range:  Max = "+t(this.cal_max)+"  Min = "+t(this.cal_min)+"\n",e+="Slice Duration = "+this.slice_duration+"\n",e+="Time Axis Shift = "+this.toffset+"\n",e+='Description: "'+this.description+'"\n',e+='Auxiliary File: "'+this.aux_file+'"\n',e+="Q-Form Code = "+this.qform_code+" ("+this.getTransformCodeString(this.qform_code)+")\n",e+="S-Form Code = "+this.sform_code+" ("+this.getTransformCodeString(this.sform_code)+")\n",e+="Quaternion Parameters:  b = "+t(this.quatern_b)+"  c = "+t(this.quatern_c)+"  d = "+t(this.quatern_d)+"\n",e+="Quaternion Offsets:  x = "+this.qoffset_x+"  y = "+this.qoffset_y+"  z = "+this.qoffset_z+"\n",e+="S-Form Parameters X: "+t(this.affine[0][0])+", "+t(this.affine[0][1])+", "+t(this.affine[0][2])+", "+t(this.affine[0][3])+"\n",e+="S-Form Parameters Y: "+t(this.affine[1][0])+", "+t(this.affine[1][1])+", "+t(this.affine[1][2])+", "+t(this.affine[1][3])+"\n",e+="S-Form Parameters Z: "+t(this.affine[2][0])+", "+t(this.affine[2][1])+", "+t(this.affine[2][2])+", "+t(this.affine[2][3])+"\n",e+='Intent Name: "'+this.intent_name+'"\n',this.extensionFlag[0]&&(e+="Extension: Size = "+this.extensionSize+"  Code = "+this.extensionCode+"\n"),e},r.NIFTI1.prototype.getDatatypeCodeString=function(t){return t===r.NIFTI1.TYPE_UINT8?"1-Byte Unsigned Integer":t===r.NIFTI1.TYPE_INT16?"2-Byte Signed Integer":t===r.NIFTI1.TYPE_INT32?"4-Byte Signed Integer":t===r.NIFTI1.TYPE_FLOAT32?"4-Byte Float":t===r.NIFTI1.TYPE_FLOAT64?"8-Byte Float":t===r.NIFTI1.TYPE_RGB24?"RGB":t===r.NIFTI1.TYPE_INT8?"1-Byte Signed Integer":t===r.NIFTI1.TYPE_UINT16?"2-Byte Unsigned Integer":t===r.NIFTI1.TYPE_UINT32?"4-Byte Unsigned Integer":t===r.NIFTI1.TYPE_INT64?"8-Byte Signed Integer":t===r.NIFTI1.TYPE_UINT64?"8-Byte Unsigned Integer":"Unknown"},r.NIFTI1.prototype.getTransformCodeString=function(t){return t===r.NIFTI1.XFORM_SCANNER_ANAT?"Scanner":t===r.NIFTI1.XFORM_ALIGNED_ANAT?"Aligned":t===r.NIFTI1.XFORM_TALAIRACH?"Talairach":t===r.NIFTI1.XFORM_MNI_152?"MNI":"Unknown"},r.NIFTI1.prototype.getUnitsCodeString=function(t){return t===r.NIFTI1.UNITS_METER?"Meters":t===r.NIFTI1.UNITS_MM?"Millimeters":t===r.NIFTI1.UNITS_MICRON?"Microns":t===r.NIFTI1.UNITS_SEC?"Seconds":t===r.NIFTI1.UNITS_MSEC?"Milliseconds":t===r.NIFTI1.UNITS_USEC?"Microseconds":t===r.NIFTI1.UNITS_HZ?"Hz":t===r.NIFTI1.UNITS_PPM?"PPM":t===r.NIFTI1.UNITS_RADS?"Rads":"Unknown"},r.NIFTI1.prototype.getQformMat=function(){return this.convertNiftiQFormToNiftiSForm(this.quatern_b,this.quatern_c,this.quatern_d,this.qoffset_x,this.qoffset_y,this.qoffset_z,this.pixDims[1],this.pixDims[2],this.pixDims[3],this.pixDims[0])},r.NIFTI1.prototype.convertNiftiQFormToNiftiSForm=function(t,e,i,r,s,n,a,o,h,l){var u,c,d,f,p=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],m=t,g=e,y=i;return p[3][0]=p[3][1]=p[3][2]=0,p[3][3]=1,(u=1-(m*m+g*g+y*y))<1e-7?(m*=u=1/Math.sqrt(m*m+g*g+y*y),g*=u,y*=u,u=0):u=Math.sqrt(u),c=a>0?a:1,d=o>0?o:1,f=h>0?h:1,l<0&&(f=-f),p[0][0]=(u*u+m*m-g*g-y*y)*c,p[0][1]=2*(m*g-u*y)*d,p[0][2]=2*(m*y+u*g)*f,p[1][0]=2*(m*g+u*y)*c,p[1][1]=(u*u+g*g-m*m-y*y)*d,p[1][2]=2*(g*y-u*m)*f,p[2][0]=2*(m*y-u*g)*c,p[2][1]=2*(g*y+u*m)*d,p[2][2]=(u*u+y*y-g*g-m*m)*f,p[0][3]=r,p[1][3]=s,p[2][3]=n,p},r.NIFTI1.prototype.convertNiftiSFormToNEMA=function(t){var e,i,r,s,n,a,o,h,l,u,c,d,f,p,m,g,y,_,b,x,w,T,I,v,A,E,N,S,M,k,F,C,z;if(p=0,E=[[0,0,0],[0,0,0],[0,0,0]],N=[[0,0,0],[0,0,0],[0,0,0]],e=t[0][0],i=t[0][1],r=t[0][2],s=t[1][0],n=t[1][1],a=t[1][2],o=t[2][0],h=t[2][1],l=t[2][2],0===(u=Math.sqrt(e*e+s*s+o*o)))return null;if(e/=u,s/=u,o/=u,0===(u=Math.sqrt(i*i+n*n+h*h)))return null;if(u=e*(i/=u)+s*(n/=u)+o*(h/=u),Math.abs(u)>1e-4){if(i-=u*e,n-=u*s,h-=u*o,0===(u=Math.sqrt(i*i+n*n+h*h)))return null;i/=u,n/=u,h/=u}if(0===(u=Math.sqrt(r*r+a*a+l*l))?(r=s*h-o*n,a=o*i-h*e,l=e*n-s*i):(r/=u,a/=u,l/=u),u=e*r+s*a+o*l,Math.abs(u)>1e-4){if(r-=u*e,a-=u*s,l-=u*o,0===(u=Math.sqrt(r*r+a*a+l*l)))return null;r/=u,a/=u,l/=u}if(u=i*r+n*a+h*l,Math.abs(u)>1e-4){if(r-=u*i,a-=u*n,l-=u*h,0===(u=Math.sqrt(r*r+a*a+l*l)))return null;r/=u,a/=u,l/=u}if(E[0][0]=e,E[0][1]=i,E[0][2]=r,E[1][0]=s,E[1][1]=n,E[1][2]=a,E[2][0]=o,E[2][1]=h,E[2][2]=l,0===(c=this.nifti_mat33_determ(E)))return null;for(A=-666,_=w=T=I=1,b=2,x=3,d=1;d<=3;d+=1)for(f=1;f<=3;f+=1)if(d!==f)for(p=1;p<=3;p+=1)if(d!==p&&f!==p)for(N[0][0]=N[0][1]=N[0][2]=N[1][0]=N[1][1]=N[1][2]=N[2][0]=N[2][1]=N[2][2]=0,m=-1;m<=1;m+=2)for(g=-1;g<=1;g+=2)for(y=-1;y<=1;y+=2)N[0][d-1]=m,N[1][f-1]=g,N[2][p-1]=y,this.nifti_mat33_determ(N)*c>0&&(u=(v=this.nifti_mat33_mul(N,E))[0][0]+v[1][1]+v[2][2])>A&&(A=u,_=d,b=f,x=p,w=m,T=g,I=y);switch(S=M=k=F=C=z=0,_*w){case 1:S="X",F="+";break;case-1:S="X",F="-";break;case 2:S="Y",F="+";break;case-2:S="Y",F="-";break;case 3:S="Z",F="+";break;case-3:S="Z",F="-"}switch(b*T){case 1:M="X",C="+";break;case-1:M="X",C="-";break;case 2:M="Y",C="+";break;case-2:M="Y",C="-";break;case 3:M="Z",C="+";break;case-3:M="Z",C="-"}switch(x*I){case 1:k="X",z="+";break;case-1:k="X",z="-";break;case 2:k="Y",z="+";break;case-2:k="Y",z="-";break;case 3:k="Z",z="+";break;case-3:k="Z",z="-"}return S+M+k+F+C+z},r.NIFTI1.prototype.nifti_mat33_mul=function(t,e){var i,r,s=[[0,0,0],[0,0,0],[0,0,0]];for(i=0;i<3;i+=1)for(r=0;r<3;r+=1)s[i][r]=t[i][0]*e[0][r]+t[i][1]*e[1][r]+t[i][2]*e[2][r];return s},r.NIFTI1.prototype.nifti_mat33_determ=function(t){var e,i,r,s,n,a,o,h,l;return e=t[0][0],i=t[0][1],r=t[0][2],s=t[1][0],n=t[1][1],a=t[1][2],o=t[2][0],h=t[2][1],e*n*(l=t[2][2])-e*h*a-s*i*l+s*h*r+o*i*a-o*n*r},r.NIFTI1.prototype.getExtensionLocation=function(){return r.NIFTI1.MAGIC_COOKIE+4},r.NIFTI1.prototype.getExtensionSize=function(t){return r.Utils.getIntAt(t,this.getExtensionLocation(),this.littleEndian)},r.NIFTI1.prototype.getExtensionCode=function(t){return r.Utils.getIntAt(t,this.getExtensionLocation()+4,this.littleEndian)};t.exports&&(t.exports=r.NIFTI1)},2158:(t,e,i)=>{"use strict";var r=r||{};r.Utils=r.Utils||i(6744),r.NIFTI1=r.NIFTI1||i(3483),r.NIFTI2=r.NIFTI2||function(){this.littleEndian=!1,this.dim_info=0,this.dims=[],this.intent_p1=0,this.intent_p2=0,this.intent_p3=0,this.intent_code=0,this.datatypeCode=0,this.numBitsPerVoxel=0,this.slice_start=0,this.slice_end=0,this.slice_code=0,this.pixDims=[],this.vox_offset=0,this.scl_slope=1,this.scl_inter=0,this.xyzt_units=0,this.cal_max=0,this.cal_min=0,this.slice_duration=0,this.toffset=0,this.description="",this.aux_file="",this.intent_name="",this.qform_code=0,this.sform_code=0,this.quatern_b=0,this.quatern_c=0,this.quatern_d=0,this.qoffset_x=0,this.qoffset_y=0,this.qoffset_z=0,this.affine=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],this.magic=0,this.extensionFlag=[0,0,0,0]},r.NIFTI2.MAGIC_COOKIE=540,r.NIFTI2.MAGIC_NUMBER_LOCATION=4,r.NIFTI2.MAGIC_NUMBER=[110,43,50,0,13,10,26,10],r.NIFTI2.prototype.readHeader=function(t){var e,i,s,n,a=new DataView(t),o=r.Utils.getIntAt(a,0,this.littleEndian);if(o!==r.NIFTI2.MAGIC_COOKIE&&(this.littleEndian=!0,o=r.Utils.getIntAt(a,0,this.littleEndian)),o!==r.NIFTI2.MAGIC_COOKIE)throw new Error("This does not appear to be a NIFTI file!");for(this.datatypeCode=r.Utils.getShortAt(a,12,this.littleEndian),this.numBitsPerVoxel=r.Utils.getShortAt(a,14,this.littleEndian),e=0;e<8;e+=1)n=16+8*e,this.dims[e]=r.Utils.getLongAt(a,n,this.littleEndian);for(this.intent_p1=r.Utils.getDoubleAt(a,80,this.littleEndian),this.intent_p2=r.Utils.getDoubleAt(a,88,this.littleEndian),this.intent_p3=r.Utils.getDoubleAt(a,96,this.littleEndian),e=0;e<8;e+=1)n=104+8*e,this.pixDims[e]=r.Utils.getDoubleAt(a,n,this.littleEndian);for(this.vox_offset=r.Utils.getLongAt(a,168,this.littleEndian),this.scl_slope=r.Utils.getDoubleAt(a,176,this.littleEndian),this.scl_inter=r.Utils.getDoubleAt(a,184,this.littleEndian),this.cal_max=r.Utils.getDoubleAt(a,192,this.littleEndian),this.cal_min=r.Utils.getDoubleAt(a,200,this.littleEndian),this.slice_duration=r.Utils.getDoubleAt(a,208,this.littleEndian),this.toffset=r.Utils.getDoubleAt(a,216,this.littleEndian),this.slice_start=r.Utils.getLongAt(a,224,this.littleEndian),this.slice_end=r.Utils.getLongAt(a,232,this.littleEndian),this.description=r.Utils.getStringAt(a,240,320),this.aux_file=r.Utils.getStringAt(a,320,344),this.qform_code=r.Utils.getIntAt(a,344,this.littleEndian),this.sform_code=r.Utils.getIntAt(a,348,this.littleEndian),this.quatern_b=r.Utils.getDoubleAt(a,352,this.littleEndian),this.quatern_c=r.Utils.getDoubleAt(a,360,this.littleEndian),this.quatern_d=r.Utils.getDoubleAt(a,368,this.littleEndian),this.qoffset_x=r.Utils.getDoubleAt(a,376,this.littleEndian),this.qoffset_y=r.Utils.getDoubleAt(a,384,this.littleEndian),this.qoffset_z=r.Utils.getDoubleAt(a,392,this.littleEndian),i=0;i<3;i+=1)for(s=0;s<4;s+=1)n=400+8*(4*i+s),this.affine[i][s]=r.Utils.getDoubleAt(a,n,this.littleEndian);this.affine[3][0]=0,this.affine[3][1]=0,this.affine[3][2]=0,this.affine[3][3]=1,this.slice_code=r.Utils.getIntAt(a,496,this.littleEndian),this.xyzt_units=r.Utils.getIntAt(a,500,this.littleEndian),this.intent_code=r.Utils.getIntAt(a,504,this.littleEndian),this.intent_name=r.Utils.getStringAt(a,508,524),this.dim_info=r.Utils.getByteAt(a,524),a.byteLength>r.NIFTI2.MAGIC_COOKIE&&(this.extensionFlag[0]=r.Utils.getByteAt(a,540),this.extensionFlag[1]=r.Utils.getByteAt(a,541),this.extensionFlag[2]=r.Utils.getByteAt(a,542),this.extensionFlag[3]=r.Utils.getByteAt(a,543),this.extensionFlag[0]&&(this.extensionSize=this.getExtensionSize(a),this.extensionCode=this.getExtensionCode(a)))},r.NIFTI2.prototype.toFormattedString=function(){var t=r.Utils.formatNumber,e="";return e+="Datatype = "+ +this.datatypeCode+" ("+this.getDatatypeCodeString(this.datatypeCode)+")\n",e+="Bits Per Voxel =  = "+this.numBitsPerVoxel+"\n",e+="Image Dimensions (1-8): "+this.dims[0]+", "+this.dims[1]+", "+this.dims[2]+", "+this.dims[3]+", "+this.dims[4]+", "+this.dims[5]+", "+this.dims[6]+", "+this.dims[7]+"\n",e+="Intent Parameters (1-3): "+this.intent_p1+", "+this.intent_p2+", "+this.intent_p3+"\n",e+="Voxel Dimensions (1-8): "+t(this.pixDims[0])+", "+t(this.pixDims[1])+", "+t(this.pixDims[2])+", "+t(this.pixDims[3])+", "+t(this.pixDims[4])+", "+t(this.pixDims[5])+", "+t(this.pixDims[6])+", "+t(this.pixDims[7])+"\n",e+="Image Offset = "+this.vox_offset+"\n",e+="Data Scale:  Slope = "+t(this.scl_slope)+"  Intercept = "+t(this.scl_inter)+"\n",e+="Display Range:  Max = "+t(this.cal_max)+"  Min = "+t(this.cal_min)+"\n",e+="Slice Duration = "+this.slice_duration+"\n",e+="Time Axis Shift = "+this.toffset+"\n",e+="Slice Start = "+this.slice_start+"\n",e+="Slice End = "+this.slice_end+"\n",e+='Description: "'+this.description+'"\n',e+='Auxiliary File: "'+this.aux_file+'"\n',e+="Q-Form Code = "+this.qform_code+" ("+this.getTransformCodeString(this.qform_code)+")\n",e+="S-Form Code = "+this.sform_code+" ("+this.getTransformCodeString(this.sform_code)+")\n",e+="Quaternion Parameters:  b = "+t(this.quatern_b)+"  c = "+t(this.quatern_c)+"  d = "+t(this.quatern_d)+"\n",e+="Quaternion Offsets:  x = "+this.qoffset_x+"  y = "+this.qoffset_y+"  z = "+this.qoffset_z+"\n",e+="S-Form Parameters X: "+t(this.affine[0][0])+", "+t(this.affine[0][1])+", "+t(this.affine[0][2])+", "+t(this.affine[0][3])+"\n",e+="S-Form Parameters Y: "+t(this.affine[1][0])+", "+t(this.affine[1][1])+", "+t(this.affine[1][2])+", "+t(this.affine[1][3])+"\n",e+="S-Form Parameters Z: "+t(this.affine[2][0])+", "+t(this.affine[2][1])+", "+t(this.affine[2][2])+", "+t(this.affine[2][3])+"\n",e+="Slice Code = "+this.slice_code+"\n",e+="Units Code = "+this.xyzt_units+" ("+this.getUnitsCodeString(r.NIFTI1.SPATIAL_UNITS_MASK&this.xyzt_units)+", "+this.getUnitsCodeString(r.NIFTI1.TEMPORAL_UNITS_MASK&this.xyzt_units)+")\n",e+="Intent Code = "+this.intent_code+"\n",e+='Intent Name: "'+this.intent_name+'"\n',e+="Dim Info = "+this.dim_info+"\n"},r.NIFTI2.prototype.getExtensionLocation=function(){return r.NIFTI2.MAGIC_COOKIE+4},r.NIFTI2.prototype.getExtensionSize=r.NIFTI1.prototype.getExtensionSize,r.NIFTI2.prototype.getExtensionCode=r.NIFTI1.prototype.getExtensionCode,r.NIFTI2.prototype.getDatatypeCodeString=r.NIFTI1.prototype.getDatatypeCodeString,r.NIFTI2.prototype.getTransformCodeString=r.NIFTI1.prototype.getTransformCodeString,r.NIFTI2.prototype.getUnitsCodeString=r.NIFTI1.prototype.getUnitsCodeString,r.NIFTI2.prototype.getQformMat=r.NIFTI1.prototype.getQformMat,r.NIFTI2.prototype.convertNiftiQFormToNiftiSForm=r.NIFTI1.prototype.convertNiftiQFormToNiftiSForm,r.NIFTI2.prototype.convertNiftiSFormToNEMA=r.NIFTI1.prototype.convertNiftiSFormToNEMA,r.NIFTI2.prototype.nifti_mat33_mul=r.NIFTI1.prototype.nifti_mat33_mul,r.NIFTI2.prototype.nifti_mat33_determ=r.NIFTI1.prototype.nifti_mat33_determ;t.exports&&(t.exports=r.NIFTI2)},6744:t=>{"use strict";var e=e||{};e.Utils=e.Utils||{},e.Utils.crcTable=null,e.Utils.GUNZIP_MAGIC_COOKIE1=31,e.Utils.GUNZIP_MAGIC_COOKIE2=139,e.Utils.getStringAt=function(t,e,i){var r,s,n="";for(r=e;r<i;r+=1)0!==(s=t.getUint8(r))&&(n+=String.fromCharCode(s));return n},e.Utils.getByteAt=function(t,e){return t.getInt8(e)},e.Utils.getShortAt=function(t,e,i){return t.getInt16(e,i)},e.Utils.getIntAt=function(t,e,i){return t.getInt32(e,i)},e.Utils.getFloatAt=function(t,e,i){return t.getFloat32(e,i)},e.Utils.getDoubleAt=function(t,e,i){return t.getFloat64(e,i)},e.Utils.getLongAt=function(t,i,r){var s,n=[],a=0;for(s=0;s<8;s+=1)n[s]=e.Utils.getByteAt(t,i+s,r);for(s=n.length-1;s>=0;s--)a=256*a+n[s];return a},e.Utils.toArrayBuffer=function(t){var e,i,r;for(e=new ArrayBuffer(t.length),i=new Uint8Array(e),r=0;r<t.length;r+=1)i[r]=t[r];return e},e.Utils.isString=function(t){return"string"==typeof t||t instanceof String},e.Utils.formatNumber=function(t,i){var r=0;return r=e.Utils.isString(t)?Number(t):t,r=i?r.toPrecision(5):r.toPrecision(7),parseFloat(r)},e.Utils.makeCRCTable=function(){for(var t,e=[],i=0;i<256;i++){t=i;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[i]=t}return e},e.Utils.crc32=function(t){for(var i=e.Utils.crcTable||(e.Utils.crcTable=e.Utils.makeCRCTable()),r=~0,s=0;s<t.byteLength;s++)r=r>>>8^i[255&(r^t.getUint8(s))];return~r>>>0};t.exports&&(t.exports=e.Utils)},1668:(t,e,i)=>{"use strict";const{Deflate:r,deflate:s,deflateRaw:n,gzip:a}=i(3303),{Inflate:o,inflate:h,inflateRaw:l,ungzip:u}=i(7083),c=i(9681);t.exports.Deflate=r,t.exports.deflate=s,t.exports.deflateRaw=n,t.exports.gzip=a,t.exports.Inflate=o,t.exports.inflate=h,t.exports.inflateRaw=l,t.exports.ungzip=u,t.exports.constants=c},3303:(t,e,i)=>{"use strict";const r=i(8411),s=i(9805),n=i(1996),a=i(4674),o=i(4442),h=Object.prototype.toString,{Z_NO_FLUSH:l,Z_SYNC_FLUSH:u,Z_FULL_FLUSH:c,Z_FINISH:d,Z_OK:f,Z_STREAM_END:p,Z_DEFAULT_COMPRESSION:m,Z_DEFAULT_STRATEGY:g,Z_DEFLATED:y}=i(9681);function _(t){this.options=s.assign({level:m,method:y,chunkSize:16384,windowBits:15,memLevel:8,strategy:g},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;let i=r.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(i!==f)throw new Error(a[i]);if(e.header&&r.deflateSetHeader(this.strm,e.header),e.dictionary){let t;if(t="string"==typeof e.dictionary?n.string2buf(e.dictionary):"[object ArrayBuffer]"===h.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,i=r.deflateSetDictionary(this.strm,t),i!==f)throw new Error(a[i]);this._dict_set=!0}}function b(t,e){const i=new _(e);if(i.push(t,!0),i.err)throw i.msg||a[i.err];return i.result}_.prototype.push=function(t,e){const i=this.strm,s=this.options.chunkSize;let a,o;if(this.ended)return!1;for(o=e===~~e?e:!0===e?d:l,"string"==typeof t?i.input=n.string2buf(t):"[object ArrayBuffer]"===h.call(t)?i.input=new Uint8Array(t):i.input=t,i.next_in=0,i.avail_in=i.input.length;;)if(0===i.avail_out&&(i.output=new Uint8Array(s),i.next_out=0,i.avail_out=s),(o===u||o===c)&&i.avail_out<=6)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else{if(a=r.deflate(i,o),a===p)return i.next_out>0&&this.onData(i.output.subarray(0,i.next_out)),a=r.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===f;if(0!==i.avail_out){if(o>0&&i.next_out>0)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else if(0===i.avail_in)break}else this.onData(i.output)}return!0},_.prototype.onData=function(t){this.chunks.push(t)},_.prototype.onEnd=function(t){t===f&&(this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},t.exports.Deflate=_,t.exports.deflate=b,t.exports.deflateRaw=function(t,e){return(e=e||{}).raw=!0,b(t,e)},t.exports.gzip=function(t,e){return(e=e||{}).gzip=!0,b(t,e)},t.exports.constants=i(9681)},7083:(t,e,i)=>{"use strict";const r=i(1447),s=i(9805),n=i(1996),a=i(4674),o=i(4442),h=i(7414),l=Object.prototype.toString,{Z_NO_FLUSH:u,Z_FINISH:c,Z_OK:d,Z_STREAM_END:f,Z_NEED_DICT:p,Z_STREAM_ERROR:m,Z_DATA_ERROR:g,Z_MEM_ERROR:y}=i(9681);function _(t){this.options=s.assign({chunkSize:65536,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(15&e.windowBits||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;let i=r.inflateInit2(this.strm,e.windowBits);if(i!==d)throw new Error(a[i]);if(this.header=new h,r.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=n.string2buf(e.dictionary):"[object ArrayBuffer]"===l.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(i=r.inflateSetDictionary(this.strm,e.dictionary),i!==d)))throw new Error(a[i])}function b(t,e){const i=new _(e);if(i.push(t),i.err)throw i.msg||a[i.err];return i.result}_.prototype.push=function(t,e){const i=this.strm,s=this.options.chunkSize,a=this.options.dictionary;let o,h,_;if(this.ended)return!1;for(h=e===~~e?e:!0===e?c:u,"[object ArrayBuffer]"===l.call(t)?i.input=new Uint8Array(t):i.input=t,i.next_in=0,i.avail_in=i.input.length;;){for(0===i.avail_out&&(i.output=new Uint8Array(s),i.next_out=0,i.avail_out=s),o=r.inflate(i,h),o===p&&a&&(o=r.inflateSetDictionary(i,a),o===d?o=r.inflate(i,h):o===g&&(o=p));i.avail_in>0&&o===f&&i.state.wrap>0&&0!==t[i.next_in];)r.inflateReset(i),o=r.inflate(i,h);switch(o){case m:case g:case p:case y:return this.onEnd(o),this.ended=!0,!1}if(_=i.avail_out,i.next_out&&(0===i.avail_out||o===f))if("string"===this.options.to){let t=n.utf8border(i.output,i.next_out),e=i.next_out-t,r=n.buf2string(i.output,t);i.next_out=e,i.avail_out=s-e,e&&i.output.set(i.output.subarray(t,t+e),0),this.onData(r)}else this.onData(i.output.length===i.next_out?i.output:i.output.subarray(0,i.next_out));if(o!==d||0!==_){if(o===f)return o=r.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(0===i.avail_in)break}}return!0},_.prototype.onData=function(t){this.chunks.push(t)},_.prototype.onEnd=function(t){t===d&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},t.exports.Inflate=_,t.exports.inflate=b,t.exports.inflateRaw=function(t,e){return(e=e||{}).raw=!0,b(t,e)},t.exports.ungzip=b,t.exports.constants=i(9681)},9805:t=>{"use strict";const e=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);t.exports.assign=function(t){const i=Array.prototype.slice.call(arguments,1);for(;i.length;){const r=i.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(const i in r)e(r,i)&&(t[i]=r[i])}}return t},t.exports.flattenChunks=t=>{let e=0;for(let i=0,r=t.length;i<r;i++)e+=t[i].length;const i=new Uint8Array(e);for(let e=0,r=0,s=t.length;e<s;e++){let s=t[e];i.set(s,r),r+=s.length}return i}},1996:t=>{"use strict";let e=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){e=!1}const i=new Uint8Array(256);for(let t=0;t<256;t++)i[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;i[254]=i[254]=1,t.exports.string2buf=t=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);let e,i,r,s,n,a=t.length,o=0;for(s=0;s<a;s++)i=t.charCodeAt(s),55296==(64512&i)&&s+1<a&&(r=t.charCodeAt(s+1),56320==(64512&r)&&(i=65536+(i-55296<<10)+(r-56320),s++)),o+=i<128?1:i<2048?2:i<65536?3:4;for(e=new Uint8Array(o),n=0,s=0;n<o;s++)i=t.charCodeAt(s),55296==(64512&i)&&s+1<a&&(r=t.charCodeAt(s+1),56320==(64512&r)&&(i=65536+(i-55296<<10)+(r-56320),s++)),i<128?e[n++]=i:i<2048?(e[n++]=192|i>>>6,e[n++]=128|63&i):i<65536?(e[n++]=224|i>>>12,e[n++]=128|i>>>6&63,e[n++]=128|63&i):(e[n++]=240|i>>>18,e[n++]=128|i>>>12&63,e[n++]=128|i>>>6&63,e[n++]=128|63&i);return e};t.exports.buf2string=(t,r)=>{const s=r||t.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(t.subarray(0,r));let n,a;const o=new Array(2*s);for(a=0,n=0;n<s;){let e=t[n++];if(e<128){o[a++]=e;continue}let r=i[e];if(r>4)o[a++]=65533,n+=r-1;else{for(e&=2===r?31:3===r?15:7;r>1&&n<s;)e=e<<6|63&t[n++],r--;r>1?o[a++]=65533:e<65536?o[a++]=e:(e-=65536,o[a++]=55296|e>>10&1023,o[a++]=56320|1023&e)}}return((t,i)=>{if(i<65534&&t.subarray&&e)return String.fromCharCode.apply(null,t.length===i?t:t.subarray(0,i));let r="";for(let e=0;e<i;e++)r+=String.fromCharCode(t[e]);return r})(o,a)},t.exports.utf8border=(t,e)=>{(e=e||t.length)>t.length&&(e=t.length);let r=e-1;for(;r>=0&&128==(192&t[r]);)r--;return r<0||0===r?e:r+i[t[r]]>e?r:e}},3269:t=>{"use strict";t.exports=(t,e,i,r)=>{let s=65535&t,n=t>>>16&65535,a=0;for(;0!==i;){a=i>2e3?2e3:i,i-=a;do{s=s+e[r++]|0,n=n+s|0}while(--a);s%=65521,n%=65521}return s|n<<16}},9681:t=>{"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},4823:t=>{"use strict";const e=new Uint32Array((()=>{let t,e=[];for(var i=0;i<256;i++){t=i;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[i]=t}return e})());t.exports=(t,i,r,s)=>{const n=e,a=s+r;t^=-1;for(let e=s;e<a;e++)t=t>>>8^n[255&(t^i[e])];return~t}},8411:(t,e,i)=>{"use strict";const{_tr_init:r,_tr_stored_block:s,_tr_flush_block:n,_tr_tally:a,_tr_align:o}=i(3665),h=i(3269),l=i(4823),u=i(4674),{Z_NO_FLUSH:c,Z_PARTIAL_FLUSH:d,Z_FULL_FLUSH:f,Z_FINISH:p,Z_BLOCK:m,Z_OK:g,Z_STREAM_END:y,Z_STREAM_ERROR:_,Z_DATA_ERROR:b,Z_BUF_ERROR:x,Z_DEFAULT_COMPRESSION:w,Z_FILTERED:T,Z_HUFFMAN_ONLY:I,Z_RLE:v,Z_FIXED:A,Z_DEFAULT_STRATEGY:E,Z_UNKNOWN:N,Z_DEFLATED:S}=i(9681),M=258,k=262,F=42,C=113,z=666,U=(t,e)=>(t.msg=u[e],e),D=t=>2*t-(t>4?9:0),B=t=>{let e=t.length;for(;--e>=0;)t[e]=0},O=t=>{let e,i,r,s=t.w_size;e=t.hash_size,r=e;do{i=t.head[--r],t.head[r]=i>=s?i-s:0}while(--e);e=s,r=e;do{i=t.prev[--r],t.prev[r]=i>=s?i-s:0}while(--e)};let R=(t,e,i)=>(e<<t.hash_shift^i)&t.hash_mask;const L=t=>{const e=t.state;let i=e.pending;i>t.avail_out&&(i=t.avail_out),0!==i&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+i),t.next_out),t.next_out+=i,e.pending_out+=i,t.total_out+=i,t.avail_out-=i,e.pending-=i,0===e.pending&&(e.pending_out=0))},P=(t,e)=>{n(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,L(t.strm)},V=(t,e)=>{t.pending_buf[t.pending++]=e},G=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},q=(t,e,i,r)=>{let s=t.avail_in;return s>r&&(s=r),0===s?0:(t.avail_in-=s,e.set(t.input.subarray(t.next_in,t.next_in+s),i),1===t.state.wrap?t.adler=h(t.adler,e,s,i):2===t.state.wrap&&(t.adler=l(t.adler,e,s,i)),t.next_in+=s,t.total_in+=s,s)},Y=(t,e)=>{let i,r,s=t.max_chain_length,n=t.strstart,a=t.prev_length,o=t.nice_match;const h=t.strstart>t.w_size-k?t.strstart-(t.w_size-k):0,l=t.window,u=t.w_mask,c=t.prev,d=t.strstart+M;let f=l[n+a-1],p=l[n+a];t.prev_length>=t.good_match&&(s>>=2),o>t.lookahead&&(o=t.lookahead);do{if(i=e,l[i+a]===p&&l[i+a-1]===f&&l[i]===l[n]&&l[++i]===l[n+1]){n+=2,i++;do{}while(l[++n]===l[++i]&&l[++n]===l[++i]&&l[++n]===l[++i]&&l[++n]===l[++i]&&l[++n]===l[++i]&&l[++n]===l[++i]&&l[++n]===l[++i]&&l[++n]===l[++i]&&n<d);if(r=M-(d-n),n=d-M,r>a){if(t.match_start=e,a=r,r>=o)break;f=l[n+a-1],p=l[n+a]}}}while((e=c[e&u])>h&&0!=--s);return a<=t.lookahead?a:t.lookahead},j=t=>{const e=t.w_size;let i,r,s;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-k)&&(t.window.set(t.window.subarray(e,e+e-r),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,t.insert>t.strstart&&(t.insert=t.strstart),O(t),r+=e),0===t.strm.avail_in)break;if(i=q(t.strm,t.window,t.strstart+t.lookahead,r),t.lookahead+=i,t.lookahead+t.insert>=3)for(s=t.strstart-t.insert,t.ins_h=t.window[s],t.ins_h=R(t,t.ins_h,t.window[s+1]);t.insert&&(t.ins_h=R(t,t.ins_h,t.window[s+3-1]),t.prev[s&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=s,s++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<k&&0!==t.strm.avail_in)},Z=(t,e)=>{let i,r,n,a=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,o=0,h=t.strm.avail_in;do{if(i=65535,n=t.bi_valid+42>>3,t.strm.avail_out<n)break;if(n=t.strm.avail_out-n,r=t.strstart-t.block_start,i>r+t.strm.avail_in&&(i=r+t.strm.avail_in),i>n&&(i=n),i<a&&(0===i&&e!==p||e===c||i!==r+t.strm.avail_in))break;o=e===p&&i===r+t.strm.avail_in?1:0,s(t,0,0,o),t.pending_buf[t.pending-4]=i,t.pending_buf[t.pending-3]=i>>8,t.pending_buf[t.pending-2]=~i,t.pending_buf[t.pending-1]=~i>>8,L(t.strm),r&&(r>i&&(r=i),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+r),t.strm.next_out),t.strm.next_out+=r,t.strm.avail_out-=r,t.strm.total_out+=r,t.block_start+=r,i-=r),i&&(q(t.strm,t.strm.output,t.strm.next_out,i),t.strm.next_out+=i,t.strm.avail_out-=i,t.strm.total_out+=i)}while(0===o);return h-=t.strm.avail_in,h&&(h>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=h&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-h,t.strm.next_in),t.strstart),t.strstart+=h,t.insert+=h>t.w_size-t.insert?t.w_size-t.insert:h),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),o?4:e!==c&&e!==p&&0===t.strm.avail_in&&t.strstart===t.block_start?2:(n=t.window_size-t.strstart,t.strm.avail_in>n&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,n+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),n>t.strm.avail_in&&(n=t.strm.avail_in),n&&(q(t.strm,t.window,t.strstart,n),t.strstart+=n,t.insert+=n>t.w_size-t.insert?t.w_size-t.insert:n),t.high_water<t.strstart&&(t.high_water=t.strstart),n=t.bi_valid+42>>3,n=t.pending_buf_size-n>65535?65535:t.pending_buf_size-n,a=n>t.w_size?t.w_size:n,r=t.strstart-t.block_start,(r>=a||(r||e===p)&&e!==c&&0===t.strm.avail_in&&r<=n)&&(i=r>n?n:r,o=e===p&&0===t.strm.avail_in&&i===r?1:0,s(t,t.block_start,i,o),t.block_start+=i,L(t.strm)),o?3:1)},W=(t,e)=>{let i,r;for(;;){if(t.lookahead<k){if(j(t),t.lookahead<k&&e===c)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=R(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==i&&t.strstart-i<=t.w_size-k&&(t.match_length=Y(t,i)),t.match_length>=3)if(r=a(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=R(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=R(t,t.ins_h,t.window[t.strstart+1]);else r=a(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(P(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===p?(P(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(P(t,!1),0===t.strm.avail_out)?1:2},H=(t,e)=>{let i,r,s;for(;;){if(t.lookahead<k){if(j(t),t.lookahead<k&&e===c)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=R(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==i&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-k&&(t.match_length=Y(t,i),t.match_length<=5&&(t.strategy===T||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){s=t.strstart+t.lookahead-3,r=a(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=s&&(t.ins_h=R(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,r&&(P(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if(r=a(t,0,t.window[t.strstart-1]),r&&P(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=a(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===p?(P(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(P(t,!1),0===t.strm.avail_out)?1:2};function X(t,e,i,r,s){this.good_length=t,this.max_lazy=e,this.nice_length=i,this.max_chain=r,this.func=s}const $=[new X(0,0,0,0,Z),new X(4,4,8,4,W),new X(4,5,16,8,W),new X(4,6,32,32,W),new X(4,4,16,16,H),new X(8,16,32,32,H),new X(8,16,128,128,H),new X(8,32,128,256,H),new X(32,128,258,1024,H),new X(32,258,258,4096,H)];function K(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=S,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),B(this.dyn_ltree),B(this.dyn_dtree),B(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),B(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),B(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Q=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.status!==F&&57!==e.status&&69!==e.status&&73!==e.status&&91!==e.status&&103!==e.status&&e.status!==C&&e.status!==z?1:0},J=t=>{if(Q(t))return U(t,_);t.total_in=t.total_out=0,t.data_type=N;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=2===e.wrap?57:e.wrap?F:C,t.adler=2===e.wrap?0:1,e.last_flush=-2,r(e),g},tt=t=>{const e=J(t);var i;return e===g&&((i=t.state).window_size=2*i.w_size,B(i.head),i.max_lazy_match=$[i.level].max_lazy,i.good_match=$[i.level].good_length,i.nice_match=$[i.level].nice_length,i.max_chain_length=$[i.level].max_chain,i.strstart=0,i.block_start=0,i.lookahead=0,i.insert=0,i.match_length=i.prev_length=2,i.match_available=0,i.ins_h=0),e},et=(t,e,i,r,s,n)=>{if(!t)return _;let a=1;if(e===w&&(e=6),r<0?(a=0,r=-r):r>15&&(a=2,r-=16),s<1||s>9||i!==S||r<8||r>15||e<0||e>9||n<0||n>A||8===r&&1!==a)return U(t,_);8===r&&(r=9);const o=new K;return t.state=o,o.strm=t,o.status=F,o.wrap=a,o.gzhead=null,o.w_bits=r,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=s+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<s+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=3*(o.lit_bufsize-1),o.level=e,o.strategy=n,o.method=i,tt(t)};t.exports.deflateInit=(t,e)=>et(t,e,S,15,8,E),t.exports.deflateInit2=et,t.exports.deflateReset=tt,t.exports.deflateResetKeep=J,t.exports.deflateSetHeader=(t,e)=>Q(t)||2!==t.state.wrap?_:(t.state.gzhead=e,g),t.exports.deflate=(t,e)=>{if(Q(t)||e>m||e<0)return t?U(t,_):_;const i=t.state;if(!t.output||0!==t.avail_in&&!t.input||i.status===z&&e!==p)return U(t,0===t.avail_out?x:_);const r=i.last_flush;if(i.last_flush=e,0!==i.pending){if(L(t),0===t.avail_out)return i.last_flush=-1,g}else if(0===t.avail_in&&D(e)<=D(r)&&e!==p)return U(t,x);if(i.status===z&&0!==t.avail_in)return U(t,x);if(i.status===F&&0===i.wrap&&(i.status=C),i.status===F){let e=S+(i.w_bits-8<<4)<<8,r=-1;if(r=i.strategy>=I||i.level<2?0:i.level<6?1:6===i.level?2:3,e|=r<<6,0!==i.strstart&&(e|=32),e+=31-e%31,G(i,e),0!==i.strstart&&(G(i,t.adler>>>16),G(i,65535&t.adler)),t.adler=1,i.status=C,L(t),0!==i.pending)return i.last_flush=-1,g}if(57===i.status)if(t.adler=0,V(i,31),V(i,139),V(i,8),i.gzhead)V(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),V(i,255&i.gzhead.time),V(i,i.gzhead.time>>8&255),V(i,i.gzhead.time>>16&255),V(i,i.gzhead.time>>24&255),V(i,9===i.level?2:i.strategy>=I||i.level<2?4:0),V(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(V(i,255&i.gzhead.extra.length),V(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=l(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69;else if(V(i,0),V(i,0),V(i,0),V(i,0),V(i,0),V(i,9===i.level?2:i.strategy>=I||i.level<2?4:0),V(i,3),i.status=C,L(t),0!==i.pending)return i.last_flush=-1,g;if(69===i.status){if(i.gzhead.extra){let e=i.pending,r=(65535&i.gzhead.extra.length)-i.gzindex;for(;i.pending+r>i.pending_buf_size;){let s=i.pending_buf_size-i.pending;if(i.pending_buf.set(i.gzhead.extra.subarray(i.gzindex,i.gzindex+s),i.pending),i.pending=i.pending_buf_size,i.gzhead.hcrc&&i.pending>e&&(t.adler=l(t.adler,i.pending_buf,i.pending-e,e)),i.gzindex+=s,L(t),0!==i.pending)return i.last_flush=-1,g;e=0,r-=s}let s=new Uint8Array(i.gzhead.extra);i.pending_buf.set(s.subarray(i.gzindex,i.gzindex+r),i.pending),i.pending+=r,i.gzhead.hcrc&&i.pending>e&&(t.adler=l(t.adler,i.pending_buf,i.pending-e,e)),i.gzindex=0}i.status=73}if(73===i.status){if(i.gzhead.name){let e,r=i.pending;do{if(i.pending===i.pending_buf_size){if(i.gzhead.hcrc&&i.pending>r&&(t.adler=l(t.adler,i.pending_buf,i.pending-r,r)),L(t),0!==i.pending)return i.last_flush=-1,g;r=0}e=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,V(i,e)}while(0!==e);i.gzhead.hcrc&&i.pending>r&&(t.adler=l(t.adler,i.pending_buf,i.pending-r,r)),i.gzindex=0}i.status=91}if(91===i.status){if(i.gzhead.comment){let e,r=i.pending;do{if(i.pending===i.pending_buf_size){if(i.gzhead.hcrc&&i.pending>r&&(t.adler=l(t.adler,i.pending_buf,i.pending-r,r)),L(t),0!==i.pending)return i.last_flush=-1,g;r=0}e=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,V(i,e)}while(0!==e);i.gzhead.hcrc&&i.pending>r&&(t.adler=l(t.adler,i.pending_buf,i.pending-r,r))}i.status=103}if(103===i.status){if(i.gzhead.hcrc){if(i.pending+2>i.pending_buf_size&&(L(t),0!==i.pending))return i.last_flush=-1,g;V(i,255&t.adler),V(i,t.adler>>8&255),t.adler=0}if(i.status=C,L(t),0!==i.pending)return i.last_flush=-1,g}if(0!==t.avail_in||0!==i.lookahead||e!==c&&i.status!==z){let r=0===i.level?Z(i,e):i.strategy===I?((t,e)=>{let i;for(;;){if(0===t.lookahead&&(j(t),0===t.lookahead)){if(e===c)return 1;break}if(t.match_length=0,i=a(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,i&&(P(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===p?(P(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(P(t,!1),0===t.strm.avail_out)?1:2})(i,e):i.strategy===v?((t,e)=>{let i,r,s,n;const o=t.window;for(;;){if(t.lookahead<=M){if(j(t),t.lookahead<=M&&e===c)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(s=t.strstart-1,r=o[s],r===o[++s]&&r===o[++s]&&r===o[++s])){n=t.strstart+M;do{}while(r===o[++s]&&r===o[++s]&&r===o[++s]&&r===o[++s]&&r===o[++s]&&r===o[++s]&&r===o[++s]&&r===o[++s]&&s<n);t.match_length=M-(n-s),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(i=a(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(i=a(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),i&&(P(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===p?(P(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(P(t,!1),0===t.strm.avail_out)?1:2})(i,e):$[i.level].func(i,e);if(3!==r&&4!==r||(i.status=z),1===r||3===r)return 0===t.avail_out&&(i.last_flush=-1),g;if(2===r&&(e===d?o(i):e!==m&&(s(i,0,0,!1),e===f&&(B(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),L(t),0===t.avail_out))return i.last_flush=-1,g}return e!==p?g:i.wrap<=0?y:(2===i.wrap?(V(i,255&t.adler),V(i,t.adler>>8&255),V(i,t.adler>>16&255),V(i,t.adler>>24&255),V(i,255&t.total_in),V(i,t.total_in>>8&255),V(i,t.total_in>>16&255),V(i,t.total_in>>24&255)):(G(i,t.adler>>>16),G(i,65535&t.adler)),L(t),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?g:y)},t.exports.deflateEnd=t=>{if(Q(t))return _;const e=t.state.status;return t.state=null,e===C?U(t,b):g},t.exports.deflateSetDictionary=(t,e)=>{let i=e.length;if(Q(t))return _;const r=t.state,s=r.wrap;if(2===s||1===s&&r.status!==F||r.lookahead)return _;if(1===s&&(t.adler=h(t.adler,e,i,0)),r.wrap=0,i>=r.w_size){0===s&&(B(r.head),r.strstart=0,r.block_start=0,r.insert=0);let t=new Uint8Array(r.w_size);t.set(e.subarray(i-r.w_size,i),0),e=t,i=r.w_size}const n=t.avail_in,a=t.next_in,o=t.input;for(t.avail_in=i,t.next_in=0,t.input=e,j(r);r.lookahead>=3;){let t=r.strstart,e=r.lookahead-2;do{r.ins_h=R(r,r.ins_h,r.window[t+3-1]),r.prev[t&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=t,t++}while(--e);r.strstart=t,r.lookahead=2,j(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,t.next_in=a,t.input=o,t.avail_in=n,r.wrap=s,g},t.exports.deflateInfo="pako deflate (from Nodeca project)"},7414:t=>{"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},7293:t=>{"use strict";const e=16209;t.exports=function(t,i){let r,s,n,a,o,h,l,u,c,d,f,p,m,g,y,_,b,x,w,T,I,v,A,E;const N=t.state;r=t.next_in,A=t.input,s=r+(t.avail_in-5),n=t.next_out,E=t.output,a=n-(i-t.avail_out),o=n+(t.avail_out-257),h=N.dmax,l=N.wsize,u=N.whave,c=N.wnext,d=N.window,f=N.hold,p=N.bits,m=N.lencode,g=N.distcode,y=(1<<N.lenbits)-1,_=(1<<N.distbits)-1;t:do{p<15&&(f+=A[r++]<<p,p+=8,f+=A[r++]<<p,p+=8),b=m[f&y];e:for(;;){if(x=b>>>24,f>>>=x,p-=x,x=b>>>16&255,0===x)E[n++]=65535&b;else{if(!(16&x)){if(64&x){if(32&x){N.mode=16191;break t}t.msg="invalid literal/length code",N.mode=e;break t}b=m[(65535&b)+(f&(1<<x)-1)];continue e}for(w=65535&b,x&=15,x&&(p<x&&(f+=A[r++]<<p,p+=8),w+=f&(1<<x)-1,f>>>=x,p-=x),p<15&&(f+=A[r++]<<p,p+=8,f+=A[r++]<<p,p+=8),b=g[f&_];;){if(x=b>>>24,f>>>=x,p-=x,x=b>>>16&255,16&x){if(T=65535&b,x&=15,p<x&&(f+=A[r++]<<p,p+=8,p<x&&(f+=A[r++]<<p,p+=8)),T+=f&(1<<x)-1,T>h){t.msg="invalid distance too far back",N.mode=e;break t}if(f>>>=x,p-=x,x=n-a,T>x){if(x=T-x,x>u&&N.sane){t.msg="invalid distance too far back",N.mode=e;break t}if(I=0,v=d,0===c){if(I+=l-x,x<w){w-=x;do{E[n++]=d[I++]}while(--x);I=n-T,v=E}}else if(c<x){if(I+=l+c-x,x-=c,x<w){w-=x;do{E[n++]=d[I++]}while(--x);if(I=0,c<w){x=c,w-=x;do{E[n++]=d[I++]}while(--x);I=n-T,v=E}}}else if(I+=c-x,x<w){w-=x;do{E[n++]=d[I++]}while(--x);I=n-T,v=E}for(;w>2;)E[n++]=v[I++],E[n++]=v[I++],E[n++]=v[I++],w-=3;w&&(E[n++]=v[I++],w>1&&(E[n++]=v[I++]))}else{I=n-T;do{E[n++]=E[I++],E[n++]=E[I++],E[n++]=E[I++],w-=3}while(w>2);w&&(E[n++]=E[I++],w>1&&(E[n++]=E[I++]))}break}if(64&x){t.msg="invalid distance code",N.mode=e;break t}b=g[(65535&b)+(f&(1<<x)-1)]}}break}}while(r<s&&n<o);w=p>>3,r-=w,p-=w<<3,f&=(1<<p)-1,t.next_in=r,t.next_out=n,t.avail_in=r<s?s-r+5:5-(r-s),t.avail_out=n<o?o-n+257:257-(n-o),N.hold=f,N.bits=p}},1447:(t,e,i)=>{"use strict";const r=i(3269),s=i(4823),n=i(7293),a=i(1998),{Z_FINISH:o,Z_BLOCK:h,Z_TREES:l,Z_OK:u,Z_STREAM_END:c,Z_NEED_DICT:d,Z_STREAM_ERROR:f,Z_DATA_ERROR:p,Z_MEM_ERROR:m,Z_BUF_ERROR:g,Z_DEFLATED:y}=i(9681),_=16180,b=16190,x=16191,w=16192,T=16194,I=16199,v=16200,A=16206,E=16209,N=16210,S=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function M(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const k=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<_||e.mode>16211?1:0},F=t=>{if(k(t))return f;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=_,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,u},C=t=>{if(k(t))return f;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,F(t)},z=(t,e)=>{let i;if(k(t))return f;const r=t.state;return e<0?(i=0,e=-e):(i=5+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?f:(null!==r.window&&r.wbits!==e&&(r.window=null),r.wrap=i,r.wbits=e,C(t))},U=(t,e)=>{if(!t)return f;const i=new M;t.state=i,i.strm=t,i.window=null,i.mode=_;const r=z(t,e);return r!==u&&(t.state=null),r};let D,B,O=!0;const R=t=>{if(O){D=new Int32Array(512),B=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(a(1,t.lens,0,288,D,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;a(2,t.lens,0,32,B,0,t.work,{bits:5}),O=!1}t.lencode=D,t.lenbits=9,t.distcode=B,t.distbits=5},L=(t,e,i,r)=>{let s;const n=t.state;return null===n.window&&(n.wsize=1<<n.wbits,n.wnext=0,n.whave=0,n.window=new Uint8Array(n.wsize)),r>=n.wsize?(n.window.set(e.subarray(i-n.wsize,i),0),n.wnext=0,n.whave=n.wsize):(s=n.wsize-n.wnext,s>r&&(s=r),n.window.set(e.subarray(i-r,i-r+s),n.wnext),(r-=s)?(n.window.set(e.subarray(i-r,i),0),n.wnext=r,n.whave=n.wsize):(n.wnext+=s,n.wnext===n.wsize&&(n.wnext=0),n.whave<n.wsize&&(n.whave+=s))),0};t.exports.inflateReset=C,t.exports.inflateReset2=z,t.exports.inflateResetKeep=F,t.exports.inflateInit=t=>U(t,15),t.exports.inflateInit2=U,t.exports.inflate=(t,e)=>{let i,M,F,C,z,U,D,B,O,P,V,G,q,Y,j,Z,W,H,X,$,K,Q,J=0;const tt=new Uint8Array(4);let et,it;const rt=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(k(t)||!t.output||!t.input&&0!==t.avail_in)return f;i=t.state,i.mode===x&&(i.mode=w),z=t.next_out,F=t.output,D=t.avail_out,C=t.next_in,M=t.input,U=t.avail_in,B=i.hold,O=i.bits,P=U,V=D,Q=u;t:for(;;)switch(i.mode){case _:if(0===i.wrap){i.mode=w;break}for(;O<16;){if(0===U)break t;U--,B+=M[C++]<<O,O+=8}if(2&i.wrap&&35615===B){0===i.wbits&&(i.wbits=15),i.check=0,tt[0]=255&B,tt[1]=B>>>8&255,i.check=s(i.check,tt,2,0),B=0,O=0,i.mode=16181;break}if(i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&B)<<8)+(B>>8))%31){t.msg="incorrect header check",i.mode=E;break}if((15&B)!==y){t.msg="unknown compression method",i.mode=E;break}if(B>>>=4,O-=4,K=8+(15&B),0===i.wbits&&(i.wbits=K),K>15||K>i.wbits){t.msg="invalid window size",i.mode=E;break}i.dmax=1<<i.wbits,i.flags=0,t.adler=i.check=1,i.mode=512&B?16189:x,B=0,O=0;break;case 16181:for(;O<16;){if(0===U)break t;U--,B+=M[C++]<<O,O+=8}if(i.flags=B,(255&i.flags)!==y){t.msg="unknown compression method",i.mode=E;break}if(57344&i.flags){t.msg="unknown header flags set",i.mode=E;break}i.head&&(i.head.text=B>>8&1),512&i.flags&&4&i.wrap&&(tt[0]=255&B,tt[1]=B>>>8&255,i.check=s(i.check,tt,2,0)),B=0,O=0,i.mode=16182;case 16182:for(;O<32;){if(0===U)break t;U--,B+=M[C++]<<O,O+=8}i.head&&(i.head.time=B),512&i.flags&&4&i.wrap&&(tt[0]=255&B,tt[1]=B>>>8&255,tt[2]=B>>>16&255,tt[3]=B>>>24&255,i.check=s(i.check,tt,4,0)),B=0,O=0,i.mode=16183;case 16183:for(;O<16;){if(0===U)break t;U--,B+=M[C++]<<O,O+=8}i.head&&(i.head.xflags=255&B,i.head.os=B>>8),512&i.flags&&4&i.wrap&&(tt[0]=255&B,tt[1]=B>>>8&255,i.check=s(i.check,tt,2,0)),B=0,O=0,i.mode=16184;case 16184:if(1024&i.flags){for(;O<16;){if(0===U)break t;U--,B+=M[C++]<<O,O+=8}i.length=B,i.head&&(i.head.extra_len=B),512&i.flags&&4&i.wrap&&(tt[0]=255&B,tt[1]=B>>>8&255,i.check=s(i.check,tt,2,0)),B=0,O=0}else i.head&&(i.head.extra=null);i.mode=16185;case 16185:if(1024&i.flags&&(G=i.length,G>U&&(G=U),G&&(i.head&&(K=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Uint8Array(i.head.extra_len)),i.head.extra.set(M.subarray(C,C+G),K)),512&i.flags&&4&i.wrap&&(i.check=s(i.check,M,G,C)),U-=G,C+=G,i.length-=G),i.length))break t;i.length=0,i.mode=16186;case 16186:if(2048&i.flags){if(0===U)break t;G=0;do{K=M[C+G++],i.head&&K&&i.length<65536&&(i.head.name+=String.fromCharCode(K))}while(K&&G<U);if(512&i.flags&&4&i.wrap&&(i.check=s(i.check,M,G,C)),U-=G,C+=G,K)break t}else i.head&&(i.head.name=null);i.length=0,i.mode=16187;case 16187:if(4096&i.flags){if(0===U)break t;G=0;do{K=M[C+G++],i.head&&K&&i.length<65536&&(i.head.comment+=String.fromCharCode(K))}while(K&&G<U);if(512&i.flags&&4&i.wrap&&(i.check=s(i.check,M,G,C)),U-=G,C+=G,K)break t}else i.head&&(i.head.comment=null);i.mode=16188;case 16188:if(512&i.flags){for(;O<16;){if(0===U)break t;U--,B+=M[C++]<<O,O+=8}if(4&i.wrap&&B!==(65535&i.check)){t.msg="header crc mismatch",i.mode=E;break}B=0,O=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),t.adler=i.check=0,i.mode=x;break;case 16189:for(;O<32;){if(0===U)break t;U--,B+=M[C++]<<O,O+=8}t.adler=i.check=S(B),B=0,O=0,i.mode=b;case b:if(0===i.havedict)return t.next_out=z,t.avail_out=D,t.next_in=C,t.avail_in=U,i.hold=B,i.bits=O,d;t.adler=i.check=1,i.mode=x;case x:if(e===h||e===l)break t;case w:if(i.last){B>>>=7&O,O-=7&O,i.mode=A;break}for(;O<3;){if(0===U)break t;U--,B+=M[C++]<<O,O+=8}switch(i.last=1&B,B>>>=1,O-=1,3&B){case 0:i.mode=16193;break;case 1:if(R(i),i.mode=I,e===l){B>>>=2,O-=2;break t}break;case 2:i.mode=16196;break;case 3:t.msg="invalid block type",i.mode=E}B>>>=2,O-=2;break;case 16193:for(B>>>=7&O,O-=7&O;O<32;){if(0===U)break t;U--,B+=M[C++]<<O,O+=8}if((65535&B)!=(B>>>16^65535)){t.msg="invalid stored block lengths",i.mode=E;break}if(i.length=65535&B,B=0,O=0,i.mode=T,e===l)break t;case T:i.mode=16195;case 16195:if(G=i.length,G){if(G>U&&(G=U),G>D&&(G=D),0===G)break t;F.set(M.subarray(C,C+G),z),U-=G,C+=G,D-=G,z+=G,i.length-=G;break}i.mode=x;break;case 16196:for(;O<14;){if(0===U)break t;U--,B+=M[C++]<<O,O+=8}if(i.nlen=257+(31&B),B>>>=5,O-=5,i.ndist=1+(31&B),B>>>=5,O-=5,i.ncode=4+(15&B),B>>>=4,O-=4,i.nlen>286||i.ndist>30){t.msg="too many length or distance symbols",i.mode=E;break}i.have=0,i.mode=16197;case 16197:for(;i.have<i.ncode;){for(;O<3;){if(0===U)break t;U--,B+=M[C++]<<O,O+=8}i.lens[rt[i.have++]]=7&B,B>>>=3,O-=3}for(;i.have<19;)i.lens[rt[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,et={bits:i.lenbits},Q=a(0,i.lens,0,19,i.lencode,0,i.work,et),i.lenbits=et.bits,Q){t.msg="invalid code lengths set",i.mode=E;break}i.have=0,i.mode=16198;case 16198:for(;i.have<i.nlen+i.ndist;){for(;J=i.lencode[B&(1<<i.lenbits)-1],j=J>>>24,Z=J>>>16&255,W=65535&J,!(j<=O);){if(0===U)break t;U--,B+=M[C++]<<O,O+=8}if(W<16)B>>>=j,O-=j,i.lens[i.have++]=W;else{if(16===W){for(it=j+2;O<it;){if(0===U)break t;U--,B+=M[C++]<<O,O+=8}if(B>>>=j,O-=j,0===i.have){t.msg="invalid bit length repeat",i.mode=E;break}K=i.lens[i.have-1],G=3+(3&B),B>>>=2,O-=2}else if(17===W){for(it=j+3;O<it;){if(0===U)break t;U--,B+=M[C++]<<O,O+=8}B>>>=j,O-=j,K=0,G=3+(7&B),B>>>=3,O-=3}else{for(it=j+7;O<it;){if(0===U)break t;U--,B+=M[C++]<<O,O+=8}B>>>=j,O-=j,K=0,G=11+(127&B),B>>>=7,O-=7}if(i.have+G>i.nlen+i.ndist){t.msg="invalid bit length repeat",i.mode=E;break}for(;G--;)i.lens[i.have++]=K}}if(i.mode===E)break;if(0===i.lens[256]){t.msg="invalid code -- missing end-of-block",i.mode=E;break}if(i.lenbits=9,et={bits:i.lenbits},Q=a(1,i.lens,0,i.nlen,i.lencode,0,i.work,et),i.lenbits=et.bits,Q){t.msg="invalid literal/lengths set",i.mode=E;break}if(i.distbits=6,i.distcode=i.distdyn,et={bits:i.distbits},Q=a(2,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,et),i.distbits=et.bits,Q){t.msg="invalid distances set",i.mode=E;break}if(i.mode=I,e===l)break t;case I:i.mode=v;case v:if(U>=6&&D>=258){t.next_out=z,t.avail_out=D,t.next_in=C,t.avail_in=U,i.hold=B,i.bits=O,n(t,V),z=t.next_out,F=t.output,D=t.avail_out,C=t.next_in,M=t.input,U=t.avail_in,B=i.hold,O=i.bits,i.mode===x&&(i.back=-1);break}for(i.back=0;J=i.lencode[B&(1<<i.lenbits)-1],j=J>>>24,Z=J>>>16&255,W=65535&J,!(j<=O);){if(0===U)break t;U--,B+=M[C++]<<O,O+=8}if(Z&&!(240&Z)){for(H=j,X=Z,$=W;J=i.lencode[$+((B&(1<<H+X)-1)>>H)],j=J>>>24,Z=J>>>16&255,W=65535&J,!(H+j<=O);){if(0===U)break t;U--,B+=M[C++]<<O,O+=8}B>>>=H,O-=H,i.back+=H}if(B>>>=j,O-=j,i.back+=j,i.length=W,0===Z){i.mode=16205;break}if(32&Z){i.back=-1,i.mode=x;break}if(64&Z){t.msg="invalid literal/length code",i.mode=E;break}i.extra=15&Z,i.mode=16201;case 16201:if(i.extra){for(it=i.extra;O<it;){if(0===U)break t;U--,B+=M[C++]<<O,O+=8}i.length+=B&(1<<i.extra)-1,B>>>=i.extra,O-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=16202;case 16202:for(;J=i.distcode[B&(1<<i.distbits)-1],j=J>>>24,Z=J>>>16&255,W=65535&J,!(j<=O);){if(0===U)break t;U--,B+=M[C++]<<O,O+=8}if(!(240&Z)){for(H=j,X=Z,$=W;J=i.distcode[$+((B&(1<<H+X)-1)>>H)],j=J>>>24,Z=J>>>16&255,W=65535&J,!(H+j<=O);){if(0===U)break t;U--,B+=M[C++]<<O,O+=8}B>>>=H,O-=H,i.back+=H}if(B>>>=j,O-=j,i.back+=j,64&Z){t.msg="invalid distance code",i.mode=E;break}i.offset=W,i.extra=15&Z,i.mode=16203;case 16203:if(i.extra){for(it=i.extra;O<it;){if(0===U)break t;U--,B+=M[C++]<<O,O+=8}i.offset+=B&(1<<i.extra)-1,B>>>=i.extra,O-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){t.msg="invalid distance too far back",i.mode=E;break}i.mode=16204;case 16204:if(0===D)break t;if(G=V-D,i.offset>G){if(G=i.offset-G,G>i.whave&&i.sane){t.msg="invalid distance too far back",i.mode=E;break}G>i.wnext?(G-=i.wnext,q=i.wsize-G):q=i.wnext-G,G>i.length&&(G=i.length),Y=i.window}else Y=F,q=z-i.offset,G=i.length;G>D&&(G=D),D-=G,i.length-=G;do{F[z++]=Y[q++]}while(--G);0===i.length&&(i.mode=v);break;case 16205:if(0===D)break t;F[z++]=i.length,D--,i.mode=v;break;case A:if(i.wrap){for(;O<32;){if(0===U)break t;U--,B|=M[C++]<<O,O+=8}if(V-=D,t.total_out+=V,i.total+=V,4&i.wrap&&V&&(t.adler=i.check=i.flags?s(i.check,F,V,z-V):r(i.check,F,V,z-V)),V=D,4&i.wrap&&(i.flags?B:S(B))!==i.check){t.msg="incorrect data check",i.mode=E;break}B=0,O=0}i.mode=16207;case 16207:if(i.wrap&&i.flags){for(;O<32;){if(0===U)break t;U--,B+=M[C++]<<O,O+=8}if(4&i.wrap&&B!==(4294967295&i.total)){t.msg="incorrect length check",i.mode=E;break}B=0,O=0}i.mode=16208;case 16208:Q=c;break t;case E:Q=p;break t;case N:return m;default:return f}return t.next_out=z,t.avail_out=D,t.next_in=C,t.avail_in=U,i.hold=B,i.bits=O,(i.wsize||V!==t.avail_out&&i.mode<E&&(i.mode<A||e!==o))&&L(t,t.output,t.next_out,V-t.avail_out)?(i.mode=N,m):(P-=t.avail_in,V-=t.avail_out,t.total_in+=P,t.total_out+=V,i.total+=V,4&i.wrap&&V&&(t.adler=i.check=i.flags?s(i.check,F,V,t.next_out-V):r(i.check,F,V,t.next_out-V)),t.data_type=i.bits+(i.last?64:0)+(i.mode===x?128:0)+(i.mode===I||i.mode===T?256:0),(0===P&&0===V||e===o)&&Q===u&&(Q=g),Q)},t.exports.inflateEnd=t=>{if(k(t))return f;let e=t.state;return e.window&&(e.window=null),t.state=null,u},t.exports.inflateGetHeader=(t,e)=>{if(k(t))return f;const i=t.state;return 2&i.wrap?(i.head=e,e.done=!1,u):f},t.exports.inflateSetDictionary=(t,e)=>{const i=e.length;let s,n,a;return k(t)?f:(s=t.state,0!==s.wrap&&s.mode!==b?f:s.mode===b&&(n=1,n=r(n,e,i,0),n!==s.check)?p:(a=L(t,e,i,i),a?(s.mode=N,m):(s.havedict=1,u)))},t.exports.inflateInfo="pako inflate (from Nodeca project)"},1998:t=>{"use strict";const e=15,i=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),r=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),s=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),n=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);t.exports=(t,a,o,h,l,u,c,d)=>{const f=d.bits;let p,m,g,y,_,b,x=0,w=0,T=0,I=0,v=0,A=0,E=0,N=0,S=0,M=0,k=null;const F=new Uint16Array(16),C=new Uint16Array(16);let z,U,D,B=null;for(x=0;x<=e;x++)F[x]=0;for(w=0;w<h;w++)F[a[o+w]]++;for(v=f,I=e;I>=1&&0===F[I];I--);if(v>I&&(v=I),0===I)return l[u++]=20971520,l[u++]=20971520,d.bits=1,0;for(T=1;T<I&&0===F[T];T++);for(v<T&&(v=T),N=1,x=1;x<=e;x++)if(N<<=1,N-=F[x],N<0)return-1;if(N>0&&(0===t||1!==I))return-1;for(C[1]=0,x=1;x<e;x++)C[x+1]=C[x]+F[x];for(w=0;w<h;w++)0!==a[o+w]&&(c[C[a[o+w]]++]=w);if(0===t?(k=B=c,b=20):1===t?(k=i,B=r,b=257):(k=s,B=n,b=0),M=0,w=0,x=T,_=u,A=v,E=0,g=-1,S=1<<v,y=S-1,1===t&&S>852||2===t&&S>592)return 1;for(;;){z=x-E,c[w]+1<b?(U=0,D=c[w]):c[w]>=b?(U=B[c[w]-b],D=k[c[w]-b]):(U=96,D=0),p=1<<x-E,m=1<<A,T=m;do{m-=p,l[_+(M>>E)+m]=z<<24|U<<16|D}while(0!==m);for(p=1<<x-1;M&p;)p>>=1;if(0!==p?(M&=p-1,M+=p):M=0,w++,0==--F[x]){if(x===I)break;x=a[o+c[w]]}if(x>v&&(M&y)!==g){for(0===E&&(E=v),_+=T,A=x-E,N=1<<A;A+E<I&&(N-=F[A+E],!(N<=0));)A++,N<<=1;if(S+=1<<A,1===t&&S>852||2===t&&S>592)return 1;g=M&y,l[g]=v<<24|A<<16|_-u}}return 0!==M&&(l[_+M]=x-E<<24|64<<16),d.bits=v,0}},4674:t=>{"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},3665:t=>{"use strict";function e(t){let e=t.length;for(;--e>=0;)t[e]=0}const i=256,r=286,s=30,n=15,a=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),o=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),h=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),l=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),u=new Array(576);e(u);const c=new Array(60);e(c);const d=new Array(512);e(d);const f=new Array(256);e(f);const p=new Array(29);e(p);const m=new Array(s);function g(t,e,i,r,s){this.static_tree=t,this.extra_bits=e,this.extra_base=i,this.elems=r,this.max_length=s,this.has_stree=t&&t.length}let y,_,b;function x(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}e(m);const w=t=>t<256?d[t]:d[256+(t>>>7)],T=(t,e)=>{t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},I=(t,e,i)=>{t.bi_valid>16-i?(t.bi_buf|=e<<t.bi_valid&65535,T(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=i-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=i)},v=(t,e,i)=>{I(t,i[2*e],i[2*e+1])},A=(t,e)=>{let i=0;do{i|=1&t,t>>>=1,i<<=1}while(--e>0);return i>>>1},E=(t,e,i)=>{const r=new Array(16);let s,a,o=0;for(s=1;s<=n;s++)o=o+i[s-1]<<1,r[s]=o;for(a=0;a<=e;a++){let e=t[2*a+1];0!==e&&(t[2*a]=A(r[e]++,e))}},N=t=>{let e;for(e=0;e<r;e++)t.dyn_ltree[2*e]=0;for(e=0;e<s;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},S=t=>{t.bi_valid>8?T(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},M=(t,e,i,r)=>{const s=2*e,n=2*i;return t[s]<t[n]||t[s]===t[n]&&r[e]<=r[i]},k=(t,e,i)=>{const r=t.heap[i];let s=i<<1;for(;s<=t.heap_len&&(s<t.heap_len&&M(e,t.heap[s+1],t.heap[s],t.depth)&&s++,!M(e,r,t.heap[s],t.depth));)t.heap[i]=t.heap[s],i=s,s<<=1;t.heap[i]=r},F=(t,e,r)=>{let s,n,h,l,u=0;if(0!==t.sym_next)do{s=255&t.pending_buf[t.sym_buf+u++],s+=(255&t.pending_buf[t.sym_buf+u++])<<8,n=t.pending_buf[t.sym_buf+u++],0===s?v(t,n,e):(h=f[n],v(t,h+i+1,e),l=a[h],0!==l&&(n-=p[h],I(t,n,l)),s--,h=w(s),v(t,h,r),l=o[h],0!==l&&(s-=m[h],I(t,s,l)))}while(u<t.sym_next);v(t,256,e)},C=(t,e)=>{const i=e.dyn_tree,r=e.stat_desc.static_tree,s=e.stat_desc.has_stree,a=e.stat_desc.elems;let o,h,l,u=-1;for(t.heap_len=0,t.heap_max=573,o=0;o<a;o++)0!==i[2*o]?(t.heap[++t.heap_len]=u=o,t.depth[o]=0):i[2*o+1]=0;for(;t.heap_len<2;)l=t.heap[++t.heap_len]=u<2?++u:0,i[2*l]=1,t.depth[l]=0,t.opt_len--,s&&(t.static_len-=r[2*l+1]);for(e.max_code=u,o=t.heap_len>>1;o>=1;o--)k(t,i,o);l=a;do{o=t.heap[1],t.heap[1]=t.heap[t.heap_len--],k(t,i,1),h=t.heap[1],t.heap[--t.heap_max]=o,t.heap[--t.heap_max]=h,i[2*l]=i[2*o]+i[2*h],t.depth[l]=(t.depth[o]>=t.depth[h]?t.depth[o]:t.depth[h])+1,i[2*o+1]=i[2*h+1]=l,t.heap[1]=l++,k(t,i,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],((t,e)=>{const i=e.dyn_tree,r=e.max_code,s=e.stat_desc.static_tree,a=e.stat_desc.has_stree,o=e.stat_desc.extra_bits,h=e.stat_desc.extra_base,l=e.stat_desc.max_length;let u,c,d,f,p,m,g=0;for(f=0;f<=n;f++)t.bl_count[f]=0;for(i[2*t.heap[t.heap_max]+1]=0,u=t.heap_max+1;u<573;u++)c=t.heap[u],f=i[2*i[2*c+1]+1]+1,f>l&&(f=l,g++),i[2*c+1]=f,c>r||(t.bl_count[f]++,p=0,c>=h&&(p=o[c-h]),m=i[2*c],t.opt_len+=m*(f+p),a&&(t.static_len+=m*(s[2*c+1]+p)));if(0!==g){do{for(f=l-1;0===t.bl_count[f];)f--;t.bl_count[f]--,t.bl_count[f+1]+=2,t.bl_count[l]--,g-=2}while(g>0);for(f=l;0!==f;f--)for(c=t.bl_count[f];0!==c;)d=t.heap[--u],d>r||(i[2*d+1]!==f&&(t.opt_len+=(f-i[2*d+1])*i[2*d],i[2*d+1]=f),c--)}})(t,e),E(i,u,t.bl_count)},z=(t,e,i)=>{let r,s,n=-1,a=e[1],o=0,h=7,l=4;for(0===a&&(h=138,l=3),e[2*(i+1)+1]=65535,r=0;r<=i;r++)s=a,a=e[2*(r+1)+1],++o<h&&s===a||(o<l?t.bl_tree[2*s]+=o:0!==s?(s!==n&&t.bl_tree[2*s]++,t.bl_tree[32]++):o<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=0,n=s,0===a?(h=138,l=3):s===a?(h=6,l=3):(h=7,l=4))},U=(t,e,i)=>{let r,s,n=-1,a=e[1],o=0,h=7,l=4;for(0===a&&(h=138,l=3),r=0;r<=i;r++)if(s=a,a=e[2*(r+1)+1],!(++o<h&&s===a)){if(o<l)do{v(t,s,t.bl_tree)}while(0!=--o);else 0!==s?(s!==n&&(v(t,s,t.bl_tree),o--),v(t,16,t.bl_tree),I(t,o-3,2)):o<=10?(v(t,17,t.bl_tree),I(t,o-3,3)):(v(t,18,t.bl_tree),I(t,o-11,7));o=0,n=s,0===a?(h=138,l=3):s===a?(h=6,l=3):(h=7,l=4)}};let D=!1;const B=(t,e,i,r)=>{I(t,0+(r?1:0),3),S(t),T(t,i),T(t,~i),i&&t.pending_buf.set(t.window.subarray(e,e+i),t.pending),t.pending+=i};t.exports._tr_init=t=>{D||((()=>{let t,e,i,l,x;const w=new Array(16);for(i=0,l=0;l<28;l++)for(p[l]=i,t=0;t<1<<a[l];t++)f[i++]=l;for(f[i-1]=l,x=0,l=0;l<16;l++)for(m[l]=x,t=0;t<1<<o[l];t++)d[x++]=l;for(x>>=7;l<s;l++)for(m[l]=x<<7,t=0;t<1<<o[l]-7;t++)d[256+x++]=l;for(e=0;e<=n;e++)w[e]=0;for(t=0;t<=143;)u[2*t+1]=8,t++,w[8]++;for(;t<=255;)u[2*t+1]=9,t++,w[9]++;for(;t<=279;)u[2*t+1]=7,t++,w[7]++;for(;t<=287;)u[2*t+1]=8,t++,w[8]++;for(E(u,287,w),t=0;t<s;t++)c[2*t+1]=5,c[2*t]=A(t,5);y=new g(u,a,257,r,n),_=new g(c,o,0,s,n),b=new g(new Array(0),h,0,19,7)})(),D=!0),t.l_desc=new x(t.dyn_ltree,y),t.d_desc=new x(t.dyn_dtree,_),t.bl_desc=new x(t.bl_tree,b),t.bi_buf=0,t.bi_valid=0,N(t)},t.exports._tr_stored_block=B,t.exports._tr_flush_block=(t,e,r,s)=>{let n,a,o=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=(t=>{let e,r=4093624447;for(e=0;e<=31;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<i;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0})(t)),C(t,t.l_desc),C(t,t.d_desc),o=(t=>{let e;for(z(t,t.dyn_ltree,t.l_desc.max_code),z(t,t.dyn_dtree,t.d_desc.max_code),C(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*l[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e})(t),n=t.opt_len+3+7>>>3,a=t.static_len+3+7>>>3,a<=n&&(n=a)):n=a=r+5,r+4<=n&&-1!==e?B(t,e,r,s):4===t.strategy||a===n?(I(t,2+(s?1:0),3),F(t,u,c)):(I(t,4+(s?1:0),3),((t,e,i,r)=>{let s;for(I(t,e-257,5),I(t,i-1,5),I(t,r-4,4),s=0;s<r;s++)I(t,t.bl_tree[2*l[s]+1],3);U(t,t.dyn_ltree,e-1),U(t,t.dyn_dtree,i-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),F(t,t.dyn_ltree,t.dyn_dtree)),N(t),s&&S(t)},t.exports._tr_tally=(t,e,r)=>(t.pending_buf[t.sym_buf+t.sym_next++]=e,t.pending_buf[t.sym_buf+t.sym_next++]=e>>8,t.pending_buf[t.sym_buf+t.sym_next++]=r,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(f[r]+i+1)]++,t.dyn_dtree[2*w(e)]++),t.sym_next===t.sym_end),t.exports._tr_align=t=>{I(t,2,3),v(t,256,u),(t=>{16===t.bi_valid?(T(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(t)}},4442:t=>{"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},4809:function(t,e){var i,r,s;r=[],i=function t(){"use strict";var e="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:{},i=!e.document&&!!e.postMessage,r=e.IS_PAPA_WORKER||!1,s={},n=0,a={parse:function(i,r){var o=(r=r||{}).dynamicTyping||!1;if(w(o)&&(r.dynamicTypingFunction=o,o={}),r.dynamicTyping=o,r.transform=!!w(r.transform)&&r.transform,r.worker&&a.WORKERS_SUPPORTED){var h=function(){if(!a.WORKERS_SUPPORTED)return!1;var i,r,o=(i=e.URL||e.webkitURL||null,r=t.toString(),a.BLOB_URL||(a.BLOB_URL=i.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",r,")();"],{type:"text/javascript"})))),h=new e.Worker(o);return h.onmessage=g,h.id=n++,s[h.id]=h}();return h.userStep=r.step,h.userChunk=r.chunk,h.userComplete=r.complete,h.userError=r.error,r.step=w(r.step),r.chunk=w(r.chunk),r.complete=w(r.complete),r.error=w(r.error),delete r.worker,void h.postMessage({input:i,config:r,workerId:h.id})}var f=null;return a.NODE_STREAM_INPUT,"string"==typeof i?(i=function(t){return 65279===t.charCodeAt(0)?t.slice(1):t}(i),f=r.download?new l(r):new c(r)):!0===i.readable&&w(i.read)&&w(i.on)?f=new d(r):(e.File&&i instanceof File||i instanceof Object)&&(f=new u(r)),f.stream(i)},unparse:function(t,e){var i=!1,r=!0,s=",",n="\r\n",o='"',h=o+o,l=!1,u=null,c=!1;!function(){if("object"==typeof e){if("string"!=typeof e.delimiter||a.BAD_DELIMITERS.filter((function(t){return-1!==e.delimiter.indexOf(t)})).length||(s=e.delimiter),("boolean"==typeof e.quotes||"function"==typeof e.quotes||Array.isArray(e.quotes))&&(i=e.quotes),"boolean"!=typeof e.skipEmptyLines&&"string"!=typeof e.skipEmptyLines||(l=e.skipEmptyLines),"string"==typeof e.newline&&(n=e.newline),"string"==typeof e.quoteChar&&(o=e.quoteChar),"boolean"==typeof e.header&&(r=e.header),Array.isArray(e.columns)){if(0===e.columns.length)throw new Error("Option columns is empty");u=e.columns}void 0!==e.escapeChar&&(h=e.escapeChar+o),("boolean"==typeof e.escapeFormulae||e.escapeFormulae instanceof RegExp)&&(c=e.escapeFormulae instanceof RegExp?e.escapeFormulae:/^[=+\-@\t\r].*$/)}}();var d=new RegExp(p(o),"g");if("string"==typeof t&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return f(null,t,l);if("object"==typeof t[0])return f(u||Object.keys(t[0]),t,l)}else if("object"==typeof t)return"string"==typeof t.data&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields||u),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:"object"==typeof t.data[0]?Object.keys(t.data[0]):[]),Array.isArray(t.data[0])||"object"==typeof t.data[0]||(t.data=[t.data])),f(t.fields||[],t.data||[],l);throw new Error("Unable to serialize unrecognized input");function f(t,e,i){var a="";"string"==typeof t&&(t=JSON.parse(t)),"string"==typeof e&&(e=JSON.parse(e));var o=Array.isArray(t)&&0<t.length,h=!Array.isArray(e[0]);if(o&&r){for(var l=0;l<t.length;l++)0<l&&(a+=s),a+=m(t[l],l);0<e.length&&(a+=n)}for(var u=0;u<e.length;u++){var c=o?t.length:e[u].length,d=!1,f=o?0===Object.keys(e[u]).length:0===e[u].length;if(i&&!o&&(d="greedy"===i?""===e[u].join("").trim():1===e[u].length&&0===e[u][0].length),"greedy"===i&&o){for(var p=[],g=0;g<c;g++){var y=h?t[g]:g;p.push(e[u][y])}d=""===p.join("").trim()}if(!d){for(var _=0;_<c;_++){0<_&&!f&&(a+=s);var b=o&&h?t[_]:_;a+=m(e[u][b],_)}u<e.length-1&&(!i||0<c&&!f)&&(a+=n)}}return a}function m(t,e){if(null==t)return"";if(t.constructor===Date)return JSON.stringify(t).slice(1,25);var r=!1;c&&"string"==typeof t&&c.test(t)&&(t="'"+t,r=!0);var n=t.toString().replace(d,h);return(r=r||!0===i||"function"==typeof i&&i(t,e)||Array.isArray(i)&&i[e]||function(t,e){for(var i=0;i<e.length;i++)if(-1<t.indexOf(e[i]))return!0;return!1}(n,a.BAD_DELIMITERS)||-1<n.indexOf(s)||" "===n.charAt(0)||" "===n.charAt(n.length-1))?o+n+o:n}}};if(a.RECORD_SEP=String.fromCharCode(30),a.UNIT_SEP=String.fromCharCode(31),a.BYTE_ORDER_MARK="\ufeff",a.BAD_DELIMITERS=["\r","\n",'"',a.BYTE_ORDER_MARK],a.WORKERS_SUPPORTED=!i&&!!e.Worker,a.NODE_STREAM_INPUT=1,a.LocalChunkSize=10485760,a.RemoteChunkSize=5242880,a.DefaultDelimiter=",",a.Parser=m,a.ParserHandle=f,a.NetworkStreamer=l,a.FileStreamer=u,a.StringStreamer=c,a.ReadableStreamStreamer=d,e.jQuery){var o=e.jQuery;o.fn.parse=function(t){var i=t.config||{},r=[];return this.each((function(t){if("INPUT"!==o(this).prop("tagName").toUpperCase()||"file"!==o(this).attr("type").toLowerCase()||!e.FileReader||!this.files||0===this.files.length)return!0;for(var s=0;s<this.files.length;s++)r.push({file:this.files[s],inputElem:this,instanceConfig:o.extend({},i)})})),s(),this;function s(){if(0!==r.length){var e,i,s,h,l=r[0];if(w(t.before)){var u=t.before(l.file,l.inputElem);if("object"==typeof u){if("abort"===u.action)return e="AbortError",i=l.file,s=l.inputElem,h=u.reason,void(w(t.error)&&t.error({name:e},i,s,h));if("skip"===u.action)return void n();"object"==typeof u.config&&(l.instanceConfig=o.extend(l.instanceConfig,u.config))}else if("skip"===u)return void n()}var c=l.instanceConfig.complete;l.instanceConfig.complete=function(t){w(c)&&c(t,l.file,l.inputElem),n()},a.parse(l.file,l.instanceConfig)}else w(t.complete)&&t.complete()}function n(){r.splice(0,1),s()}}}function h(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(t){var e=b(t);e.chunkSize=parseInt(e.chunkSize),t.step||t.chunk||(e.chunkSize=null),this._handle=new f(e),(this._handle.streamer=this)._config=e}.call(this,t),this.parseChunk=function(t,i){if(this.isFirstChunk&&w(this._config.beforeFirstChunk)){var s=this._config.beforeFirstChunk(t);void 0!==s&&(t=s)}this.isFirstChunk=!1,this._halted=!1;var n=this._partialLine+t;this._partialLine="";var o=this._handle.parse(n,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var h=o.meta.cursor;this._finished||(this._partialLine=n.substring(h-this._baseIndex),this._baseIndex=h),o&&o.data&&(this._rowCount+=o.data.length);var l=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(r)e.postMessage({results:o,workerId:a.WORKER_ID,finished:l});else if(w(this._config.chunk)&&!i){if(this._config.chunk(o,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);o=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(o.data),this._completeResults.errors=this._completeResults.errors.concat(o.errors),this._completeResults.meta=o.meta),this._completed||!l||!w(this._config.complete)||o&&o.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),l||o&&o.meta.paused||this._nextChunk(),o}this._halted=!0},this._sendError=function(t){w(this._config.error)?this._config.error(t):r&&this._config.error&&e.postMessage({workerId:a.WORKER_ID,error:t,finished:!1})}}function l(t){var e;(t=t||{}).chunkSize||(t.chunkSize=a.RemoteChunkSize),h.call(this,t),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(t){this._input=t,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(e=new XMLHttpRequest,this._config.withCredentials&&(e.withCredentials=this._config.withCredentials),i||(e.onload=x(this._chunkLoaded,this),e.onerror=x(this._chunkError,this)),e.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var t=this._config.downloadRequestHeaders;for(var r in t)e.setRequestHeader(r,t[r])}if(this._config.chunkSize){var s=this._start+this._config.chunkSize-1;e.setRequestHeader("Range","bytes="+this._start+"-"+s)}try{e.send(this._config.downloadRequestBody)}catch(t){this._chunkError(t.message)}i&&0===e.status&&this._chunkError()}},this._chunkLoaded=function(){4===e.readyState&&(e.status<200||400<=e.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:e.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(t){var e=t.getResponseHeader("Content-Range");return null===e?-1:parseInt(e.substring(e.lastIndexOf("/")+1))}(e),this.parseChunk(e.responseText)))},this._chunkError=function(t){var i=e.statusText||t;this._sendError(new Error(i))}}function u(t){var e,i;(t=t||{}).chunkSize||(t.chunkSize=a.LocalChunkSize),h.call(this,t);var r="undefined"!=typeof FileReader;this.stream=function(t){this._input=t,i=t.slice||t.webkitSlice||t.mozSlice,r?((e=new FileReader).onload=x(this._chunkLoaded,this),e.onerror=x(this._chunkError,this)):e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var t=this._input;if(this._config.chunkSize){var s=Math.min(this._start+this._config.chunkSize,this._input.size);t=i.call(t,this._start,s)}var n=e.readAsText(t,this._config.encoding);r||this._chunkLoaded({target:{result:n}})},this._chunkLoaded=function(t){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(t.target.result)},this._chunkError=function(){this._sendError(e.error)}}function c(t){var e;h.call(this,t=t||{}),this.stream=function(t){return e=t,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var t,i=this._config.chunkSize;return i?(t=e.substring(0,i),e=e.substring(i)):(t=e,e=""),this._finished=!e,this.parseChunk(t)}}}function d(t){h.call(this,t=t||{});var e=[],i=!0,r=!1;this.pause=function(){h.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){h.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(t){this._input=t,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){r&&1===e.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),e.length?this.parseChunk(e.shift()):i=!0},this._streamData=x((function(t){try{e.push("string"==typeof t?t:t.toString(this._config.encoding)),i&&(i=!1,this._checkIsFinished(),this.parseChunk(e.shift()))}catch(t){this._streamError(t)}}),this),this._streamError=x((function(t){this._streamCleanUp(),this._sendError(t)}),this),this._streamEnd=x((function(){this._streamCleanUp(),r=!0,this._streamData("")}),this),this._streamCleanUp=x((function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)}),this)}function f(t){var e,i,r,s=Math.pow(2,53),n=-s,o=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,h=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,l=this,u=0,c=0,d=!1,f=!1,g=[],y={data:[],errors:[],meta:{}};if(w(t.step)){var _=t.step;t.step=function(e){if(y=e,I())T();else{if(T(),0===y.data.length)return;u+=e.data.length,t.preview&&u>t.preview?i.abort():(y.data=y.data[0],_(y,l))}}}function x(e){return"greedy"===t.skipEmptyLines?""===e.join("").trim():1===e.length&&0===e[0].length}function T(){return y&&r&&(A("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+a.DefaultDelimiter+"'"),r=!1),t.skipEmptyLines&&(y.data=y.data.filter((function(t){return!x(t)}))),I()&&function(){if(y)if(Array.isArray(y.data[0])){for(var e=0;I()&&e<y.data.length;e++)y.data[e].forEach(i);y.data.splice(0,1)}else y.data.forEach(i);function i(e,i){w(t.transformHeader)&&(e=t.transformHeader(e,i)),g.push(e)}}(),function(){if(!y||!t.header&&!t.dynamicTyping&&!t.transform)return y;function e(e,i){var r,s=t.header?{}:[];for(r=0;r<e.length;r++){var n=r,a=e[r];t.header&&(n=r>=g.length?"__parsed_extra":g[r]),t.transform&&(a=t.transform(a,n)),a=v(n,a),"__parsed_extra"===n?(s[n]=s[n]||[],s[n].push(a)):s[n]=a}return t.header&&(r>g.length?A("FieldMismatch","TooManyFields","Too many fields: expected "+g.length+" fields but parsed "+r,c+i):r<g.length&&A("FieldMismatch","TooFewFields","Too few fields: expected "+g.length+" fields but parsed "+r,c+i)),s}var i=1;return!y.data.length||Array.isArray(y.data[0])?(y.data=y.data.map(e),i=y.data.length):y.data=e(y.data,0),t.header&&y.meta&&(y.meta.fields=g),c+=i,y}()}function I(){return t.header&&0===g.length}function v(e,i){return r=e,t.dynamicTypingFunction&&void 0===t.dynamicTyping[r]&&(t.dynamicTyping[r]=t.dynamicTypingFunction(r)),!0===(t.dynamicTyping[r]||t.dynamicTyping)?"true"===i||"TRUE"===i||"false"!==i&&"FALSE"!==i&&(function(t){if(o.test(t)){var e=parseFloat(t);if(n<e&&e<s)return!0}return!1}(i)?parseFloat(i):h.test(i)?new Date(i):""===i?null:i):i;var r}function A(t,e,i,r){var s={type:t,code:e,message:i};void 0!==r&&(s.row=r),y.errors.push(s)}this.parse=function(s,n,o){var h=t.quoteChar||'"';if(t.newline||(t.newline=function(t,e){t=t.substring(0,1048576);var i=new RegExp(p(e)+"([^]*?)"+p(e),"gm"),r=(t=t.replace(i,"")).split("\r"),s=t.split("\n"),n=1<s.length&&s[0].length<r[0].length;if(1===r.length||n)return"\n";for(var a=0,o=0;o<r.length;o++)"\n"===r[o][0]&&a++;return a>=r.length/2?"\r\n":"\r"}(s,h)),r=!1,t.delimiter)w(t.delimiter)&&(t.delimiter=t.delimiter(s),y.meta.delimiter=t.delimiter);else{var l=function(e,i,r,s,n){var o,h,l,u;n=n||[",","\t","|",";",a.RECORD_SEP,a.UNIT_SEP];for(var c=0;c<n.length;c++){var d=n[c],f=0,p=0,g=0;l=void 0;for(var y=new m({comments:s,delimiter:d,newline:i,preview:10}).parse(e),_=0;_<y.data.length;_++)if(r&&x(y.data[_]))g++;else{var b=y.data[_].length;p+=b,void 0!==l?0<b&&(f+=Math.abs(b-l),l=b):l=b}0<y.data.length&&(p/=y.data.length-g),(void 0===h||f<=h)&&(void 0===u||u<p)&&1.99<p&&(h=f,o=d,u=p)}return{successful:!!(t.delimiter=o),bestDelimiter:o}}(s,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess);l.successful?t.delimiter=l.bestDelimiter:(r=!0,t.delimiter=a.DefaultDelimiter),y.meta.delimiter=t.delimiter}var u=b(t);return t.preview&&t.header&&u.preview++,e=s,i=new m(u),y=i.parse(e,n,o),T(),d?{meta:{paused:!0}}:y||{meta:{paused:!1}}},this.paused=function(){return d},this.pause=function(){d=!0,i.abort(),e=w(t.chunk)?"":e.substring(i.getCharIndex())},this.resume=function(){l.streamer._halted?(d=!1,l.streamer.parseChunk(e,!0)):setTimeout(l.resume,3)},this.aborted=function(){return f},this.abort=function(){f=!0,i.abort(),y.meta.aborted=!0,w(t.complete)&&t.complete(y),e=""}}function p(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function m(t){var e,i=(t=t||{}).delimiter,r=t.newline,s=t.comments,n=t.step,o=t.preview,h=t.fastMode,l=e=void 0===t.quoteChar||null===t.quoteChar?'"':t.quoteChar;if(void 0!==t.escapeChar&&(l=t.escapeChar),("string"!=typeof i||-1<a.BAD_DELIMITERS.indexOf(i))&&(i=","),s===i)throw new Error("Comment character same as delimiter");!0===s?s="#":("string"!=typeof s||-1<a.BAD_DELIMITERS.indexOf(s))&&(s=!1),"\n"!==r&&"\r"!==r&&"\r\n"!==r&&(r="\n");var u=0,c=!1;this.parse=function(a,d,f){if("string"!=typeof a)throw new Error("Input must be a string");var m=a.length,g=i.length,y=r.length,_=s.length,b=w(n),x=[],T=[],I=[],v=u=0;if(!a)return Z();if(t.header&&!d){var A=a.split(r)[0].split(i),E=[],N={},S=!1;for(var M in A){var k=A[M];w(t.transformHeader)&&(k=t.transformHeader(k,M));var F=k,C=N[k]||0;for(0<C&&(S=!0,F=k+"_"+C),N[k]=C+1;E.includes(F);)F=F+"_"+C;E.push(F)}if(S){var z=a.split(r);z[0]=E.join(i),a=z.join(r)}}if(h||!1!==h&&-1===a.indexOf(e)){for(var U=a.split(r),D=0;D<U.length;D++){if(I=U[D],u+=I.length,D!==U.length-1)u+=r.length;else if(f)return Z();if(!s||I.substring(0,_)!==s){if(b){if(x=[],G(I.split(i)),W(),c)return Z()}else G(I.split(i));if(o&&o<=D)return x=x.slice(0,o),Z(!0)}}return Z()}for(var B=a.indexOf(i,u),O=a.indexOf(r,u),R=new RegExp(p(l)+p(e),"g"),L=a.indexOf(e,u);;)if(a[u]!==e)if(s&&0===I.length&&a.substring(u,u+_)===s){if(-1===O)return Z();u=O+y,O=a.indexOf(r,u),B=a.indexOf(i,u)}else if(-1!==B&&(B<O||-1===O))I.push(a.substring(u,B)),u=B+g,B=a.indexOf(i,u);else{if(-1===O)break;if(I.push(a.substring(u,O)),j(O+y),b&&(W(),c))return Z();if(o&&x.length>=o)return Z(!0)}else for(L=u,u++;;){if(-1===(L=a.indexOf(e,L+1)))return f||T.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:x.length,index:u}),Y();if(L===m-1)return Y(a.substring(u,L).replace(R,e));if(e!==l||a[L+1]!==l){if(e===l||0===L||a[L-1]!==l){-1!==B&&B<L+1&&(B=a.indexOf(i,L+1)),-1!==O&&O<L+1&&(O=a.indexOf(r,L+1));var P=q(-1===O?B:Math.min(B,O));if(a.substr(L+1+P,g)===i){I.push(a.substring(u,L).replace(R,e)),a[u=L+1+P+g]!==e&&(L=a.indexOf(e,u)),B=a.indexOf(i,u),O=a.indexOf(r,u);break}var V=q(O);if(a.substring(L+1+V,L+1+V+y)===r){if(I.push(a.substring(u,L).replace(R,e)),j(L+1+V+y),B=a.indexOf(i,u),L=a.indexOf(e,u),b&&(W(),c))return Z();if(o&&x.length>=o)return Z(!0);break}T.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:x.length,index:u}),L++}}else L++}return Y();function G(t){x.push(t),v=u}function q(t){var e=0;if(-1!==t){var i=a.substring(L+1,t);i&&""===i.trim()&&(e=i.length)}return e}function Y(t){return f||(void 0===t&&(t=a.substring(u)),I.push(t),u=m,G(I),b&&W()),Z()}function j(t){u=t,G(I),I=[],O=a.indexOf(r,u)}function Z(t){return{data:x,errors:T,meta:{delimiter:i,linebreak:r,aborted:c,truncated:!!t,cursor:v+(d||0)}}}function W(){n(Z()),x=[],T=[]}},this.abort=function(){c=!0},this.getCharIndex=function(){return u}}function g(t){var e=t.data,i=s[e.workerId],r=!1;if(e.error)i.userError(e.error,e.file);else if(e.results&&e.results.data){var n={abort:function(){r=!0,y(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:_,resume:_};if(w(i.userStep)){for(var a=0;a<e.results.data.length&&(i.userStep({data:e.results.data[a],errors:e.results.errors,meta:e.results.meta},n),!r);a++);delete e.results}else w(i.userChunk)&&(i.userChunk(e.results,n,e.file),delete e.results)}e.finished&&!r&&y(e.workerId,e.results)}function y(t,e){var i=s[t];w(i.userComplete)&&i.userComplete(e),i.terminate(),delete s[t]}function _(){throw new Error("Not implemented.")}function b(t){if("object"!=typeof t||null===t)return t;var e=Array.isArray(t)?[]:{};for(var i in t)e[i]=b(t[i]);return e}function x(t,e){return function(){t.apply(e,arguments)}}function w(t){return"function"==typeof t}return r&&(e.onmessage=function(t){var i=t.data;if(void 0===a.WORKER_ID&&i&&(a.WORKER_ID=i.workerId),"string"==typeof i.input)e.postMessage({workerId:a.WORKER_ID,results:a.parse(i.input,i.config),finished:!0});else if(e.File&&i.input instanceof File||i.input instanceof Object){var r=a.parse(i.input,i.config);r&&e.postMessage({workerId:a.WORKER_ID,results:r,finished:!0})}}),(l.prototype=Object.create(h.prototype)).constructor=l,(u.prototype=Object.create(h.prototype)).constructor=u,(c.prototype=Object.create(c.prototype)).constructor=c,(d.prototype=Object.create(h.prototype)).constructor=d,a},void 0===(s="function"==typeof i?i.apply(e,r):i)||(t.exports=s)},2861:(t,e,i)=>{var r=i(8287),s=r.Buffer;function n(t,e){for(var i in t)e[i]=t[i]}function a(t,e,i){return s(t,e,i)}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?t.exports=r:(n(r,e),e.Buffer=a),a.prototype=Object.create(s.prototype),n(s,a),a.from=function(t,e,i){if("number"==typeof t)throw new TypeError("Argument must not be a number");return s(t,e,i)},a.alloc=function(t,e,i){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=s(t);return void 0!==e?"string"==typeof i?r.fill(e,i):r.fill(e):r.fill(0),r},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return s(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},4043:(t,e,i)=>{!function(t){t.parser=function(t,e){return new s(t,e)},t.SAXParser=s,t.SAXStream=a,t.createStream=function(t,e){return new a(t,e)},t.MAX_BUFFER_LENGTH=65536;var e,r=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function s(e,i){if(!(this instanceof s))return new s(e,i);var n=this;!function(t){for(var e=0,i=r.length;e<i;e++)t[r[e]]=""}(n),n.q=n.c="",n.bufferCheckPosition=t.MAX_BUFFER_LENGTH,n.opt=i||{},n.opt.lowercase=n.opt.lowercase||n.opt.lowercasetags,n.looseCase=n.opt.lowercase?"toLowerCase":"toUpperCase",n.tags=[],n.closed=n.closedRoot=n.sawRoot=!1,n.tag=n.error=null,n.strict=!!e,n.noscript=!(!e&&!n.opt.noscript),n.state=v.BEGIN,n.strictEntities=n.opt.strictEntities,n.ENTITIES=n.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),n.attribList=[],n.opt.xmlns&&(n.ns=Object.create(c)),n.trackPosition=!1!==n.opt.position,n.trackPosition&&(n.position=n.line=n.column=0),E(n,"onready")}t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(t){function e(){}return e.prototype=t,new e}),Object.keys||(Object.keys=function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);return e}),s.prototype={end:function(){F(this)},write:function(e){var i=this;if(this.error)throw this.error;if(i.closed)return k(i,"Cannot write after close. Assign an onready handler.");if(null===e)return F(i);"object"==typeof e&&(e=e.toString());var s=0,n="";for(;n=P(e,s++),i.c=n,n;)switch(i.trackPosition&&(i.position++,"\n"===n?(i.line++,i.column=0):i.column++),i.state){case v.BEGIN:if(i.state=v.BEGIN_WHITESPACE,"\ufeff"===n)continue;L(i,n);continue;case v.BEGIN_WHITESPACE:L(i,n);continue;case v.TEXT:if(i.sawRoot&&!i.closedRoot){for(var a=s-1;n&&"<"!==n&&"&"!==n;)(n=P(e,s++))&&i.trackPosition&&(i.position++,"\n"===n?(i.line++,i.column=0):i.column++);i.textNode+=e.substring(a,s-1)}"<"!==n||i.sawRoot&&i.closedRoot&&!i.strict?(g(n)||i.sawRoot&&!i.closedRoot||C(i,"Text data outside of root node."),"&"===n?i.state=v.TEXT_ENTITY:i.textNode+=n):(i.state=v.OPEN_WAKA,i.startTagPosition=i.position);continue;case v.SCRIPT:"<"===n?i.state=v.SCRIPT_ENDING:i.script+=n;continue;case v.SCRIPT_ENDING:"/"===n?i.state=v.CLOSE_TAG:(i.script+="<"+n,i.state=v.SCRIPT);continue;case v.OPEN_WAKA:if("!"===n)i.state=v.SGML_DECL,i.sgmlDecl="";else if(g(n));else if(b(d,n))i.state=v.OPEN_TAG,i.tagName=n;else if("/"===n)i.state=v.CLOSE_TAG,i.tagName="";else if("?"===n)i.state=v.PROC_INST,i.procInstName=i.procInstBody="";else{if(C(i,"Unencoded <"),i.startTagPosition+1<i.position){var l=i.position-i.startTagPosition;n=new Array(l).join(" ")+n}i.textNode+="<"+n,i.state=v.TEXT}continue;case v.SGML_DECL:(i.sgmlDecl+n).toUpperCase()===o?(N(i,"onopencdata"),i.state=v.CDATA,i.sgmlDecl="",i.cdata=""):i.sgmlDecl+n==="--"?(i.state=v.COMMENT,i.comment="",i.sgmlDecl=""):(i.sgmlDecl+n).toUpperCase()===h?(i.state=v.DOCTYPE,(i.doctype||i.sawRoot)&&C(i,"Inappropriately located doctype declaration"),i.doctype="",i.sgmlDecl=""):">"===n?(N(i,"onsgmldeclaration",i.sgmlDecl),i.sgmlDecl="",i.state=v.TEXT):y(n)?(i.state=v.SGML_DECL_QUOTED,i.sgmlDecl+=n):i.sgmlDecl+=n;continue;case v.SGML_DECL_QUOTED:n===i.q&&(i.state=v.SGML_DECL,i.q=""),i.sgmlDecl+=n;continue;case v.DOCTYPE:">"===n?(i.state=v.TEXT,N(i,"ondoctype",i.doctype),i.doctype=!0):(i.doctype+=n,"["===n?i.state=v.DOCTYPE_DTD:y(n)&&(i.state=v.DOCTYPE_QUOTED,i.q=n));continue;case v.DOCTYPE_QUOTED:i.doctype+=n,n===i.q&&(i.q="",i.state=v.DOCTYPE);continue;case v.DOCTYPE_DTD:i.doctype+=n,"]"===n?i.state=v.DOCTYPE:y(n)&&(i.state=v.DOCTYPE_DTD_QUOTED,i.q=n);continue;case v.DOCTYPE_DTD_QUOTED:i.doctype+=n,n===i.q&&(i.state=v.DOCTYPE_DTD,i.q="");continue;case v.COMMENT:"-"===n?i.state=v.COMMENT_ENDING:i.comment+=n;continue;case v.COMMENT_ENDING:"-"===n?(i.state=v.COMMENT_ENDED,i.comment=M(i.opt,i.comment),i.comment&&N(i,"oncomment",i.comment),i.comment=""):(i.comment+="-"+n,i.state=v.COMMENT);continue;case v.COMMENT_ENDED:">"!==n?(C(i,"Malformed comment"),i.comment+="--"+n,i.state=v.COMMENT):i.state=v.TEXT;continue;case v.CDATA:"]"===n?i.state=v.CDATA_ENDING:i.cdata+=n;continue;case v.CDATA_ENDING:"]"===n?i.state=v.CDATA_ENDING_2:(i.cdata+="]"+n,i.state=v.CDATA);continue;case v.CDATA_ENDING_2:">"===n?(i.cdata&&N(i,"oncdata",i.cdata),N(i,"onclosecdata"),i.cdata="",i.state=v.TEXT):"]"===n?i.cdata+="]":(i.cdata+="]]"+n,i.state=v.CDATA);continue;case v.PROC_INST:"?"===n?i.state=v.PROC_INST_ENDING:g(n)?i.state=v.PROC_INST_BODY:i.procInstName+=n;continue;case v.PROC_INST_BODY:if(!i.procInstBody&&g(n))continue;"?"===n?i.state=v.PROC_INST_ENDING:i.procInstBody+=n;continue;case v.PROC_INST_ENDING:">"===n?(N(i,"onprocessinginstruction",{name:i.procInstName,body:i.procInstBody}),i.procInstName=i.procInstBody="",i.state=v.TEXT):(i.procInstBody+="?"+n,i.state=v.PROC_INST_BODY);continue;case v.OPEN_TAG:b(f,n)?i.tagName+=n:(z(i),">"===n?B(i):"/"===n?i.state=v.OPEN_TAG_SLASH:(g(n)||C(i,"Invalid character in tag name"),i.state=v.ATTRIB));continue;case v.OPEN_TAG_SLASH:">"===n?(B(i,!0),O(i)):(C(i,"Forward-slash in opening tag not followed by >"),i.state=v.ATTRIB);continue;case v.ATTRIB:if(g(n))continue;">"===n?B(i):"/"===n?i.state=v.OPEN_TAG_SLASH:b(d,n)?(i.attribName=n,i.attribValue="",i.state=v.ATTRIB_NAME):C(i,"Invalid attribute name");continue;case v.ATTRIB_NAME:"="===n?i.state=v.ATTRIB_VALUE:">"===n?(C(i,"Attribute without value"),i.attribValue=i.attribName,D(i),B(i)):g(n)?i.state=v.ATTRIB_NAME_SAW_WHITE:b(f,n)?i.attribName+=n:C(i,"Invalid attribute name");continue;case v.ATTRIB_NAME_SAW_WHITE:if("="===n)i.state=v.ATTRIB_VALUE;else{if(g(n))continue;C(i,"Attribute without value"),i.tag.attributes[i.attribName]="",i.attribValue="",N(i,"onattribute",{name:i.attribName,value:""}),i.attribName="",">"===n?B(i):b(d,n)?(i.attribName=n,i.state=v.ATTRIB_NAME):(C(i,"Invalid attribute name"),i.state=v.ATTRIB)}continue;case v.ATTRIB_VALUE:if(g(n))continue;y(n)?(i.q=n,i.state=v.ATTRIB_VALUE_QUOTED):(C(i,"Unquoted attribute value"),i.state=v.ATTRIB_VALUE_UNQUOTED,i.attribValue=n);continue;case v.ATTRIB_VALUE_QUOTED:if(n!==i.q){"&"===n?i.state=v.ATTRIB_VALUE_ENTITY_Q:i.attribValue+=n;continue}D(i),i.q="",i.state=v.ATTRIB_VALUE_CLOSED;continue;case v.ATTRIB_VALUE_CLOSED:g(n)?i.state=v.ATTRIB:">"===n?B(i):"/"===n?i.state=v.OPEN_TAG_SLASH:b(d,n)?(C(i,"No whitespace between attributes"),i.attribName=n,i.attribValue="",i.state=v.ATTRIB_NAME):C(i,"Invalid attribute name");continue;case v.ATTRIB_VALUE_UNQUOTED:if(!_(n)){"&"===n?i.state=v.ATTRIB_VALUE_ENTITY_U:i.attribValue+=n;continue}D(i),">"===n?B(i):i.state=v.ATTRIB;continue;case v.CLOSE_TAG:if(i.tagName)">"===n?O(i):b(f,n)?i.tagName+=n:i.script?(i.script+="</"+i.tagName,i.tagName="",i.state=v.SCRIPT):(g(n)||C(i,"Invalid tagname in closing tag"),i.state=v.CLOSE_TAG_SAW_WHITE);else{if(g(n))continue;x(d,n)?i.script?(i.script+="</"+n,i.state=v.SCRIPT):C(i,"Invalid tagname in closing tag."):i.tagName=n}continue;case v.CLOSE_TAG_SAW_WHITE:if(g(n))continue;">"===n?O(i):C(i,"Invalid characters in closing tag");continue;case v.TEXT_ENTITY:case v.ATTRIB_VALUE_ENTITY_Q:case v.ATTRIB_VALUE_ENTITY_U:var u,c;switch(i.state){case v.TEXT_ENTITY:u=v.TEXT,c="textNode";break;case v.ATTRIB_VALUE_ENTITY_Q:u=v.ATTRIB_VALUE_QUOTED,c="attribValue";break;case v.ATTRIB_VALUE_ENTITY_U:u=v.ATTRIB_VALUE_UNQUOTED,c="attribValue"}if(";"===n)if(i.opt.unparsedEntities){var w=R(i);i.entity="",i.state=u,i.write(w)}else i[c]+=R(i),i.entity="",i.state=u;else b(i.entity.length?m:p,n)?i.entity+=n:(C(i,"Invalid character in entity name"),i[c]+="&"+i.entity+n,i.entity="",i.state=u);continue;default:throw new Error(i,"Unknown state: "+i.state)}i.position>=i.bufferCheckPosition&&function(e){for(var i=Math.max(t.MAX_BUFFER_LENGTH,10),s=0,n=0,a=r.length;n<a;n++){var o=e[r[n]].length;if(o>i)switch(r[n]){case"textNode":S(e);break;case"cdata":N(e,"oncdata",e.cdata),e.cdata="";break;case"script":N(e,"onscript",e.script),e.script="";break;default:k(e,"Max buffer length exceeded: "+r[n])}s=Math.max(s,o)}var h=t.MAX_BUFFER_LENGTH-s;e.bufferCheckPosition=h+e.position}(i);return i},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var t;S(t=this),""!==t.cdata&&(N(t,"oncdata",t.cdata),t.cdata=""),""!==t.script&&(N(t,"onscript",t.script),t.script="")}};try{e=i(8277).Stream}catch(t){e=function(){}}e||(e=function(){});var n=t.EVENTS.filter((function(t){return"error"!==t&&"end"!==t}));function a(t,i){if(!(this instanceof a))return new a(t,i);e.apply(this),this._parser=new s(t,i),this.writable=!0,this.readable=!0;var r=this;this._parser.onend=function(){r.emit("end")},this._parser.onerror=function(t){r.emit("error",t),r._parser.error=null},this._decoder=null,n.forEach((function(t){Object.defineProperty(r,"on"+t,{get:function(){return r._parser["on"+t]},set:function(e){if(!e)return r.removeAllListeners(t),r._parser["on"+t]=e,e;r.on(t,e)},enumerable:!0,configurable:!1})}))}a.prototype=Object.create(e.prototype,{constructor:{value:a}}),a.prototype.write=function(t){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(t)){if(!this._decoder){var e=i(3141).I;this._decoder=new e("utf8")}t=this._decoder.write(t)}return this._parser.write(t.toString()),this.emit("data",t),!0},a.prototype.end=function(t){return t&&t.length&&this.write(t),this._parser.end(),!0},a.prototype.on=function(t,i){var r=this;return r._parser["on"+t]||-1===n.indexOf(t)||(r._parser["on"+t]=function(){var e=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);e.splice(0,0,t),r.emit.apply(r,e)}),e.prototype.on.call(r,t,i)};var o="[CDATA[",h="DOCTYPE",l="http://www.w3.org/XML/1998/namespace",u="http://www.w3.org/2000/xmlns/",c={xml:l,xmlns:u},d=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,f=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,p=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,m=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function g(t){return" "===t||"\n"===t||"\r"===t||"\t"===t}function y(t){return'"'===t||"'"===t}function _(t){return">"===t||g(t)}function b(t,e){return t.test(e)}function x(t,e){return!b(t,e)}var w,T,I,v=0;for(var A in t.STATE={BEGIN:v++,BEGIN_WHITESPACE:v++,TEXT:v++,TEXT_ENTITY:v++,OPEN_WAKA:v++,SGML_DECL:v++,SGML_DECL_QUOTED:v++,DOCTYPE:v++,DOCTYPE_QUOTED:v++,DOCTYPE_DTD:v++,DOCTYPE_DTD_QUOTED:v++,COMMENT_STARTING:v++,COMMENT:v++,COMMENT_ENDING:v++,COMMENT_ENDED:v++,CDATA:v++,CDATA_ENDING:v++,CDATA_ENDING_2:v++,PROC_INST:v++,PROC_INST_BODY:v++,PROC_INST_ENDING:v++,OPEN_TAG:v++,OPEN_TAG_SLASH:v++,ATTRIB:v++,ATTRIB_NAME:v++,ATTRIB_NAME_SAW_WHITE:v++,ATTRIB_VALUE:v++,ATTRIB_VALUE_QUOTED:v++,ATTRIB_VALUE_CLOSED:v++,ATTRIB_VALUE_UNQUOTED:v++,ATTRIB_VALUE_ENTITY_Q:v++,ATTRIB_VALUE_ENTITY_U:v++,CLOSE_TAG:v++,CLOSE_TAG_SAW_WHITE:v++,SCRIPT:v++,SCRIPT_ENDING:v++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach((function(e){var i=t.ENTITIES[e],r="number"==typeof i?String.fromCharCode(i):i;t.ENTITIES[e]=r})),t.STATE)t.STATE[t.STATE[A]]=A;function E(t,e,i){t[e]&&t[e](i)}function N(t,e,i){t.textNode&&S(t),E(t,e,i)}function S(t){t.textNode=M(t.opt,t.textNode),t.textNode&&E(t,"ontext",t.textNode),t.textNode=""}function M(t,e){return t.trim&&(e=e.trim()),t.normalize&&(e=e.replace(/\s+/g," ")),e}function k(t,e){return S(t),t.trackPosition&&(e+="\nLine: "+t.line+"\nColumn: "+t.column+"\nChar: "+t.c),e=new Error(e),t.error=e,E(t,"onerror",e),t}function F(t){return t.sawRoot&&!t.closedRoot&&C(t,"Unclosed root tag"),t.state!==v.BEGIN&&t.state!==v.BEGIN_WHITESPACE&&t.state!==v.TEXT&&k(t,"Unexpected end"),S(t),t.c="",t.closed=!0,E(t,"onend"),s.call(t,t.strict,t.opt),t}function C(t,e){if("object"!=typeof t||!(t instanceof s))throw new Error("bad call to strictFail");t.strict&&k(t,e)}function z(t){t.strict||(t.tagName=t.tagName[t.looseCase]());var e=t.tags[t.tags.length-1]||t,i=t.tag={name:t.tagName,attributes:{}};t.opt.xmlns&&(i.ns=e.ns),t.attribList.length=0,N(t,"onopentagstart",i)}function U(t,e){var i=t.indexOf(":")<0?["",t]:t.split(":"),r=i[0],s=i[1];return e&&"xmlns"===t&&(r="xmlns",s=""),{prefix:r,local:s}}function D(t){if(t.strict||(t.attribName=t.attribName[t.looseCase]()),-1!==t.attribList.indexOf(t.attribName)||t.tag.attributes.hasOwnProperty(t.attribName))t.attribName=t.attribValue="";else{if(t.opt.xmlns){var e=U(t.attribName,!0),i=e.prefix,r=e.local;if("xmlns"===i)if("xml"===r&&t.attribValue!==l)C(t,"xml: prefix must be bound to "+l+"\nActual: "+t.attribValue);else if("xmlns"===r&&t.attribValue!==u)C(t,"xmlns: prefix must be bound to "+u+"\nActual: "+t.attribValue);else{var s=t.tag,n=t.tags[t.tags.length-1]||t;s.ns===n.ns&&(s.ns=Object.create(n.ns)),s.ns[r]=t.attribValue}t.attribList.push([t.attribName,t.attribValue])}else t.tag.attributes[t.attribName]=t.attribValue,N(t,"onattribute",{name:t.attribName,value:t.attribValue});t.attribName=t.attribValue=""}}function B(t,e){if(t.opt.xmlns){var i=t.tag,r=U(t.tagName);i.prefix=r.prefix,i.local=r.local,i.uri=i.ns[r.prefix]||"",i.prefix&&!i.uri&&(C(t,"Unbound namespace prefix: "+JSON.stringify(t.tagName)),i.uri=r.prefix);var s=t.tags[t.tags.length-1]||t;i.ns&&s.ns!==i.ns&&Object.keys(i.ns).forEach((function(e){N(t,"onopennamespace",{prefix:e,uri:i.ns[e]})}));for(var n=0,a=t.attribList.length;n<a;n++){var o=t.attribList[n],h=o[0],l=o[1],u=U(h,!0),c=u.prefix,d=u.local,f=""===c?"":i.ns[c]||"",p={name:h,value:l,prefix:c,local:d,uri:f};c&&"xmlns"!==c&&!f&&(C(t,"Unbound namespace prefix: "+JSON.stringify(c)),p.uri=c),t.tag.attributes[h]=p,N(t,"onattribute",p)}t.attribList.length=0}t.tag.isSelfClosing=!!e,t.sawRoot=!0,t.tags.push(t.tag),N(t,"onopentag",t.tag),e||(t.noscript||"script"!==t.tagName.toLowerCase()?t.state=v.TEXT:t.state=v.SCRIPT,t.tag=null,t.tagName=""),t.attribName=t.attribValue="",t.attribList.length=0}function O(t){if(!t.tagName)return C(t,"Weird empty close tag."),t.textNode+="</>",void(t.state=v.TEXT);if(t.script){if("script"!==t.tagName)return t.script+="</"+t.tagName+">",t.tagName="",void(t.state=v.SCRIPT);N(t,"onscript",t.script),t.script=""}var e=t.tags.length,i=t.tagName;t.strict||(i=i[t.looseCase]());for(var r=i;e--;){if(t.tags[e].name===r)break;C(t,"Unexpected close tag")}if(e<0)return C(t,"Unmatched closing tag: "+t.tagName),t.textNode+="</"+t.tagName+">",void(t.state=v.TEXT);t.tagName=i;for(var s=t.tags.length;s-- >e;){var n=t.tag=t.tags.pop();t.tagName=t.tag.name,N(t,"onclosetag",t.tagName);var a={};for(var o in n.ns)a[o]=n.ns[o];var h=t.tags[t.tags.length-1]||t;t.opt.xmlns&&n.ns!==h.ns&&Object.keys(n.ns).forEach((function(e){var i=n.ns[e];N(t,"onclosenamespace",{prefix:e,uri:i})}))}0===e&&(t.closedRoot=!0),t.tagName=t.attribValue=t.attribName="",t.attribList.length=0,t.state=v.TEXT}function R(t){var e,i=t.entity,r=i.toLowerCase(),s="";return t.ENTITIES[i]?t.ENTITIES[i]:t.ENTITIES[r]?t.ENTITIES[r]:("#"===(i=r).charAt(0)&&("x"===i.charAt(1)?(i=i.slice(2),s=(e=parseInt(i,16)).toString(16)):(i=i.slice(1),s=(e=parseInt(i,10)).toString(10))),i=i.replace(/^0+/,""),isNaN(e)||s.toLowerCase()!==i?(C(t,"Invalid character entity"),"&"+t.entity+";"):String.fromCodePoint(e))}function L(t,e){"<"===e?(t.state=v.OPEN_WAKA,t.startTagPosition=t.position):g(e)||(C(t,"Non-whitespace before first tag."),t.textNode=e,t.state=v.TEXT)}function P(t,e){var i="";return e<t.length&&(i=t.charAt(e)),i}v=t.STATE,String.fromCodePoint||(w=String.fromCharCode,T=Math.floor,I=function(){var t,e,i=[],r=-1,s=arguments.length;if(!s)return"";for(var n="";++r<s;){var a=Number(arguments[r]);if(!isFinite(a)||a<0||a>1114111||T(a)!==a)throw RangeError("Invalid code point: "+a);a<=65535?i.push(a):(t=55296+((a-=65536)>>10),e=a%1024+56320,i.push(t,e)),(r+1===s||i.length>16384)&&(n+=w.apply(null,i),i.length=0)}return n},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:I,configurable:!0,writable:!0}):String.fromCodePoint=I)}(e)},3141:(t,e,i)=>{"use strict";var r=i(2861).Buffer,s=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(r.isEncoding===s||!s(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=h,this.end=l,e=4;break;case"utf8":this.fillLast=o,e=4;break;case"base64":this.text=u,this.end=c,e=3;break;default:return this.write=d,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function a(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function o(t){var e=this.lastTotal-this.lastNeed,i=function(t,e){if(128!=(192&e[0]))return t.lastNeed=0,"";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,""}}(this,t);return void 0!==i?i:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function h(t,e){if((t.length-e)%2==0){var i=t.toString("utf16le",e);if(i){var r=i.charCodeAt(i.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],i.slice(0,-1)}return i}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function l(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var i=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,i)}return e}function u(t,e){var i=(t.length-e)%3;return 0===i?t.toString("base64",e):(this.lastNeed=3-i,this.lastTotal=3,1===i?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-i))}function c(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function d(t){return t.toString(this.encoding)}function f(t){return t&&t.length?this.write(t):""}e.I=n,n.prototype.write=function(t){if(0===t.length)return"";var e,i;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<t.length?e?e+this.text(t,i):this.text(t,i):e||""},n.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"":e},n.prototype.text=function(t,e){var i=function(t,e,i){var r=e.length-1;if(r<i)return 0;var s=a(e[r]);if(s>=0)return s>0&&(t.lastNeed=s-1),s;if(--r<i||-2===s)return 0;if(s=a(e[r]),s>=0)return s>0&&(t.lastNeed=s-2),s;if(--r<i||-2===s)return 0;if(s=a(e[r]),s>=0)return s>0&&(2===s?s=0:t.lastNeed=s-3),s;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=i;var r=t.length-(i-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},n.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},8277:()=>{},4419:(t,e,i)=>{"use strict";var r=i(5891),s=Uint8Array,n=Uint16Array,a=Uint32Array,o=new s([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),h=new s([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),l=new s([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),u=function(t,e){for(var i=new n(31),r=0;r<31;++r)i[r]=e+=1<<t[r-1];var s=new a(i[30]);for(r=1;r<30;++r)for(var o=i[r];o<i[r+1];++o)s[o]=o-i[r]<<5|r;return[i,s]},c=u(o,2),d=c[0],f=c[1];d[28]=258,f[258]=28;for(var p=u(h,0),m=p[0],g=p[1],y=new n(32768),_=0;_<32768;++_){var b=(43690&_)>>>1|(21845&_)<<1;b=(61680&(b=(52428&b)>>>2|(13107&b)<<2))>>>4|(3855&b)<<4,y[_]=((65280&b)>>>8|(255&b)<<8)>>>1}var x=function(t,e,i){for(var r=t.length,s=0,a=new n(e);s<r;++s)t[s]&&++a[t[s]-1];var o,h=new n(e);for(s=0;s<e;++s)h[s]=h[s-1]+a[s-1]<<1;if(i){o=new n(1<<e);var l=15-e;for(s=0;s<r;++s)if(t[s])for(var u=s<<4|t[s],c=e-t[s],d=h[t[s]-1]++<<c,f=d|(1<<c)-1;d<=f;++d)o[y[d]>>>l]=u}else for(o=new n(r),s=0;s<r;++s)t[s]&&(o[s]=y[h[t[s]-1]++]>>>15-t[s]);return o},w=new s(288);for(_=0;_<144;++_)w[_]=8;for(_=144;_<256;++_)w[_]=9;for(_=256;_<280;++_)w[_]=7;for(_=280;_<288;++_)w[_]=8;var T=new s(32);for(_=0;_<32;++_)T[_]=5;var I=x(w,9,0),v=x(w,9,1),A=x(T,5,0),E=x(T,5,1),N=function(t){for(var e=t[0],i=1;i<t.length;++i)t[i]>e&&(e=t[i]);return e},S=function(t,e,i){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(7&e)&i},M=function(t,e){var i=e/8|0;return(t[i]|t[i+1]<<8|t[i+2]<<16)>>(7&e)},k=function(t){return(t+7)/8|0},F=function(t,e,i){(null==e||e<0)&&(e=0),(null==i||i>t.length)&&(i=t.length);var r=new(2==t.BYTES_PER_ELEMENT?n:4==t.BYTES_PER_ELEMENT?a:s)(i-e);return r.set(t.subarray(e,i)),r};e.FlateErrorCode={UnexpectedEOF:0,InvalidBlockType:1,InvalidLengthLiteral:2,InvalidDistance:3,StreamFinished:4,NoStreamHandler:5,InvalidHeader:6,NoCallback:7,InvalidUTF8:8,ExtraFieldTooLong:9,InvalidDate:10,FilenameTooLong:11,StreamFinishing:12,InvalidZipData:13,UnknownCompressionMethod:14};var C=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],z=function(t,e,i){var r=new Error(e||C[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,z),!i)throw r;return r},U=function(t,e,i){var r=t.length;if(!r||i&&i.f&&!i.l)return e||new s(0);var n=!e||i,a=!i||i.i;i||(i={}),e||(e=new s(3*r));var u=function(t){var i=e.length;if(t>i){var r=new s(Math.max(2*i,t));r.set(e),e=r}},c=i.f||0,f=i.p||0,p=i.b||0,g=i.l,y=i.d,_=i.m,b=i.n,w=8*r;do{if(!g){c=S(t,f,1);var T=S(t,f+1,3);if(f+=3,!T){var I=t[(G=k(f)+4)-4]|t[G-3]<<8,A=G+I;if(A>r){a&&z(0);break}n&&u(p+I),e.set(t.subarray(G,A),p),i.b=p+=I,i.p=f=8*A,i.f=c;continue}if(1==T)g=v,y=E,_=9,b=5;else if(2==T){var C=S(t,f,31)+257,U=S(t,f+10,15)+4,D=C+S(t,f+5,31)+1;f+=14;for(var B=new s(D),O=new s(19),R=0;R<U;++R)O[l[R]]=S(t,f+3*R,7);f+=3*U;var L=N(O),P=(1<<L)-1,V=x(O,L,1);for(R=0;R<D;){var G,q=V[S(t,f,P)];if(f+=15&q,(G=q>>>4)<16)B[R++]=G;else{var Y=0,j=0;for(16==G?(j=3+S(t,f,3),f+=2,Y=B[R-1]):17==G?(j=3+S(t,f,7),f+=3):18==G&&(j=11+S(t,f,127),f+=7);j--;)B[R++]=Y}}var Z=B.subarray(0,C),W=B.subarray(C);_=N(Z),b=N(W),g=x(Z,_,1),y=x(W,b,1)}else z(1);if(f>w){a&&z(0);break}}n&&u(p+131072);for(var H=(1<<_)-1,X=(1<<b)-1,$=f;;$=f){var K=(Y=g[M(t,f)&H])>>>4;if((f+=15&Y)>w){a&&z(0);break}if(Y||z(2),K<256)e[p++]=K;else{if(256==K){$=f,g=null;break}var Q=K-254;if(K>264){var J=o[R=K-257];Q=S(t,f,(1<<J)-1)+d[R],f+=J}var tt=y[M(t,f)&X],et=tt>>>4;tt||z(3),f+=15&tt;W=m[et];if(et>3){J=h[et];W+=M(t,f)&(1<<J)-1,f+=J}if(f>w){a&&z(0);break}n&&u(p+131072);for(var it=p+Q;p<it;p+=4)e[p]=e[p-W],e[p+1]=e[p+1-W],e[p+2]=e[p+2-W],e[p+3]=e[p+3-W];p=it}}i.l=g,i.p=$,i.b=p,i.f=c,g&&(c=1,i.m=_,i.d=y,i.n=b)}while(!c);return p==e.length?e:F(e,0,p)},D=function(t,e,i){i<<=7&e;var r=e/8|0;t[r]|=i,t[r+1]|=i>>>8},B=function(t,e,i){i<<=7&e;var r=e/8|0;t[r]|=i,t[r+1]|=i>>>8,t[r+2]|=i>>>16},O=function(t,e){for(var i=[],r=0;r<t.length;++r)t[r]&&i.push({s:r,f:t[r]});var a=i.length,o=i.slice();if(!a)return[Y,0];if(1==a){var h=new s(i[0].s+1);return h[i[0].s]=1,[h,1]}i.sort((function(t,e){return t.f-e.f})),i.push({s:-1,f:25001});var l=i[0],u=i[1],c=0,d=1,f=2;for(i[0]={s:-1,f:l.f+u.f,l,r:u};d!=a-1;)l=i[i[c].f<i[f].f?c++:f++],u=i[c!=d&&i[c].f<i[f].f?c++:f++],i[d++]={s:-1,f:l.f+u.f,l,r:u};var p=o[0].s;for(r=1;r<a;++r)o[r].s>p&&(p=o[r].s);var m=new n(p+1),g=R(i[d-1],m,0);if(g>e){r=0;var y=0,_=g-e,b=1<<_;for(o.sort((function(t,e){return m[e.s]-m[t.s]||t.f-e.f}));r<a;++r){var x=o[r].s;if(!(m[x]>e))break;y+=b-(1<<g-m[x]),m[x]=e}for(y>>>=_;y>0;){var w=o[r].s;m[w]<e?y-=1<<e-m[w]++-1:++r}for(;r>=0&&y;--r){var T=o[r].s;m[T]==e&&(--m[T],++y)}g=e}return[new s(m),g]},R=function(t,e,i){return-1==t.s?Math.max(R(t.l,e,i+1),R(t.r,e,i+1)):e[t.s]=i},L=function(t){for(var e=t.length;e&&!t[--e];);for(var i=new n(++e),r=0,s=t[0],a=1,o=function(t){i[r++]=t},h=1;h<=e;++h)if(t[h]==s&&h!=e)++a;else{if(!s&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(s),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(s);a=1,s=t[h]}return[i.subarray(0,r),e]},P=function(t,e){for(var i=0,r=0;r<e.length;++r)i+=t[r]*e[r];return i},V=function(t,e,i){var r=i.length,s=k(e+2);t[s]=255&r,t[s+1]=r>>>8,t[s+2]=255^t[s],t[s+3]=255^t[s+1];for(var n=0;n<r;++n)t[s+n+4]=i[n];return 8*(s+4+r)},G=function(t,e,i,r,s,a,u,c,d,f,p){D(e,p++,i),++s[256];for(var m=O(s,15),g=m[0],y=m[1],_=O(a,15),b=_[0],v=_[1],E=L(g),N=E[0],S=E[1],M=L(b),k=M[0],F=M[1],C=new n(19),z=0;z<N.length;++z)C[31&N[z]]++;for(z=0;z<k.length;++z)C[31&k[z]]++;for(var U=O(C,7),R=U[0],G=U[1],q=19;q>4&&!R[l[q-1]];--q);var Y,j,Z,W,H=f+5<<3,X=P(s,w)+P(a,T)+u,$=P(s,g)+P(a,b)+u+14+3*q+P(C,R)+(2*C[16]+3*C[17]+7*C[18]);if(H<=X&&H<=$)return V(e,p,t.subarray(d,d+f));if(D(e,p,1+($<X)),p+=2,$<X){Y=x(g,y,0),j=g,Z=x(b,v,0),W=b;var K=x(R,G,0);D(e,p,S-257),D(e,p+5,F-1),D(e,p+10,q-4),p+=14;for(z=0;z<q;++z)D(e,p+3*z,R[l[z]]);p+=3*q;for(var Q=[N,k],J=0;J<2;++J){var tt=Q[J];for(z=0;z<tt.length;++z){var et=31&tt[z];D(e,p,K[et]),p+=R[et],et>15&&(D(e,p,tt[z]>>>5&127),p+=tt[z]>>>12)}}}else Y=I,j=w,Z=A,W=T;for(z=0;z<c;++z)if(r[z]>255){et=r[z]>>>18&31;B(e,p,Y[et+257]),p+=j[et+257],et>7&&(D(e,p,r[z]>>>23&31),p+=o[et]);var it=31&r[z];B(e,p,Z[it]),p+=W[it],it>3&&(B(e,p,r[z]>>>5&8191),p+=h[it])}else B(e,p,Y[r[z]]),p+=j[r[z]];return B(e,p,Y[256]),p+j[256]},q=new a([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Y=new s(0),j=function(t,e,i,r,l,u){var c=t.length,d=new s(r+c+5*(1+Math.ceil(c/7e3))+l),p=d.subarray(r,d.length-l),m=0;if(!e||c<8)for(var y=0;y<=c;y+=65535){var _=y+65535;_>=c&&(p[m>>3]=u),m=V(p,m+1,t.subarray(y,_))}else{for(var b=q[e-1],x=b>>>13,w=8191&b,T=(1<<i)-1,I=new n(32768),v=new n(T+1),A=Math.ceil(i/3),E=2*A,N=function(e){return(t[e]^t[e+1]<<A^t[e+2]<<E)&T},S=new a(25e3),M=new n(288),C=new n(32),z=0,U=0,D=(y=0,0),B=0,O=0;y<c;++y){var R=N(y),L=32767&y,P=v[R];if(I[L]=P,v[R]=L,B<=y){var j=c-y;if((z>7e3||D>24576)&&j>423){m=G(t,p,0,S,M,C,U,D,O,y-O,m),D=z=U=0,O=y;for(var Z=0;Z<286;++Z)M[Z]=0;for(Z=0;Z<30;++Z)C[Z]=0}var W=2,H=0,X=w,$=L-P&32767;if(j>2&&R==N(y-$))for(var K=Math.min(x,j)-1,Q=Math.min(32767,y),J=Math.min(258,j);$<=Q&&--X&&L!=P;){if(t[y+W]==t[y+W-$]){for(var tt=0;tt<J&&t[y+tt]==t[y+tt-$];++tt);if(tt>W){if(W=tt,H=$,tt>K)break;var et=Math.min($,tt-2),it=0;for(Z=0;Z<et;++Z){var rt=y-$+Z+32768&32767,st=rt-I[rt]+32768&32767;st>it&&(it=st,P=rt)}}}$+=(L=P)-(P=I[L])+32768&32767}if(H){S[D++]=268435456|f[W]<<18|g[H];var nt=31&f[W],at=31&g[H];U+=o[nt]+h[at],++M[257+nt],++C[at],B=y+W,++z}else S[D++]=t[y],++M[t[y]]}}m=G(t,p,u,S,M,C,U,D,O,y-O,m),!u&&7&m&&(m=V(p,m+1,Y))}return F(d,0,r+k(m)+l)},Z=function(){for(var t=new Int32Array(256),e=0;e<256;++e){for(var i=e,r=9;--r;)i=(1&i&&-306674912)^i>>>1;t[e]=i}return t}(),W=function(){var t=-1;return{p:function(e){for(var i=t,r=0;r<e.length;++r)i=Z[255&i^e[r]]^i>>>8;t=i},d:function(){return~t}}},H=function(){var t=1,e=0;return{p:function(i){for(var r=t,s=e,n=0|i.length,a=0;a!=n;){for(var o=Math.min(a+2655,n);a<o;++a)s+=r+=i[a];r=(65535&r)+15*(r>>16),s=(65535&s)+15*(s>>16)}t=r,e=s},d:function(){return(255&(t%=65521))<<24|t>>>8<<16|(255&(e%=65521))<<8|e>>>8}}},X=function(t,e,i,r,s){return j(t,null==e.level?6:e.level,null==e.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):12+e.mem,i,r,!s)},$=function(t,e){var i={};for(var r in t)i[r]=t[r];for(var r in e)i[r]=e[r];return i},K=function(t,e,i){for(var r=t(),s=t.toString(),n=s.slice(s.indexOf("[")+1,s.lastIndexOf("]")).replace(/\s+/g,"").split(","),a=0;a<r.length;++a){var o=r[a],h=n[a];if("function"==typeof o){e+=";"+h+"=";var l=o.toString();if(o.prototype)if(-1!=l.indexOf("[native code]")){var u=l.indexOf(" ",8)+1;e+=l.slice(u,l.indexOf("(",u))}else for(var c in e+=l,o.prototype)e+=";"+h+".prototype."+c+"="+o.prototype[c].toString();else e+=l}else i[h]=o}return[e,i]},Q=[],J=function(t,e,i,s){var n;if(!Q[i]){for(var a="",o={},h=t.length-1,l=0;l<h;++l)a=(n=K(t[l],a,o))[0],o=n[1];Q[i]=K(t[h],a,o)}var u=$({},Q[i][1]);return r.default(Q[i][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+e.toString()+"}",i,u,function(t){var e=[];for(var i in t)t[i].buffer&&e.push((t[i]=new t[i].constructor(t[i])).buffer);return e}(u),s)},tt=function(){return[s,n,a,o,h,l,d,m,v,E,y,C,x,N,S,M,k,F,z,U,Mt,at,ot]},et=function(){return[s,n,a,o,h,l,f,g,I,w,A,T,y,q,Y,x,D,B,O,R,L,P,V,G,k,F,j,X,At,at]},it=function(){return[mt,_t,pt,W,Z]},rt=function(){return[gt,yt]},st=function(){return[bt,pt,H]},nt=function(){return[xt]},at=function(t){return postMessage(t,[t.buffer])},ot=function(t){return t&&t.size&&new s(t.size)},ht=function(t,e,i,r,s,n){var a=J(i,r,s,(function(t,e){a.terminate(),n(t,e)}));return a.postMessage([t,e],e.consume?[t.buffer]:[]),function(){a.terminate()}},lt=function(t){return t.ondata=function(t,e){return postMessage([t,e],[t.buffer])},function(e){return t.push(e.data[0],e.data[1])}},ut=function(t,e,i,r,s){var n,a=J(t,r,s,(function(t,i){t?(a.terminate(),e.ondata.call(e,t)):(i[1]&&a.terminate(),e.ondata.call(e,t,i[0],i[1]))}));a.postMessage(i),e.push=function(t,i){e.ondata||z(5),n&&e.ondata(z(4,0,1),null,!!i),a.postMessage([t,n=i],[t.buffer])},e.terminate=function(){a.terminate()}},ct=function(t,e){return t[e]|t[e+1]<<8},dt=function(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0},ft=function(t,e){return dt(t,e)+4294967296*dt(t,e+4)},pt=function(t,e,i){for(;i;++e)t[e]=i,i>>>=8},mt=function(t,e){var i=e.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=e.level<2?4:9==e.level?2:0,t[9]=3,0!=e.mtime&&pt(t,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),i){t[3]=8;for(var r=0;r<=i.length;++r)t[r+10]=i.charCodeAt(r)}},gt=function(t){31==t[0]&&139==t[1]&&8==t[2]||z(6,"invalid gzip data");var e=t[3],i=10;4&e&&(i+=t[10]|2+(t[11]<<8));for(var r=(e>>3&1)+(e>>4&1);r>0;r-=!t[i++]);return i+(2&e)},yt=function(t){var e=t.length;return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0},_t=function(t){return 10+(t.filename&&t.filename.length+1||0)},bt=function(t,e){var i=e.level,r=0==i?0:i<6?1:9==i?3:2;t[0]=120,t[1]=r<<6|(r?32-2*r:1)},xt=function(t){(8!=(15&t[0])||t[0]>>>4>7||(t[0]<<8|t[1])%31)&&z(6,"invalid zlib data"),32&t[1]&&z(6,"invalid zlib data: preset dictionaries not supported")};function wt(t,e){return e||"function"!=typeof t||(e=t,t={}),this.ondata=e,t}var Tt=function(){function t(t,e){e||"function"!=typeof t||(e=t,t={}),this.ondata=e,this.o=t||{}}return t.prototype.p=function(t,e){this.ondata(X(t,this.o,0,0,!e),e)},t.prototype.push=function(t,e){this.ondata||z(5),this.d&&z(4),this.d=e,this.p(t,e||!1)},t}();e.Deflate=Tt;var It=function(){return function(t,e){ut([et,function(){return[lt,Tt]}],this,wt.call(this,t,e),(function(t){var e=new Tt(t.data);onmessage=lt(e)}),6)}}();function vt(t,e,i){return i||(i=e,e={}),"function"!=typeof i&&z(7),ht(t,e,[et],(function(t){return at(At(t.data[0],t.data[1]))}),0,i)}function At(t,e){return X(t,e||{},0,0)}e.AsyncDeflate=It,e.deflate=vt,e.deflateSync=At;var Et=function(){function t(t){this.s={},this.p=new s(0),this.ondata=t}return t.prototype.e=function(t){this.ondata||z(5),this.d&&z(4);var e=this.p.length,i=new s(e+t.length);i.set(this.p),i.set(t,e),this.p=i},t.prototype.c=function(t){this.d=this.s.i=t||!1;var e=this.s.b,i=U(this.p,this.o,this.s);this.ondata(F(i,e,this.s.b),this.d),this.o=F(i,this.s.b-32768),this.s.b=this.o.length,this.p=F(this.p,this.s.p/8|0),this.s.p&=7},t.prototype.push=function(t,e){this.e(t),this.c(e)},t}();e.Inflate=Et;var Nt=function(){return function(t){this.ondata=t,ut([tt,function(){return[lt,Et]}],this,0,(function(){var t=new Et;onmessage=lt(t)}),7)}}();function St(t,e,i){return i||(i=e,e={}),"function"!=typeof i&&z(7),ht(t,e,[tt],(function(t){return at(Mt(t.data[0],ot(t.data[1])))}),1,i)}function Mt(t,e){return U(t,e)}e.AsyncInflate=Nt,e.inflate=St,e.inflateSync=Mt;var kt=function(){function t(t,e){this.c=W(),this.l=0,this.v=1,Tt.call(this,t,e)}return t.prototype.push=function(t,e){Tt.prototype.push.call(this,t,e)},t.prototype.p=function(t,e){this.c.p(t),this.l+=t.length;var i=X(t,this.o,this.v&&_t(this.o),e&&8,!e);this.v&&(mt(i,this.o),this.v=0),e&&(pt(i,i.length-8,this.c.d()),pt(i,i.length-4,this.l)),this.ondata(i,e)},t}();e.Gzip=kt,e.Compress=kt;var Ft=function(){return function(t,e){ut([et,it,function(){return[lt,Tt,kt]}],this,wt.call(this,t,e),(function(t){var e=new kt(t.data);onmessage=lt(e)}),8)}}();function Ct(t,e,i){return i||(i=e,e={}),"function"!=typeof i&&z(7),ht(t,e,[et,it,function(){return[zt]}],(function(t){return at(zt(t.data[0],t.data[1]))}),2,i)}function zt(t,e){e||(e={});var i=W(),r=t.length;i.p(t);var s=X(t,e,_t(e),8),n=s.length;return mt(s,e),pt(s,n-8,i.d()),pt(s,n-4,r),s}e.AsyncGzip=Ft,e.AsyncCompress=Ft,e.gzip=Ct,e.compress=Ct,e.gzipSync=zt,e.compressSync=zt;var Ut=function(){function t(t){this.v=1,Et.call(this,t)}return t.prototype.push=function(t,e){if(Et.prototype.e.call(this,t),this.v){var i=this.p.length>3?gt(this.p):4;if(i>=this.p.length&&!e)return;this.p=this.p.subarray(i),this.v=0}e&&(this.p.length<8&&z(6,"invalid gzip data"),this.p=this.p.subarray(0,-8)),Et.prototype.c.call(this,e)},t}();e.Gunzip=Ut;var Dt=function(){return function(t){this.ondata=t,ut([tt,rt,function(){return[lt,Et,Ut]}],this,0,(function(){var t=new Ut;onmessage=lt(t)}),9)}}();function Bt(t,e,i){return i||(i=e,e={}),"function"!=typeof i&&z(7),ht(t,e,[tt,rt,function(){return[Ot]}],(function(t){return at(Ot(t.data[0]))}),3,i)}function Ot(t,e){return U(t.subarray(gt(t),-8),e||new s(yt(t)))}e.AsyncGunzip=Dt,e.gunzip=Bt,e.gunzipSync=Ot;var Rt=function(){function t(t,e){this.c=H(),this.v=1,Tt.call(this,t,e)}return t.prototype.push=function(t,e){Tt.prototype.push.call(this,t,e)},t.prototype.p=function(t,e){this.c.p(t);var i=X(t,this.o,this.v&&2,e&&4,!e);this.v&&(bt(i,this.o),this.v=0),e&&pt(i,i.length-4,this.c.d()),this.ondata(i,e)},t}();e.Zlib=Rt;var Lt=function(){return function(t,e){ut([et,st,function(){return[lt,Tt,Rt]}],this,wt.call(this,t,e),(function(t){var e=new Rt(t.data);onmessage=lt(e)}),10)}}();function Pt(t,e){e||(e={});var i=H();i.p(t);var r=X(t,e,2,4);return bt(r,e),pt(r,r.length-4,i.d()),r}e.AsyncZlib=Lt,e.zlib=function(t,e,i){return i||(i=e,e={}),"function"!=typeof i&&z(7),ht(t,e,[et,st,function(){return[Pt]}],(function(t){return at(Pt(t.data[0],t.data[1]))}),4,i)},e.zlibSync=Pt;var Vt=function(){function t(t){this.v=1,Et.call(this,t)}return t.prototype.push=function(t,e){if(Et.prototype.e.call(this,t),this.v){if(this.p.length<2&&!e)return;this.p=this.p.subarray(2),this.v=0}e&&(this.p.length<4&&z(6,"invalid zlib data"),this.p=this.p.subarray(0,-4)),Et.prototype.c.call(this,e)},t}();e.Unzlib=Vt;var Gt=function(){return function(t){this.ondata=t,ut([tt,nt,function(){return[lt,Et,Vt]}],this,0,(function(){var t=new Vt;onmessage=lt(t)}),11)}}();function qt(t,e,i){return i||(i=e,e={}),"function"!=typeof i&&z(7),ht(t,e,[tt,nt,function(){return[Yt]}],(function(t){return at(Yt(t.data[0],ot(t.data[1])))}),5,i)}function Yt(t,e){return U((xt(t),t.subarray(2,-4)),e)}e.AsyncUnzlib=Gt,e.unzlib=qt,e.unzlibSync=Yt;var jt=function(){function t(t){this.G=Ut,this.I=Et,this.Z=Vt,this.ondata=t}return t.prototype.push=function(t,e){if(this.ondata||z(5),this.s)this.s.push(t,e);else{if(this.p&&this.p.length){var i=new s(this.p.length+t.length);i.set(this.p),i.set(t,this.p.length)}else this.p=t;if(this.p.length>2){var r=this,n=function(){r.ondata.apply(r,arguments)};this.s=31==this.p[0]&&139==this.p[1]&&8==this.p[2]?new this.G(n):8!=(15&this.p[0])||this.p[0]>>4>7||(this.p[0]<<8|this.p[1])%31?new this.I(n):new this.Z(n),this.s.push(this.p,e),this.p=null}}},t}();e.Decompress=jt;var Zt=function(){function t(t){this.G=Dt,this.I=Nt,this.Z=Gt,this.ondata=t}return t.prototype.push=function(t,e){jt.prototype.push.call(this,t,e)},t}();e.AsyncDecompress=Zt,e.decompress=function(t,e,i){return i||(i=e,e={}),"function"!=typeof i&&z(7),31==t[0]&&139==t[1]&&8==t[2]?Bt(t,e,i):8!=(15&t[0])||t[0]>>4>7||(t[0]<<8|t[1])%31?St(t,e,i):qt(t,e,i)},e.decompressSync=function(t,e){return 31==t[0]&&139==t[1]&&8==t[2]?Ot(t,e):8!=(15&t[0])||t[0]>>4>7||(t[0]<<8|t[1])%31?Mt(t,e):Yt(t,e)};var Wt=function(t,e,i,r){for(var n in t){var a=t[n],o=e+n,h=r;Array.isArray(a)&&(h=$(r,a[1]),a=a[0]),a instanceof s?i[o]=[a,h]:(i[o+="/"]=[new s(0),h],Wt(a,o,i,r))}},Ht="undefined"!=typeof TextEncoder&&new TextEncoder,Xt="undefined"!=typeof TextDecoder&&new TextDecoder,$t=0;try{Xt.decode(Y,{stream:!0}),$t=1}catch(t){}var Kt=function(t){for(var e="",i=0;;){var r=t[i++],s=(r>127)+(r>223)+(r>239);if(i+s>t.length)return[e,F(t,i-1)];s?3==s?(r=((15&r)<<18|(63&t[i++])<<12|(63&t[i++])<<6|63&t[i++])-65536,e+=String.fromCharCode(55296|r>>10,56320|1023&r)):e+=1&s?String.fromCharCode((31&r)<<6|63&t[i++]):String.fromCharCode((15&r)<<12|(63&t[i++])<<6|63&t[i++]):e+=String.fromCharCode(r)}},Qt=function(){function t(t){this.ondata=t,$t?this.t=new TextDecoder:this.p=Y}return t.prototype.push=function(t,e){if(this.ondata||z(5),e=!!e,this.t)return this.ondata(this.t.decode(t,{stream:!0}),e),void(e&&(this.t.decode().length&&z(8),this.t=null));this.p||z(4);var i=new s(this.p.length+t.length);i.set(this.p),i.set(t,this.p.length);var r=Kt(i),n=r[0],a=r[1];e?(a.length&&z(8),this.p=null):this.p=a,this.ondata(n,e)},t}();e.DecodeUTF8=Qt;var Jt=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,e){this.ondata||z(5),this.d&&z(4),this.ondata(te(t),this.d=e||!1)},t}();function te(t,e){if(e){for(var i=new s(t.length),r=0;r<t.length;++r)i[r]=t.charCodeAt(r);return i}if(Ht)return Ht.encode(t);var n=t.length,a=new s(t.length+(t.length>>1)),o=0,h=function(t){a[o++]=t};for(r=0;r<n;++r){if(o+5>a.length){var l=new s(o+8+(n-r<<1));l.set(a),a=l}var u=t.charCodeAt(r);u<128||e?h(u):u<2048?(h(192|u>>6),h(128|63&u)):u>55295&&u<57344?(h(240|(u=65536+(1047552&u)|1023&t.charCodeAt(++r))>>18),h(128|u>>12&63),h(128|u>>6&63),h(128|63&u)):(h(224|u>>12),h(128|u>>6&63),h(128|63&u))}return F(a,0,o)}function ee(t,e){if(e){for(var i="",r=0;r<t.length;r+=16384)i+=String.fromCharCode.apply(null,t.subarray(r,r+16384));return i}if(Xt)return Xt.decode(t);var s=Kt(t),n=s[0];return s[1].length&&z(8),n}e.EncodeUTF8=Jt,e.strToU8=te,e.strFromU8=ee;var ie=function(t){return 1==t?3:t<6?2:9==t?1:0},re=function(t,e){return e+30+ct(t,e+26)+ct(t,e+28)},se=function(t,e,i){var r=ct(t,e+28),s=ee(t.subarray(e+46,e+46+r),!(2048&ct(t,e+8))),n=e+46+r,a=dt(t,e+20),o=i&&4294967295==a?ne(t,n):[a,dt(t,e+24),dt(t,e+42)],h=o[0],l=o[1],u=o[2];return[ct(t,e+10),h,l,s,n+ct(t,e+30)+ct(t,e+32),u]},ne=function(t,e){for(;1!=ct(t,e);e+=4+ct(t,e+2));return[ft(t,e+12),ft(t,e+4),ft(t,e+20)]},ae=function(t){var e=0;if(t)for(var i in t){var r=t[i].length;r>65535&&z(9),e+=r+4}return e},oe=function(t,e,i,r,s,n,a,o){var h=r.length,l=i.extra,u=o&&o.length,c=ae(l);pt(t,e,null!=a?33639248:67324752),e+=4,null!=a&&(t[e++]=20,t[e++]=i.os),t[e]=20,e+=2,t[e++]=i.flag<<1|(n<0&&8),t[e++]=s&&8,t[e++]=255&i.compression,t[e++]=i.compression>>8;var d=new Date(null==i.mtime?Date.now():i.mtime),f=d.getFullYear()-1980;if((f<0||f>119)&&z(10),pt(t,e,f<<25|d.getMonth()+1<<21|d.getDate()<<16|d.getHours()<<11|d.getMinutes()<<5|d.getSeconds()>>>1),e+=4,-1!=n&&(pt(t,e,i.crc),pt(t,e+4,n<0?-n-2:n),pt(t,e+8,i.size)),pt(t,e+12,h),pt(t,e+14,c),e+=16,null!=a&&(pt(t,e,u),pt(t,e+6,i.attrs),pt(t,e+10,a),e+=14),t.set(r,e),e+=h,c)for(var p in l){var m=l[p],g=m.length;pt(t,e,+p),pt(t,e+2,g),t.set(m,e+4),e+=4+g}return u&&(t.set(o,e),e+=u),e},he=function(t,e,i,r,s){pt(t,e,101010256),pt(t,e+8,i),pt(t,e+10,i),pt(t,e+12,r),pt(t,e+16,s)},le=function(){function t(t){this.filename=t,this.c=W(),this.size=0,this.compression=0}return t.prototype.process=function(t,e){this.ondata(null,t,e)},t.prototype.push=function(t,e){this.ondata||z(5),this.c.p(t),this.size+=t.length,e&&(this.crc=this.c.d()),this.process(t,e||!1)},t}();e.ZipPassThrough=le;var ue=function(){function t(t,e){var i=this;e||(e={}),le.call(this,t),this.d=new Tt(e,(function(t,e){i.ondata(null,t,e)})),this.compression=8,this.flag=ie(e.level)}return t.prototype.process=function(t,e){try{this.d.push(t,e)}catch(t){this.ondata(t,null,e)}},t.prototype.push=function(t,e){le.prototype.push.call(this,t,e)},t}();e.ZipDeflate=ue;var ce=function(){function t(t,e){var i=this;e||(e={}),le.call(this,t),this.d=new It(e,(function(t,e,r){i.ondata(t,e,r)})),this.compression=8,this.flag=ie(e.level),this.terminate=this.d.terminate}return t.prototype.process=function(t,e){this.d.push(t,e)},t.prototype.push=function(t,e){le.prototype.push.call(this,t,e)},t}();e.AsyncZipDeflate=ce;var de=function(){function t(t){this.ondata=t,this.u=[],this.d=1}return t.prototype.add=function(t){var e=this;if(this.ondata||z(5),2&this.d)this.ondata(z(4+8*(1&this.d),0,1),null,!1);else{var i=te(t.filename),r=i.length,n=t.comment,a=n&&te(n),o=r!=t.filename.length||a&&n.length!=a.length,h=r+ae(t.extra)+30;r>65535&&this.ondata(z(11,0,1),null,!1);var l=new s(h);oe(l,0,t,i,o,-1);var u=[l],c=function(){for(var t=0,i=u;t<i.length;t++){var r=i[t];e.ondata(null,r,!1)}u=[]},d=this.d;this.d=0;var f=this.u.length,p=$(t,{f:i,u:o,o:a,t:function(){t.terminate&&t.terminate()},r:function(){if(c(),d){var t=e.u[f+1];t?t.r():e.d=1}d=1}}),m=0;t.ondata=function(i,r,n){if(i)e.ondata(i,r,n),e.terminate();else if(m+=r.length,u.push(r),n){var a=new s(16);pt(a,0,134695760),pt(a,4,t.crc),pt(a,8,m),pt(a,12,t.size),u.push(a),p.c=m,p.b=h+m+16,p.crc=t.crc,p.size=t.size,d&&p.r(),d=1}else d&&c()},this.u.push(p)}},t.prototype.end=function(){var t=this;2&this.d?this.ondata(z(4+8*(1&this.d),0,1),null,!0):(this.d?this.e():this.u.push({r:function(){1&t.d&&(t.u.splice(-1,1),t.e())},t:function(){}}),this.d=3)},t.prototype.e=function(){for(var t=0,e=0,i=0,r=0,n=this.u;r<n.length;r++){i+=46+(l=n[r]).f.length+ae(l.extra)+(l.o?l.o.length:0)}for(var a=new s(i+22),o=0,h=this.u;o<h.length;o++){var l=h[o];oe(a,t,l,l.f,l.u,-l.c-2,e,l.o),t+=46+l.f.length+ae(l.extra)+(l.o?l.o.length:0),e+=l.b}he(a,t,this.u.length,i,e),this.ondata(null,a,!0),this.d=2},t.prototype.terminate=function(){for(var t=0,e=this.u;t<e.length;t++){e[t].t()}this.d=2},t}();e.Zip=de,e.zip=function(t,e,i){i||(i=e,e={}),"function"!=typeof i&&z(7);var r={};Wt(t,"",r,e);var n=Object.keys(r),a=n.length,o=0,h=0,l=a,u=new Array(a),c=[],d=function(){for(var t=0;t<c.length;++t)c[t]()},f=function(t,e){ye((function(){i(t,e)}))};ye((function(){f=i}));var p=function(){var t=new s(h+22),e=o,i=h-o;h=0;for(var r=0;r<l;++r){var n=u[r];try{var a=n.c.length;oe(t,h,n,n.f,n.u,a);var c=30+n.f.length+ae(n.extra),d=h+c;t.set(n.c,d),oe(t,o,n,n.f,n.u,a,h,n.m),o+=16+c+(n.m?n.m.length:0),h=d+a}catch(t){return f(t,null)}}he(t,o,u.length,i,e),f(null,t)};a||p();for(var m=function(t){var e=n[t],i=r[e],s=i[0],l=i[1],m=W(),g=s.length;m.p(s);var y=te(e),_=y.length,b=l.comment,x=b&&te(b),w=x&&x.length,T=ae(l.extra),I=0==l.level?0:8,v=function(i,r){if(i)d(),f(i,null);else{var s=r.length;u[t]=$(l,{size:g,crc:m.d(),c:r,f:y,m:x,u:_!=e.length||x&&b.length!=w,compression:I}),o+=30+_+T+s,h+=76+2*(_+T)+(w||0)+s,--a||p()}};if(_>65535&&v(z(11,0,1),null),I)if(g<16e4)try{v(null,At(s,l))}catch(t){v(t,null)}else c.push(vt(s,l,v));else v(null,s)},g=0;g<l;++g)m(g);return d},e.zipSync=function(t,e){e||(e={});var i={},r=[];Wt(t,"",i,e);var n=0,a=0;for(var o in i){var h=i[o],l=h[0],u=h[1],c=0==u.level?0:8,d=(v=te(o)).length,f=u.comment,p=f&&te(f),m=p&&p.length,g=ae(u.extra);d>65535&&z(11);var y=c?At(l,u):l,_=y.length,b=W();b.p(l),r.push($(u,{size:l.length,crc:b.d(),c:y,f:v,m:p,u:d!=o.length||p&&f.length!=m,o:n,compression:c})),n+=30+d+g+_,a+=76+2*(d+g)+(m||0)+_}for(var x=new s(a+22),w=n,T=a-n,I=0;I<r.length;++I){var v=r[I];oe(x,v.o,v,v.f,v.u,v.c.length);var A=30+v.f.length+ae(v.extra);x.set(v.c,v.o+A),oe(x,n,v,v.f,v.u,v.c.length,v.o,v.m),n+=16+A+(v.m?v.m.length:0)}return he(x,n,r.length,T,w),x};var fe=function(){function t(){}return t.prototype.push=function(t,e){this.ondata(null,t,e)},t.compression=0,t}();e.UnzipPassThrough=fe;var pe=function(){function t(){var t=this;this.i=new Et((function(e,i){t.ondata(null,e,i)}))}return t.prototype.push=function(t,e){try{this.i.push(t,e)}catch(t){this.ondata(t,null,e)}},t.compression=8,t}();e.UnzipInflate=pe;var me=function(){function t(t,e){var i=this;e<32e4?this.i=new Et((function(t,e){i.ondata(null,t,e)})):(this.i=new Nt((function(t,e,r){i.ondata(t,e,r)})),this.terminate=this.i.terminate)}return t.prototype.push=function(t,e){this.i.terminate&&(t=F(t,0)),this.i.push(t,e)},t.compression=8,t}();e.AsyncUnzipInflate=me;var ge=function(){function t(t){this.onfile=t,this.k=[],this.o={0:fe},this.p=Y}return t.prototype.push=function(t,e){var i=this;if(this.onfile||z(5),this.p||z(4),this.c>0){var r=Math.min(this.c,t.length),n=t.subarray(0,r);if(this.c-=r,this.d?this.d.push(n,!this.c):this.k[0].push(n),(t=t.subarray(r)).length)return this.push(t,e)}else{var a=0,o=0,h=void 0,l=void 0;this.p.length?t.length?((l=new s(this.p.length+t.length)).set(this.p),l.set(t,this.p.length)):l=this.p:l=t;for(var u=l.length,c=this.c,d=c&&this.d,f=function(){var t,e=dt(l,o);if(67324752==e){a=1,h=o,p.d=null,p.c=0;var r=ct(l,o+6),s=ct(l,o+8),n=2048&r,d=8&r,f=ct(l,o+26),m=ct(l,o+28);if(u>o+30+f+m){var g=[];p.k.unshift(g),a=2;var y,_=dt(l,o+18),b=dt(l,o+22),x=ee(l.subarray(o+30,o+=30+f),!n);4294967295==_?(t=d?[-2]:ne(l,o),_=t[0],b=t[1]):d&&(_=-1),o+=m,p.c=_;var w={name:x,compression:s,start:function(){if(w.ondata||z(5),_){var t=i.o[s];t||w.ondata(z(14,"unknown compression type "+s,1),null,!1),(y=_<0?new t(x):new t(x,_,b)).ondata=function(t,e,i){w.ondata(t,e,i)};for(var e=0,r=g;e<r.length;e++){var n=r[e];y.push(n,!1)}i.k[0]==g&&i.c?i.d=y:y.push(Y,!0)}else w.ondata(null,Y,!0)},terminate:function(){y&&y.terminate&&y.terminate()}};_>=0&&(w.size=_,w.originalSize=b),p.onfile(w)}return"break"}if(c){if(134695760==e)return h=o+=12+(-2==c&&8),a=3,p.c=0,"break";if(33639248==e)return h=o-=4,a=3,p.c=0,"break"}},p=this;o<u-4;++o){if("break"===f())break}if(this.p=Y,c<0){var m=a?l.subarray(0,h-12-(-2==c&&8)-(134695760==dt(l,h-16)&&4)):l.subarray(0,o);d?d.push(m,!!a):this.k[+(2==a)].push(m)}if(2&a)return this.push(l.subarray(o),e);this.p=l.subarray(o)}e&&(this.c&&z(13),this.p=null)},t.prototype.register=function(t){this.o[t.compression]=t},t}();e.Unzip=ge;var ye="function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout?setTimeout:function(t){t()};e.unzip=function(t,e,i){i||(i=e,e={}),"function"!=typeof i&&z(7);var r=[],n=function(){for(var t=0;t<r.length;++t)r[t]()},a={},o=function(t,e){ye((function(){i(t,e)}))};ye((function(){o=i}));for(var h=t.length-22;101010256!=dt(t,h);--h)if(!h||t.length-h>65558)return o(z(13,0,1),null),n;var l=ct(t,h+8);if(l){var u=l,c=dt(t,h+16),d=4294967295==c||65535==u;if(d){var f=dt(t,h-12);(d=101075792==dt(t,f))&&(u=l=dt(t,f+32),c=dt(t,f+48))}for(var p=e&&e.filter,m=function(e){var i=se(t,c,d),h=i[0],u=i[1],f=i[2],m=i[3],g=i[4],y=i[5],_=re(t,y);c=g;var b=function(t,e){t?(n(),o(t,null)):(e&&(a[m]=e),--l||o(null,a))};if(!p||p({name:m,size:u,originalSize:f,compression:h}))if(h)if(8==h){var x=t.subarray(_,_+u);if(u<32e4)try{b(null,Mt(x,new s(f)))}catch(t){b(t,null)}else r.push(St(x,{size:f},b))}else b(z(14,"unknown compression type "+h,1),null);else b(null,F(t,_,_+u));else b(null,null)},g=0;g<u;++g)m()}else o(null,{});return n},e.unzipSync=function(t,e){for(var i={},r=t.length-22;101010256!=dt(t,r);--r)(!r||t.length-r>65558)&&z(13);var n=ct(t,r+8);if(!n)return{};var a=dt(t,r+16),o=4294967295==a||65535==n;if(o){var h=dt(t,r-12);(o=101075792==dt(t,h))&&(n=dt(t,h+32),a=dt(t,h+48))}for(var l=e&&e.filter,u=0;u<n;++u){var c=se(t,a,o),d=c[0],f=c[1],p=c[2],m=c[3],g=c[4],y=c[5],_=re(t,y);a=g,l&&!l({name:m,size:f,originalSize:p,compression:d})||(d?8==d?i[m]=Mt(t.subarray(_,_+f),new s(p)):z(14,"unknown compression type "+d):i[m]=F(t,_,_+f))}return i}},5891:(t,e)=>{"use strict";var i={};e.default=function(t,e,r,s,n){var a=new Worker(i[e]||(i[e]=URL.createObjectURL(new Blob([t+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return a.onmessage=function(t){var e=t.data,i=e.$e$;if(i){var r=new Error(i[0]);r.code=i[1],r.stack=i[2],n(r,null)}else n(null,e)},a.postMessage(r,s),a}}},e={};function i(r){var s=e[r];if(void 0!==s)return s.exports;var n=e[r]={exports:{}};return t[r].call(n.exports,n,n.exports,i),n.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var r in e)i.o(e,r)&&!i.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};return(()=>{"use strict";i.r(r),i.d(r,{workerListener:()=>wr});const t=1e3,e=1001,s=1002,n=1009,a=1010,o=1011,h=1012,l=1013,u=1015,c=2300,d=2301,f=2302,p=2400,m=2401,g=2402,y="srgb",_="srgb-linear",b="linear",x="srgb",w=35044,T=2e3,I=2001;Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;function v(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function A(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}const E={};let N=null;function S(...t){const e="THREE."+t.shift();N?N("warn",e,...t):console.warn(e,...t)}function M(...t){const e="THREE."+t.shift();N?N("error",e,...t):console.error(e,...t)}function k(...t){const e=t.join(" ");e in E||(E[e]=!0,S(...t))}class F{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(e)&&i[t].push(e)}hasEventListener(t,e){const i=this._listeners;return void 0!==i&&(void 0!==i[t]&&-1!==i[t].indexOf(e))}removeEventListener(t,e){const i=this._listeners;if(void 0===i)return;const r=i[t];if(void 0!==r){const t=r.indexOf(e);-1!==t&&r.splice(t,1)}}dispatchEvent(t){const e=this._listeners;if(void 0===e)return;const i=e[t.type];if(void 0!==i){t.target=this;const e=i.slice(0);for(let i=0,r=e.length;i<r;i++)e[i].call(this,t);t.target=null}}}const C=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];Math.PI,Math.PI;function z(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,i=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(C[255&t]+C[t>>8&255]+C[t>>16&255]+C[t>>24&255]+"-"+C[255&e]+C[e>>8&255]+"-"+C[e>>16&15|64]+C[e>>24&255]+"-"+C[63&i|128]+C[i>>8&255]+"-"+C[i>>16&255]+C[i>>24&255]+C[255&r]+C[r>>8&255]+C[r>>16&255]+C[r>>24&255]).toLowerCase()}function U(t,e,i){return Math.max(e,Math.min(i,t))}function D(t,e){return(t%e+e)%e}function B(t,e,i){return(1-i)*t+i*e}function O(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function R(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(4294967295*t);case Uint16Array:return Math.round(65535*t);case Uint8Array:return Math.round(255*t);case Int32Array:return Math.round(2147483647*t);case Int16Array:return Math.round(32767*t);case Int8Array:return Math.round(127*t);default:throw new Error("Invalid component type.")}}class L{constructor(t=0,e=0){L.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,i=this.y,r=t.elements;return this.x=r[0]*e+r[3]*i+r[6],this.y=r[1]*e+r[4]*i+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=U(this.x,t.x,e.x),this.y=U(this.y,t.y,e.y),this}clampScalar(t,e){return this.x=U(this.x,t,e),this.y=U(this.y,t,e),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(U(i,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const i=this.dot(t)/e;return Math.acos(U(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y;return e*e+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const i=Math.cos(e),r=Math.sin(e),s=this.x-t.x,n=this.y-t.y;return this.x=s*i-n*r+t.x,this.y=s*r+n*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class P{constructor(t=0,e=0,i=0,r=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=i,this._w=r}static slerpFlat(t,e,i,r,s,n,a){let o=i[r+0],h=i[r+1],l=i[r+2],u=i[r+3],c=s[n+0],d=s[n+1],f=s[n+2],p=s[n+3];if(a<=0)return t[e+0]=o,t[e+1]=h,t[e+2]=l,void(t[e+3]=u);if(a>=1)return t[e+0]=c,t[e+1]=d,t[e+2]=f,void(t[e+3]=p);if(u!==p||o!==c||h!==d||l!==f){let t=o*c+h*d+l*f+u*p;t<0&&(c=-c,d=-d,f=-f,p=-p,t=-t);let e=1-a;if(t<.9995){const i=Math.acos(t),r=Math.sin(i);e=Math.sin(e*i)/r,o=o*e+c*(a=Math.sin(a*i)/r),h=h*e+d*a,l=l*e+f*a,u=u*e+p*a}else{o=o*e+c*a,h=h*e+d*a,l=l*e+f*a,u=u*e+p*a;const t=1/Math.sqrt(o*o+h*h+l*l+u*u);o*=t,h*=t,l*=t,u*=t}}t[e]=o,t[e+1]=h,t[e+2]=l,t[e+3]=u}static multiplyQuaternionsFlat(t,e,i,r,s,n){const a=i[r],o=i[r+1],h=i[r+2],l=i[r+3],u=s[n],c=s[n+1],d=s[n+2],f=s[n+3];return t[e]=a*f+l*u+o*d-h*c,t[e+1]=o*f+l*c+h*u-a*d,t[e+2]=h*f+l*d+a*c-o*u,t[e+3]=l*f-a*u-o*c-h*d,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,i,r){return this._x=t,this._y=e,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e=!0){const i=t._x,r=t._y,s=t._z,n=t._order,a=Math.cos,o=Math.sin,h=a(i/2),l=a(r/2),u=a(s/2),c=o(i/2),d=o(r/2),f=o(s/2);switch(n){case"XYZ":this._x=c*l*u+h*d*f,this._y=h*d*u-c*l*f,this._z=h*l*f+c*d*u,this._w=h*l*u-c*d*f;break;case"YXZ":this._x=c*l*u+h*d*f,this._y=h*d*u-c*l*f,this._z=h*l*f-c*d*u,this._w=h*l*u+c*d*f;break;case"ZXY":this._x=c*l*u-h*d*f,this._y=h*d*u+c*l*f,this._z=h*l*f+c*d*u,this._w=h*l*u-c*d*f;break;case"ZYX":this._x=c*l*u-h*d*f,this._y=h*d*u+c*l*f,this._z=h*l*f-c*d*u,this._w=h*l*u+c*d*f;break;case"YZX":this._x=c*l*u+h*d*f,this._y=h*d*u+c*l*f,this._z=h*l*f-c*d*u,this._w=h*l*u-c*d*f;break;case"XZY":this._x=c*l*u-h*d*f,this._y=h*d*u-c*l*f,this._z=h*l*f+c*d*u,this._w=h*l*u+c*d*f;break;default:S("Quaternion: .setFromEuler() encountered an unknown order: "+n)}return!0===e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const i=e/2,r=Math.sin(i);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,i=e[0],r=e[4],s=e[8],n=e[1],a=e[5],o=e[9],h=e[2],l=e[6],u=e[10],c=i+a+u;if(c>0){const t=.5/Math.sqrt(c+1);this._w=.25/t,this._x=(l-o)*t,this._y=(s-h)*t,this._z=(n-r)*t}else if(i>a&&i>u){const t=2*Math.sqrt(1+i-a-u);this._w=(l-o)/t,this._x=.25*t,this._y=(r+n)/t,this._z=(s+h)/t}else if(a>u){const t=2*Math.sqrt(1+a-i-u);this._w=(s-h)/t,this._x=(r+n)/t,this._y=.25*t,this._z=(o+l)/t}else{const t=2*Math.sqrt(1+u-i-a);this._w=(n-r)/t,this._x=(s+h)/t,this._y=(o+l)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let i=t.dot(e)+1;return i<1e-8?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=i),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(U(this.dot(t),-1,1)))}rotateTowards(t,e){const i=this.angleTo(t);if(0===i)return this;const r=Math.min(1,e/i);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const i=t._x,r=t._y,s=t._z,n=t._w,a=e._x,o=e._y,h=e._z,l=e._w;return this._x=i*l+n*a+r*h-s*o,this._y=r*l+n*o+s*a-i*h,this._z=s*l+n*h+i*o-r*a,this._w=n*l-i*a-r*o-s*h,this._onChangeCallback(),this}slerp(t,e){if(e<=0)return this;if(e>=1)return this.copy(t);let i=t._x,r=t._y,s=t._z,n=t._w,a=this.dot(t);a<0&&(i=-i,r=-r,s=-s,n=-n,a=-a);let o=1-e;if(a<.9995){const t=Math.acos(a),h=Math.sin(t);o=Math.sin(o*t)/h,e=Math.sin(e*t)/h,this._x=this._x*o+i*e,this._y=this._y*o+r*e,this._z=this._z*o+s*e,this._w=this._w*o+n*e,this._onChangeCallback()}else this._x=this._x*o+i*e,this._y=this._y*o+r*e,this._z=this._z*o+s*e,this._w=this._w*o+n*e,this.normalize();return this}slerpQuaternions(t,e,i){return this.copy(t).slerp(e,i)}random(){const t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(t),r*Math.cos(t),s*Math.sin(e),s*Math.cos(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class V{constructor(t=0,e=0,i=0){V.prototype.isVector3=!0,this.x=t,this.y=e,this.z=i}set(t,e,i){return void 0===i&&(i=this.z),this.x=t,this.y=e,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(q.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(q.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,i=this.y,r=this.z,s=t.elements;return this.x=s[0]*e+s[3]*i+s[6]*r,this.y=s[1]*e+s[4]*i+s[7]*r,this.z=s[2]*e+s[5]*i+s[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,i=this.y,r=this.z,s=t.elements,n=1/(s[3]*e+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*e+s[4]*i+s[8]*r+s[12])*n,this.y=(s[1]*e+s[5]*i+s[9]*r+s[13])*n,this.z=(s[2]*e+s[6]*i+s[10]*r+s[14])*n,this}applyQuaternion(t){const e=this.x,i=this.y,r=this.z,s=t.x,n=t.y,a=t.z,o=t.w,h=2*(n*r-a*i),l=2*(a*e-s*r),u=2*(s*i-n*e);return this.x=e+o*h+n*u-a*l,this.y=i+o*l+a*h-s*u,this.z=r+o*u+s*l-n*h,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,i=this.y,r=this.z,s=t.elements;return this.x=s[0]*e+s[4]*i+s[8]*r,this.y=s[1]*e+s[5]*i+s[9]*r,this.z=s[2]*e+s[6]*i+s[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=U(this.x,t.x,e.x),this.y=U(this.y,t.y,e.y),this.z=U(this.z,t.z,e.z),this}clampScalar(t,e){return this.x=U(this.x,t,e),this.y=U(this.y,t,e),this.z=U(this.z,t,e),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(U(i,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const i=t.x,r=t.y,s=t.z,n=e.x,a=e.y,o=e.z;return this.x=r*o-s*a,this.y=s*n-i*o,this.z=i*a-r*n,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const i=t.dot(this)/e;return this.copy(t).multiplyScalar(i)}projectOnPlane(t){return G.copy(this).projectOnVector(t),this.sub(G)}reflect(t){return this.sub(G.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const i=this.dot(t)/e;return Math.acos(U(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y,r=this.z-t.z;return e*e+i*i+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,i){const r=Math.sin(e)*t;return this.x=r*Math.sin(i),this.y=Math.cos(e)*t,this.z=r*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,e=2*Math.random()-1,i=Math.sqrt(1-e*e);return this.x=i*Math.cos(t),this.y=e,this.z=i*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const G=new V,q=new P;class Y{constructor(t,e,i,r,s,n,a,o,h){Y.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==t&&this.set(t,e,i,r,s,n,a,o,h)}set(t,e,i,r,s,n,a,o,h){const l=this.elements;return l[0]=t,l[1]=r,l[2]=a,l[3]=e,l[4]=s,l[5]=o,l[6]=i,l[7]=n,l[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this}extractBasis(t,e,i){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,r=e.elements,s=this.elements,n=i[0],a=i[3],o=i[6],h=i[1],l=i[4],u=i[7],c=i[2],d=i[5],f=i[8],p=r[0],m=r[3],g=r[6],y=r[1],_=r[4],b=r[7],x=r[2],w=r[5],T=r[8];return s[0]=n*p+a*y+o*x,s[3]=n*m+a*_+o*w,s[6]=n*g+a*b+o*T,s[1]=h*p+l*y+u*x,s[4]=h*m+l*_+u*w,s[7]=h*g+l*b+u*T,s[2]=c*p+d*y+f*x,s[5]=c*m+d*_+f*w,s[8]=c*g+d*b+f*T,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[1],r=t[2],s=t[3],n=t[4],a=t[5],o=t[6],h=t[7],l=t[8];return e*n*l-e*a*h-i*s*l+i*a*o+r*s*h-r*n*o}invert(){const t=this.elements,e=t[0],i=t[1],r=t[2],s=t[3],n=t[4],a=t[5],o=t[6],h=t[7],l=t[8],u=l*n-a*h,c=a*o-l*s,d=h*s-n*o,f=e*u+i*c+r*d;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);const p=1/f;return t[0]=u*p,t[1]=(r*h-l*i)*p,t[2]=(a*i-r*n)*p,t[3]=c*p,t[4]=(l*e-r*o)*p,t[5]=(r*s-a*e)*p,t[6]=d*p,t[7]=(i*o-h*e)*p,t[8]=(n*e-i*s)*p,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,i,r,s,n,a){const o=Math.cos(s),h=Math.sin(s);return this.set(i*o,i*h,-i*(o*n+h*a)+n+t,-r*h,r*o,-r*(-h*n+o*a)+a+e,0,0,1),this}scale(t,e){return this.premultiply(j.makeScale(t,e)),this}rotate(t){return this.premultiply(j.makeRotation(-t)),this}translate(t,e){return this.premultiply(j.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,i,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,i=t.elements;for(let t=0;t<9;t++)if(e[t]!==i[t])return!1;return!0}fromArray(t,e=0){for(let i=0;i<9;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}const j=new Y,Z=(new Y).set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),W=(new Y).set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function H(){const t={enabled:!0,workingColorSpace:_,spaces:{},convert:function(t,e,i){return!1!==this.enabled&&e!==i&&e&&i?(this.spaces[e].transfer===x&&(t.r=$(t.r),t.g=$(t.g),t.b=$(t.b)),this.spaces[e].primaries!==this.spaces[i].primaries&&(t.applyMatrix3(this.spaces[e].toXYZ),t.applyMatrix3(this.spaces[i].fromXYZ)),this.spaces[i].transfer===x&&(t.r=K(t.r),t.g=K(t.g),t.b=K(t.b)),t):t},workingToColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},colorSpaceToWorking:function(t,e){return this.convert(t,e,this.workingColorSpace)},getPrimaries:function(t){return this.spaces[t].primaries},getTransfer:function(t){return""===t?b:this.spaces[t].transfer},getToneMappingMode:function(t){return this.spaces[t].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(t,e=this.workingColorSpace){return t.fromArray(this.spaces[e].luminanceCoefficients)},define:function(t){Object.assign(this.spaces,t)},_getMatrix:function(t,e,i){return t.copy(this.spaces[e].toXYZ).multiply(this.spaces[i].fromXYZ)},_getDrawingBufferColorSpace:function(t){return this.spaces[t].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(t=this.workingColorSpace){return this.spaces[t].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(e,i){return k("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),t.workingToColorSpace(e,i)},toWorkingColorSpace:function(e,i){return k("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),t.colorSpaceToWorking(e,i)}},e=[.64,.33,.3,.6,.15,.06],i=[.2126,.7152,.0722],r=[.3127,.329];return t.define({[_]:{primaries:e,whitePoint:r,transfer:b,toXYZ:Z,fromXYZ:W,luminanceCoefficients:i,workingColorSpaceConfig:{unpackColorSpace:y},outputColorSpaceConfig:{drawingBufferColorSpace:y}},[y]:{primaries:e,whitePoint:r,transfer:x,toXYZ:Z,fromXYZ:W,luminanceCoefficients:i,outputColorSpaceConfig:{drawingBufferColorSpace:y}}}),t}const X=H();function $(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function K(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}let Q;class J{static getDataURL(t,e="image/png"){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;let i;if(t instanceof HTMLCanvasElement)i=t;else{void 0===Q&&(Q=A("canvas")),Q.width=t.width,Q.height=t.height;const e=Q.getContext("2d");t instanceof ImageData?e.putImageData(t,0,0):e.drawImage(t,0,0,t.width,t.height),i=Q}return i.toDataURL(e)}static sRGBToLinear(t){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const e=A("canvas");e.width=t.width,e.height=t.height;const i=e.getContext("2d");i.drawImage(t,0,0,t.width,t.height);const r=i.getImageData(0,0,t.width,t.height),s=r.data;for(let t=0;t<s.length;t++)s[t]=255*$(s[t]/255);return i.putImageData(r,0,0),e}if(t.data){const e=t.data.slice(0);for(let t=0;t<e.length;t++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[t]=Math.floor(255*$(e[t]/255)):e[t]=$(e[t]);return{data:e,width:t.width,height:t.height}}return S("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let tt=0;class et{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:tt++}),this.uuid=z(),this.data=t,this.dataReady=!0,this.version=0}getSize(t){const e=this.data;return"undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement?t.set(e.videoWidth,e.videoHeight,0):"undefined"!=typeof VideoFrame&&e instanceof VideoFrame?t.set(e.displayHeight,e.displayWidth,0):null!==e?t.set(e.width,e.height,e.depth||0):t.set(0,0,0),t}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(null!==r){let t;if(Array.isArray(r)){t=[];for(let e=0,i=r.length;e<i;e++)r[e].isDataTexture?t.push(it(r[e].image)):t.push(it(r[e]))}else t=it(r);i.url=t}return e||(t.images[this.uuid]=i),i}}function it(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?J.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(S("Texture: Unable to serialize Texture."),{})}let rt=0;const st=new V;class nt extends F{constructor(t=nt.DEFAULT_IMAGE,e=nt.DEFAULT_MAPPING,i=1001,r=1001,s=1006,a=1008,o=1023,h=n,l=nt.DEFAULT_ANISOTROPY,u=""){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:rt++}),this.uuid=z(),this.name="",this.source=new et(t),this.mipmaps=[],this.mapping=e,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=a,this.anisotropy=l,this.format=o,this.internalFormat=null,this.type=h,this.offset=new L(0,0),this.repeat=new L(1,1),this.center=new L(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Y,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(t&&t.depth&&t.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(st).x}get height(){return this.source.getSize(st).y}get depth(){return this.source.getSize(st).z}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.renderTarget=t.renderTarget,this.isRenderTargetTexture=t.isRenderTargetTexture,this.isArrayTexture=t.isArrayTexture,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}setValues(t){for(const e in t){const i=t[e];if(void 0===i){S(`Texture.setValues(): parameter '${e}' has value of undefined.`);continue}const r=this[e];void 0!==r?r&&i&&r.isVector2&&i.isVector2||r&&i&&r.isVector3&&i.isVector3||r&&i&&r.isMatrix3&&i.isMatrix3?r.copy(i):this[e]=i:S(`Texture.setValues(): property '${e}' does not exist.`)}}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const i={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),e||(t.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(i){if(300!==this.mapping)return i;if(i.applyMatrix3(this.matrix),i.x<0||i.x>1)switch(this.wrapS){case t:i.x=i.x-Math.floor(i.x);break;case e:i.x=i.x<0?0:1;break;case s:1===Math.abs(Math.floor(i.x)%2)?i.x=Math.ceil(i.x)-i.x:i.x=i.x-Math.floor(i.x)}if(i.y<0||i.y>1)switch(this.wrapT){case t:i.y=i.y-Math.floor(i.y);break;case e:i.y=i.y<0?0:1;break;case s:1===Math.abs(Math.floor(i.y)%2)?i.y=Math.ceil(i.y)-i.y:i.y=i.y-Math.floor(i.y)}return this.flipY&&(i.y=1-i.y),i}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){!0===t&&this.pmremVersion++}}nt.DEFAULT_IMAGE=null,nt.DEFAULT_MAPPING=300,nt.DEFAULT_ANISOTROPY=1;class at{constructor(t=0,e=0,i=0,r=1){at.prototype.isVector4=!0,this.x=t,this.y=e,this.z=i,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,i,r){return this.x=t,this.y=e,this.z=i,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,i=this.y,r=this.z,s=this.w,n=t.elements;return this.x=n[0]*e+n[4]*i+n[8]*r+n[12]*s,this.y=n[1]*e+n[5]*i+n[9]*r+n[13]*s,this.z=n[2]*e+n[6]*i+n[10]*r+n[14]*s,this.w=n[3]*e+n[7]*i+n[11]*r+n[15]*s,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,i,r,s;const n=.01,a=.1,o=t.elements,h=o[0],l=o[4],u=o[8],c=o[1],d=o[5],f=o[9],p=o[2],m=o[6],g=o[10];if(Math.abs(l-c)<n&&Math.abs(u-p)<n&&Math.abs(f-m)<n){if(Math.abs(l+c)<a&&Math.abs(u+p)<a&&Math.abs(f+m)<a&&Math.abs(h+d+g-3)<a)return this.set(1,0,0,0),this;e=Math.PI;const t=(h+1)/2,o=(d+1)/2,y=(g+1)/2,_=(l+c)/4,b=(u+p)/4,x=(f+m)/4;return t>o&&t>y?t<n?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(t),r=_/i,s=b/i):o>y?o<n?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(o),i=_/r,s=x/r):y<n?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(y),i=b/s,r=x/s),this.set(i,r,s,e),this}let y=Math.sqrt((m-f)*(m-f)+(u-p)*(u-p)+(c-l)*(c-l));return Math.abs(y)<.001&&(y=1),this.x=(m-f)/y,this.y=(u-p)/y,this.z=(c-l)/y,this.w=Math.acos((h+d+g-1)/2),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this.w=e[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=U(this.x,t.x,e.x),this.y=U(this.y,t.y,e.y),this.z=U(this.z,t.z,e.z),this.w=U(this.w,t.w,e.w),this}clampScalar(t,e){return this.x=U(this.x,t,e),this.y=U(this.y,t,e),this.z=U(this.z,t,e),this.w=U(this.w,t,e),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(U(i,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this.w=t.w+(e.w-t.w)*i,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class ot{constructor(t=new V(1/0,1/0,1/0),e=new V(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e+=3)this.expandByPoint(lt.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,i=t.count;e<i;e++)this.expandByPoint(lt.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const i=lt.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const i=t.geometry;if(void 0!==i){const r=i.getAttribute("position");if(!0===e&&void 0!==r&&!0!==t.isInstancedMesh)for(let e=0,i=r.count;e<i;e++)!0===t.isMesh?t.getVertexPosition(e,lt):lt.fromBufferAttribute(r,e),lt.applyMatrix4(t.matrixWorld),this.expandByPoint(lt);else void 0!==t.boundingBox?(null===t.boundingBox&&t.computeBoundingBox(),ut.copy(t.boundingBox)):(null===i.boundingBox&&i.computeBoundingBox(),ut.copy(i.boundingBox)),ut.applyMatrix4(t.matrixWorld),this.union(ut)}const r=t.children;for(let t=0,i=r.length;t<i;t++)this.expandByObject(r[t],e);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,lt),lt.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(yt),_t.subVectors(this.max,yt),ct.subVectors(t.a,yt),dt.subVectors(t.b,yt),ft.subVectors(t.c,yt),pt.subVectors(dt,ct),mt.subVectors(ft,dt),gt.subVectors(ct,ft);let e=[0,-pt.z,pt.y,0,-mt.z,mt.y,0,-gt.z,gt.y,pt.z,0,-pt.x,mt.z,0,-mt.x,gt.z,0,-gt.x,-pt.y,pt.x,0,-mt.y,mt.x,0,-gt.y,gt.x,0];return!!wt(e,ct,dt,ft,_t)&&(e=[1,0,0,0,1,0,0,0,1],!!wt(e,ct,dt,ft,_t)&&(bt.crossVectors(pt,mt),e=[bt.x,bt.y,bt.z],wt(e,ct,dt,ft,_t)))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,lt).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=.5*this.getSize(lt).length()),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(ht[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),ht[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),ht[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),ht[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),ht[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),ht[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),ht[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),ht[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(ht)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(t){return this.min.fromArray(t.min),this.max.fromArray(t.max),this}}const ht=[new V,new V,new V,new V,new V,new V,new V,new V],lt=new V,ut=new ot,ct=new V,dt=new V,ft=new V,pt=new V,mt=new V,gt=new V,yt=new V,_t=new V,bt=new V,xt=new V;function wt(t,e,i,r,s){for(let n=0,a=t.length-3;n<=a;n+=3){xt.fromArray(t,n);const a=s.x*Math.abs(xt.x)+s.y*Math.abs(xt.y)+s.z*Math.abs(xt.z),o=e.dot(xt),h=i.dot(xt),l=r.dot(xt);if(Math.max(-Math.max(o,h,l),Math.min(o,h,l))>a)return!1}return!0}const Tt=new ot,It=new V,vt=new V;class At{constructor(t=new V,e=-1){this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const i=this.center;void 0!==e?i.copy(e):Tt.setFromPoints(t).getCenter(i);let r=0;for(let e=0,s=t.length;e<s;e++)r=Math.max(r,i.distanceToSquared(t[e]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const i=this.center.distanceToSquared(t);return e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;It.subVectors(t,this.center);const e=It.lengthSq();if(e>this.radius*this.radius){const t=Math.sqrt(e),i=.5*(t-this.radius);this.center.addScaledVector(It,i/t),this.radius+=i}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(vt.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(It.copy(t.center).add(vt)),this.expandByPoint(It.copy(t.center).sub(vt))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(t){return this.radius=t.radius,this.center.fromArray(t.center),this}}class Et{constructor(t,e,i,r,s,n,a,o,h,l,u,c,d,f,p,m){Et.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==t&&this.set(t,e,i,r,s,n,a,o,h,l,u,c,d,f,p,m)}set(t,e,i,r,s,n,a,o,h,l,u,c,d,f,p,m){const g=this.elements;return g[0]=t,g[4]=e,g[8]=i,g[12]=r,g[1]=s,g[5]=n,g[9]=a,g[13]=o,g[2]=h,g[6]=l,g[10]=u,g[14]=c,g[3]=d,g[7]=f,g[11]=p,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Et).fromArray(this.elements)}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this}copyPosition(t){const e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,i){return 0===this.determinant()?(t.set(1,0,0),e.set(0,1,0),i.set(0,0,1),this):(t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this)}makeBasis(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this}extractRotation(t){if(0===t.determinant())return this.identity();const e=this.elements,i=t.elements,r=1/Nt.setFromMatrixColumn(t,0).length(),s=1/Nt.setFromMatrixColumn(t,1).length(),n=1/Nt.setFromMatrixColumn(t,2).length();return e[0]=i[0]*r,e[1]=i[1]*r,e[2]=i[2]*r,e[3]=0,e[4]=i[4]*s,e[5]=i[5]*s,e[6]=i[6]*s,e[7]=0,e[8]=i[8]*n,e[9]=i[9]*n,e[10]=i[10]*n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,i=t.x,r=t.y,s=t.z,n=Math.cos(i),a=Math.sin(i),o=Math.cos(r),h=Math.sin(r),l=Math.cos(s),u=Math.sin(s);if("XYZ"===t.order){const t=n*l,i=n*u,r=a*l,s=a*u;e[0]=o*l,e[4]=-o*u,e[8]=h,e[1]=i+r*h,e[5]=t-s*h,e[9]=-a*o,e[2]=s-t*h,e[6]=r+i*h,e[10]=n*o}else if("YXZ"===t.order){const t=o*l,i=o*u,r=h*l,s=h*u;e[0]=t+s*a,e[4]=r*a-i,e[8]=n*h,e[1]=n*u,e[5]=n*l,e[9]=-a,e[2]=i*a-r,e[6]=s+t*a,e[10]=n*o}else if("ZXY"===t.order){const t=o*l,i=o*u,r=h*l,s=h*u;e[0]=t-s*a,e[4]=-n*u,e[8]=r+i*a,e[1]=i+r*a,e[5]=n*l,e[9]=s-t*a,e[2]=-n*h,e[6]=a,e[10]=n*o}else if("ZYX"===t.order){const t=n*l,i=n*u,r=a*l,s=a*u;e[0]=o*l,e[4]=r*h-i,e[8]=t*h+s,e[1]=o*u,e[5]=s*h+t,e[9]=i*h-r,e[2]=-h,e[6]=a*o,e[10]=n*o}else if("YZX"===t.order){const t=n*o,i=n*h,r=a*o,s=a*h;e[0]=o*l,e[4]=s-t*u,e[8]=r*u+i,e[1]=u,e[5]=n*l,e[9]=-a*l,e[2]=-h*l,e[6]=i*u+r,e[10]=t-s*u}else if("XZY"===t.order){const t=n*o,i=n*h,r=a*o,s=a*h;e[0]=o*l,e[4]=-u,e[8]=h*l,e[1]=t*u+s,e[5]=n*l,e[9]=i*u-r,e[2]=r*u-i,e[6]=a*l,e[10]=s*u+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Mt,t,kt)}lookAt(t,e,i){const r=this.elements;return zt.subVectors(t,e),0===zt.lengthSq()&&(zt.z=1),zt.normalize(),Ft.crossVectors(i,zt),0===Ft.lengthSq()&&(1===Math.abs(i.z)?zt.x+=1e-4:zt.z+=1e-4,zt.normalize(),Ft.crossVectors(i,zt)),Ft.normalize(),Ct.crossVectors(zt,Ft),r[0]=Ft.x,r[4]=Ct.x,r[8]=zt.x,r[1]=Ft.y,r[5]=Ct.y,r[9]=zt.y,r[2]=Ft.z,r[6]=Ct.z,r[10]=zt.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,r=e.elements,s=this.elements,n=i[0],a=i[4],o=i[8],h=i[12],l=i[1],u=i[5],c=i[9],d=i[13],f=i[2],p=i[6],m=i[10],g=i[14],y=i[3],_=i[7],b=i[11],x=i[15],w=r[0],T=r[4],I=r[8],v=r[12],A=r[1],E=r[5],N=r[9],S=r[13],M=r[2],k=r[6],F=r[10],C=r[14],z=r[3],U=r[7],D=r[11],B=r[15];return s[0]=n*w+a*A+o*M+h*z,s[4]=n*T+a*E+o*k+h*U,s[8]=n*I+a*N+o*F+h*D,s[12]=n*v+a*S+o*C+h*B,s[1]=l*w+u*A+c*M+d*z,s[5]=l*T+u*E+c*k+d*U,s[9]=l*I+u*N+c*F+d*D,s[13]=l*v+u*S+c*C+d*B,s[2]=f*w+p*A+m*M+g*z,s[6]=f*T+p*E+m*k+g*U,s[10]=f*I+p*N+m*F+g*D,s[14]=f*v+p*S+m*C+g*B,s[3]=y*w+_*A+b*M+x*z,s[7]=y*T+_*E+b*k+x*U,s[11]=y*I+_*N+b*F+x*D,s[15]=y*v+_*S+b*C+x*B,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[4],r=t[8],s=t[12],n=t[1],a=t[5],o=t[9],h=t[13],l=t[2],u=t[6],c=t[10],d=t[14],f=t[3],p=t[7],m=t[11],g=t[15],y=o*d-h*c,_=a*d-h*u,b=a*c-o*u,x=n*d-h*l,w=n*c-o*l,T=n*u-a*l;return e*(p*y-m*_+g*b)-i*(f*y-m*x+g*w)+r*(f*_-p*x+g*T)-s*(f*b-p*w+m*T)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,i){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=i),this}invert(){const t=this.elements,e=t[0],i=t[1],r=t[2],s=t[3],n=t[4],a=t[5],o=t[6],h=t[7],l=t[8],u=t[9],c=t[10],d=t[11],f=t[12],p=t[13],m=t[14],g=t[15],y=u*m*h-p*c*h+p*o*d-a*m*d-u*o*g+a*c*g,_=f*c*h-l*m*h-f*o*d+n*m*d+l*o*g-n*c*g,b=l*p*h-f*u*h+f*a*d-n*p*d-l*a*g+n*u*g,x=f*u*o-l*p*o-f*a*c+n*p*c+l*a*m-n*u*m,w=e*y+i*_+r*b+s*x;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const T=1/w;return t[0]=y*T,t[1]=(p*c*s-u*m*s-p*r*d+i*m*d+u*r*g-i*c*g)*T,t[2]=(a*m*s-p*o*s+p*r*h-i*m*h-a*r*g+i*o*g)*T,t[3]=(u*o*s-a*c*s-u*r*h+i*c*h+a*r*d-i*o*d)*T,t[4]=_*T,t[5]=(l*m*s-f*c*s+f*r*d-e*m*d-l*r*g+e*c*g)*T,t[6]=(f*o*s-n*m*s-f*r*h+e*m*h+n*r*g-e*o*g)*T,t[7]=(n*c*s-l*o*s+l*r*h-e*c*h-n*r*d+e*o*d)*T,t[8]=b*T,t[9]=(f*u*s-l*p*s-f*i*d+e*p*d+l*i*g-e*u*g)*T,t[10]=(n*p*s-f*a*s+f*i*h-e*p*h-n*i*g+e*a*g)*T,t[11]=(l*a*s-n*u*s-l*i*h+e*u*h+n*i*d-e*a*d)*T,t[12]=x*T,t[13]=(l*p*r-f*u*r+f*i*c-e*p*c-l*i*m+e*u*m)*T,t[14]=(f*a*r-n*p*r-f*i*o+e*p*o+n*i*m-e*a*m)*T,t[15]=(n*u*r-l*a*r+l*i*o-e*u*o-n*i*c+e*a*c)*T,this}scale(t){const e=this.elements,i=t.x,r=t.y,s=t.z;return e[0]*=i,e[4]*=r,e[8]*=s,e[1]*=i,e[5]*=r,e[9]*=s,e[2]*=i,e[6]*=r,e[10]*=s,e[3]*=i,e[7]*=r,e[11]*=s,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,r))}makeTranslation(t,e,i){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const i=Math.cos(e),r=Math.sin(e),s=1-i,n=t.x,a=t.y,o=t.z,h=s*n,l=s*a;return this.set(h*n+i,h*a-r*o,h*o+r*a,0,h*a+r*o,l*a+i,l*o-r*n,0,h*o-r*a,l*o+r*n,s*o*o+i,0,0,0,0,1),this}makeScale(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,e,i,r,s,n){return this.set(1,i,s,0,t,1,n,0,e,r,1,0,0,0,0,1),this}compose(t,e,i){const r=this.elements,s=e._x,n=e._y,a=e._z,o=e._w,h=s+s,l=n+n,u=a+a,c=s*h,d=s*l,f=s*u,p=n*l,m=n*u,g=a*u,y=o*h,_=o*l,b=o*u,x=i.x,w=i.y,T=i.z;return r[0]=(1-(p+g))*x,r[1]=(d+b)*x,r[2]=(f-_)*x,r[3]=0,r[4]=(d-b)*w,r[5]=(1-(c+g))*w,r[6]=(m+y)*w,r[7]=0,r[8]=(f+_)*T,r[9]=(m-y)*T,r[10]=(1-(c+p))*T,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,i){const r=this.elements;if(t.x=r[12],t.y=r[13],t.z=r[14],0===this.determinant())return i.set(1,1,1),e.identity(),this;let s=Nt.set(r[0],r[1],r[2]).length();const n=Nt.set(r[4],r[5],r[6]).length(),a=Nt.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),St.copy(this);const o=1/s,h=1/n,l=1/a;return St.elements[0]*=o,St.elements[1]*=o,St.elements[2]*=o,St.elements[4]*=h,St.elements[5]*=h,St.elements[6]*=h,St.elements[8]*=l,St.elements[9]*=l,St.elements[10]*=l,e.setFromRotationMatrix(St),i.x=s,i.y=n,i.z=a,this}makePerspective(t,e,i,r,s,n,a=2e3,o=!1){const h=this.elements,l=2*s/(e-t),u=2*s/(i-r),c=(e+t)/(e-t),d=(i+r)/(i-r);let f,p;if(o)f=s/(n-s),p=n*s/(n-s);else if(a===T)f=-(n+s)/(n-s),p=-2*n*s/(n-s);else{if(a!==I)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);f=-n/(n-s),p=-n*s/(n-s)}return h[0]=l,h[4]=0,h[8]=c,h[12]=0,h[1]=0,h[5]=u,h[9]=d,h[13]=0,h[2]=0,h[6]=0,h[10]=f,h[14]=p,h[3]=0,h[7]=0,h[11]=-1,h[15]=0,this}makeOrthographic(t,e,i,r,s,n,a=2e3,o=!1){const h=this.elements,l=2/(e-t),u=2/(i-r),c=-(e+t)/(e-t),d=-(i+r)/(i-r);let f,p;if(o)f=1/(n-s),p=n/(n-s);else if(a===T)f=-2/(n-s),p=-(n+s)/(n-s);else{if(a!==I)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);f=-1/(n-s),p=-s/(n-s)}return h[0]=l,h[4]=0,h[8]=0,h[12]=c,h[1]=0,h[5]=u,h[9]=0,h[13]=d,h[2]=0,h[6]=0,h[10]=f,h[14]=p,h[3]=0,h[7]=0,h[11]=0,h[15]=1,this}equals(t){const e=this.elements,i=t.elements;for(let t=0;t<16;t++)if(e[t]!==i[t])return!1;return!0}fromArray(t,e=0){for(let i=0;i<16;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}}const Nt=new V,St=new Et,Mt=new V(0,0,0),kt=new V(1,1,1),Ft=new V,Ct=new V,zt=new V,Ut=new Et,Dt=new P;class Bt{constructor(t=0,e=0,i=0,r=Bt.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=i,this._order=r}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,i,r=this._order){return this._x=t,this._y=e,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,i=!0){const r=t.elements,s=r[0],n=r[4],a=r[8],o=r[1],h=r[5],l=r[9],u=r[2],c=r[6],d=r[10];switch(e){case"XYZ":this._y=Math.asin(U(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-l,d),this._z=Math.atan2(-n,s)):(this._x=Math.atan2(c,h),this._z=0);break;case"YXZ":this._x=Math.asin(-U(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(o,h)):(this._y=Math.atan2(-u,s),this._z=0);break;case"ZXY":this._x=Math.asin(U(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-n,h)):(this._y=0,this._z=Math.atan2(o,s));break;case"ZYX":this._y=Math.asin(-U(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(c,d),this._z=Math.atan2(o,s)):(this._x=0,this._z=Math.atan2(-n,h));break;case"YZX":this._z=Math.asin(U(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-l,h),this._y=Math.atan2(-u,s)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-U(n,-1,1)),Math.abs(n)<.9999999?(this._x=Math.atan2(c,h),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-l,d),this._y=0);break;default:S("Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===i&&this._onChangeCallback(),this}setFromQuaternion(t,e,i){return Ut.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Ut,e,i)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return Dt.setFromEuler(this),this.setFromQuaternion(Dt,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Bt.DEFAULT_ORDER="XYZ";class Ot{constructor(){this.mask=1}set(t){this.mask=1<<t>>>0}enable(t){this.mask|=1<<t}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t}disable(t){this.mask&=~(1<<t)}disableAll(){this.mask=0}test(t){return!!(this.mask&t.mask)}isEnabled(t){return!!(this.mask&1<<t)}}let Rt=0;const Lt=new V,Pt=new P,Vt=new Et,Gt=new V,qt=new V,Yt=new V,jt=new P,Zt=new V(1,0,0),Wt=new V(0,1,0),Ht=new V(0,0,1),Xt={type:"added"},$t={type:"removed"},Kt={type:"childadded",child:null},Qt={type:"childremoved",child:null};class Jt extends F{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Rt++}),this.uuid=z(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Jt.DEFAULT_UP.clone();const t=new V,e=new Bt,i=new P,r=new V(1,1,1);e._onChange((function(){i.setFromEuler(e,!1)})),i._onChange((function(){e.setFromQuaternion(i,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Et},normalMatrix:{value:new Y}}),this.matrix=new Et,this.matrixWorld=new Et,this.matrixAutoUpdate=Jt.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Jt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Ot,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return Pt.setFromAxisAngle(t,e),this.quaternion.multiply(Pt),this}rotateOnWorldAxis(t,e){return Pt.setFromAxisAngle(t,e),this.quaternion.premultiply(Pt),this}rotateX(t){return this.rotateOnAxis(Zt,t)}rotateY(t){return this.rotateOnAxis(Wt,t)}rotateZ(t){return this.rotateOnAxis(Ht,t)}translateOnAxis(t,e){return Lt.copy(t).applyQuaternion(this.quaternion),this.position.add(Lt.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(Zt,t)}translateY(t){return this.translateOnAxis(Wt,t)}translateZ(t){return this.translateOnAxis(Ht,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Vt.copy(this.matrixWorld).invert())}lookAt(t,e,i){t.isVector3?Gt.copy(t):Gt.set(t,e,i);const r=this.parent;this.updateWorldMatrix(!0,!1),qt.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Vt.lookAt(qt,Gt,this.up):Vt.lookAt(Gt,qt,this.up),this.quaternion.setFromRotationMatrix(Vt),r&&(Vt.extractRotation(r.matrixWorld),Pt.setFromRotationMatrix(Vt),this.quaternion.premultiply(Pt.invert()))}add(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(M("Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(Xt),Kt.child=t,this.dispatchEvent(Kt),Kt.child=null):M("Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent($t),Qt.child=t,this.dispatchEvent(Qt),Qt.child=null),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),Vt.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Vt.multiply(t.parent.matrixWorld)),t.applyMatrix4(Vt),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(Xt),Kt.child=t,this.dispatchEvent(Kt),Kt.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let i=0,r=this.children.length;i<r;i++){const r=this.children[i].getObjectByProperty(t,e);if(void 0!==r)return r}}getObjectsByProperty(t,e,i=[]){this[t]===e&&i.push(this);const r=this.children;for(let s=0,n=r.length;s<n;s++)r[s].getObjectsByProperty(t,e,i);return i}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(qt,t,Yt),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(qt,jt,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let i=0,r=e.length;i<r;i++)e[i].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const e=this.children;for(let i=0,r=e.length;i<r;i++)e[i].traverseVisible(t)}traverseAncestors(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let i=0,r=e.length;i<r;i++){e[i].updateMatrixWorld(t)}}updateWorldMatrix(t,e){const i=this.parent;if(!0===t&&null!==i&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===e){const t=this.children;for(let e=0,i=t.length;e<i;e++){t[e].updateWorldMatrix(!1,!0)}}}toJSON(t){const e=void 0===t||"string"==typeof t,i={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const r={};function s(e,i){return void 0===e[i.uuid]&&(e[i.uuid]=i.toJSON(t)),i.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.geometryInfo=this._geometryInfo.map((t=>({...t,boundingBox:t.boundingBox?t.boundingBox.toJSON():void 0,boundingSphere:t.boundingSphere?t.boundingSphere.toJSON():void 0}))),r.instanceInfo=this._instanceInfo.map((t=>({...t}))),r.availableInstanceIds=this._availableInstanceIds.slice(),r.availableGeometryIds=this._availableGeometryIds.slice(),r.nextIndexStart=this._nextIndexStart,r.nextVertexStart=this._nextVertexStart,r.geometryCount=this._geometryCount,r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.matricesTexture=this._matricesTexture.toJSON(t),r.indirectTexture=this._indirectTexture.toJSON(t),null!==this._colorsTexture&&(r.colorsTexture=this._colorsTexture.toJSON(t)),null!==this.boundingSphere&&(r.boundingSphere=this.boundingSphere.toJSON()),null!==this.boundingBox&&(r.boundingBox=this.boundingBox.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const i=e.shapes;if(Array.isArray(i))for(let e=0,r=i.length;e<r;e++){const r=i[e];s(t.shapes,r)}else s(t.shapes,i)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(s(t.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let i=0,r=this.material.length;i<r;i++)e.push(s(t.materials,this.material[i]));r.material=e}else r.material=s(t.materials,this.material);if(this.children.length>0){r.children=[];for(let e=0;e<this.children.length;e++)r.children.push(this.children[e].toJSON(t).object)}if(this.animations.length>0){r.animations=[];for(let e=0;e<this.animations.length;e++){const i=this.animations[e];r.animations.push(s(t.animations,i))}}if(e){const e=n(t.geometries),r=n(t.materials),s=n(t.textures),a=n(t.images),o=n(t.shapes),h=n(t.skeletons),l=n(t.animations),u=n(t.nodes);e.length>0&&(i.geometries=e),r.length>0&&(i.materials=r),s.length>0&&(i.textures=s),a.length>0&&(i.images=a),o.length>0&&(i.shapes=o),h.length>0&&(i.skeletons=h),l.length>0&&(i.animations=l),u.length>0&&(i.nodes=u)}return i.object=r,i;function n(t){const e=[];for(const i in t){const r=t[i];delete r.metadata,e.push(r)}return e}}clone(t){return(new this.constructor).copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let e=0;e<t.children.length;e++){const i=t.children[e];this.add(i.clone())}return this}}Jt.DEFAULT_UP=new V(0,1,0),Jt.DEFAULT_MATRIX_AUTO_UPDATE=!0,Jt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const te={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ee={h:0,s:0,l:0},ie={h:0,s:0,l:0};function re(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+6*(e-t)*(2/3-i):t}class se{constructor(t,e,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,i)}set(t,e,i){if(void 0===e&&void 0===i){const e=t;e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e)}else this.setRGB(t,e,i);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=y){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,X.colorSpaceToWorking(this,e),this}setRGB(t,e,i,r=X.workingColorSpace){return this.r=t,this.g=e,this.b=i,X.colorSpaceToWorking(this,r),this}setHSL(t,e,i,r=X.workingColorSpace){if(t=D(t,1),e=U(e,0,1),i=U(i,0,1),0===e)this.r=this.g=this.b=i;else{const r=i<=.5?i*(1+e):i+e-i*e,s=2*i-r;this.r=re(s,r,t+1/3),this.g=re(s,r,t),this.b=re(s,r,t-1/3)}return X.colorSpaceToWorking(this,r),this}setStyle(t,e=y){function i(e){void 0!==e&&parseFloat(e)<1&&S("Color: Alpha component of "+t+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(t)){let s;const n=r[1],a=r[2];switch(n){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,e);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,e);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,e);break;default:S("Color: Unknown color model "+t)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(t)){const i=r[1],s=i.length;if(3===s)return this.setRGB(parseInt(i.charAt(0),16)/15,parseInt(i.charAt(1),16)/15,parseInt(i.charAt(2),16)/15,e);if(6===s)return this.setHex(parseInt(i,16),e);S("Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=y){const i=te[t.toLowerCase()];return void 0!==i?this.setHex(i,e):S("Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=$(t.r),this.g=$(t.g),this.b=$(t.b),this}copyLinearToSRGB(t){return this.r=K(t.r),this.g=K(t.g),this.b=K(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=y){return X.workingToColorSpace(ne.copy(this),t),65536*Math.round(U(255*ne.r,0,255))+256*Math.round(U(255*ne.g,0,255))+Math.round(U(255*ne.b,0,255))}getHexString(t=y){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=X.workingColorSpace){X.workingToColorSpace(ne.copy(this),e);const i=ne.r,r=ne.g,s=ne.b,n=Math.max(i,r,s),a=Math.min(i,r,s);let o,h;const l=(a+n)/2;if(a===n)o=0,h=0;else{const t=n-a;switch(h=l<=.5?t/(n+a):t/(2-n-a),n){case i:o=(r-s)/t+(r<s?6:0);break;case r:o=(s-i)/t+2;break;case s:o=(i-r)/t+4}o/=6}return t.h=o,t.s=h,t.l=l,t}getRGB(t,e=X.workingColorSpace){return X.workingToColorSpace(ne.copy(this),e),t.r=ne.r,t.g=ne.g,t.b=ne.b,t}getStyle(t=y){X.workingToColorSpace(ne.copy(this),t);const e=ne.r,i=ne.g,r=ne.b;return t!==y?`color(${t} ${e.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(255*e)},${Math.round(255*i)},${Math.round(255*r)})`}offsetHSL(t,e,i){return this.getHSL(ee),this.setHSL(ee.h+t,ee.s+e,ee.l+i)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,i){return this.r=t.r+(e.r-t.r)*i,this.g=t.g+(e.g-t.g)*i,this.b=t.b+(e.b-t.b)*i,this}lerpHSL(t,e){this.getHSL(ee),t.getHSL(ie);const i=B(ee.h,ie.h,e),r=B(ee.s,ie.s,e),s=B(ee.l,ie.l,e);return this.setHSL(i,r,s),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const e=this.r,i=this.g,r=this.b,s=t.elements;return this.r=s[0]*e+s[3]*i+s[6]*r,this.g=s[1]*e+s[4]*i+s[7]*r,this.b=s[2]*e+s[5]*i+s[8]*r,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const ne=new se;se.NAMES=te;const ae=new V,oe=new L;let he=0;class le{constructor(t,e,i=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:he++}),this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=i,this.usage=w,this.updateRanges=[],this.gpuType=u,this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,i){t*=this.itemSize,i*=e.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[t+r]=e.array[i+r];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,i=this.count;e<i;e++)oe.fromBufferAttribute(this,e),oe.applyMatrix3(t),this.setXY(e,oe.x,oe.y);else if(3===this.itemSize)for(let e=0,i=this.count;e<i;e++)ae.fromBufferAttribute(this,e),ae.applyMatrix3(t),this.setXYZ(e,ae.x,ae.y,ae.z);return this}applyMatrix4(t){for(let e=0,i=this.count;e<i;e++)ae.fromBufferAttribute(this,e),ae.applyMatrix4(t),this.setXYZ(e,ae.x,ae.y,ae.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)ae.fromBufferAttribute(this,e),ae.applyNormalMatrix(t),this.setXYZ(e,ae.x,ae.y,ae.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)ae.fromBufferAttribute(this,e),ae.transformDirection(t),this.setXYZ(e,ae.x,ae.y,ae.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,e){let i=this.array[t*this.itemSize+e];return this.normalized&&(i=O(i,this.array)),i}setComponent(t,e,i){return this.normalized&&(i=R(i,this.array)),this.array[t*this.itemSize+e]=i,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=O(e,this.array)),e}setX(t,e){return this.normalized&&(e=R(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=O(e,this.array)),e}setY(t,e){return this.normalized&&(e=R(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=O(e,this.array)),e}setZ(t,e){return this.normalized&&(e=R(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=O(e,this.array)),e}setW(t,e){return this.normalized&&(e=R(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,i){return t*=this.itemSize,this.normalized&&(e=R(e,this.array),i=R(i,this.array)),this.array[t+0]=e,this.array[t+1]=i,this}setXYZ(t,e,i,r){return t*=this.itemSize,this.normalized&&(e=R(e,this.array),i=R(i,this.array),r=R(r,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=r,this}setXYZW(t,e,i,r,s){return t*=this.itemSize,this.normalized&&(e=R(e,this.array),i=R(i,this.array),r=R(r,this.array),s=R(s,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=r,this.array[t+3]=s,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),this.usage!==w&&(t.usage=this.usage),t}}class ue extends le{constructor(t,e,i){super(new Uint16Array(t),e,i)}}class ce extends le{constructor(t,e,i){super(new Uint32Array(t),e,i)}}class de extends le{constructor(t,e,i){super(new Float32Array(t),e,i)}}let fe=0;const pe=new Et,me=new Jt,ge=new V,ye=new ot,_e=new ot,be=new V;class xe extends F{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:fe++}),this.uuid=z(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.indirectOffset=0,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(function(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}(t)?ce:ue)(t,1):this.index=t,this}setIndirect(t,e=0){return this.indirect=t,this.indirectOffset=e,this}getIndirect(){return this.indirect}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,i=0){this.groups.push({start:t,count:e,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const e=(new Y).getNormalMatrix(t);i.applyNormalMatrix(e),i.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(t),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return pe.makeRotationFromQuaternion(t),this.applyMatrix4(pe),this}rotateX(t){return pe.makeRotationX(t),this.applyMatrix4(pe),this}rotateY(t){return pe.makeRotationY(t),this.applyMatrix4(pe),this}rotateZ(t){return pe.makeRotationZ(t),this.applyMatrix4(pe),this}translate(t,e,i){return pe.makeTranslation(t,e,i),this.applyMatrix4(pe),this}scale(t,e,i){return pe.makeScale(t,e,i),this.applyMatrix4(pe),this}lookAt(t){return me.lookAt(t),me.updateMatrix(),this.applyMatrix4(me.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ge).negate(),this.translate(ge.x,ge.y,ge.z),this}setFromPoints(t){const e=this.getAttribute("position");if(void 0===e){const e=[];for(let i=0,r=t.length;i<r;i++){const r=t[i];e.push(r.x,r.y,r.z||0)}this.setAttribute("position",new de(e,3))}else{const i=Math.min(t.length,e.count);for(let r=0;r<i;r++){const i=t[r];e.setXYZ(r,i.x,i.y,i.z||0)}t.length>e.count&&S("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),e.needsUpdate=!0}return this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new ot);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return M("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new V(-1/0,-1/0,-1/0),new V(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let t=0,i=e.length;t<i;t++){const i=e[t];ye.setFromBufferAttribute(i),this.morphTargetsRelative?(be.addVectors(this.boundingBox.min,ye.min),this.boundingBox.expandByPoint(be),be.addVectors(this.boundingBox.max,ye.max),this.boundingBox.expandByPoint(be)):(this.boundingBox.expandByPoint(ye.min),this.boundingBox.expandByPoint(ye.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&M('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new At);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return M("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new V,1/0);if(t){const i=this.boundingSphere.center;if(ye.setFromBufferAttribute(t),e)for(let t=0,i=e.length;t<i;t++){const i=e[t];_e.setFromBufferAttribute(i),this.morphTargetsRelative?(be.addVectors(ye.min,_e.min),ye.expandByPoint(be),be.addVectors(ye.max,_e.max),ye.expandByPoint(be)):(ye.expandByPoint(_e.min),ye.expandByPoint(_e.max))}ye.getCenter(i);let r=0;for(let e=0,s=t.count;e<s;e++)be.fromBufferAttribute(t,e),r=Math.max(r,i.distanceToSquared(be));if(e)for(let s=0,n=e.length;s<n;s++){const n=e[s],a=this.morphTargetsRelative;for(let e=0,s=n.count;e<s;e++)be.fromBufferAttribute(n,e),a&&(ge.fromBufferAttribute(t,e),be.add(ge)),r=Math.max(r,i.distanceToSquared(be))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&M('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void M("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=e.position,r=e.normal,s=e.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new le(new Float32Array(4*i.count),4));const n=this.getAttribute("tangent"),a=[],o=[];for(let t=0;t<i.count;t++)a[t]=new V,o[t]=new V;const h=new V,l=new V,u=new V,c=new L,d=new L,f=new L,p=new V,m=new V;function g(t,e,r){h.fromBufferAttribute(i,t),l.fromBufferAttribute(i,e),u.fromBufferAttribute(i,r),c.fromBufferAttribute(s,t),d.fromBufferAttribute(s,e),f.fromBufferAttribute(s,r),l.sub(h),u.sub(h),d.sub(c),f.sub(c);const n=1/(d.x*f.y-f.x*d.y);isFinite(n)&&(p.copy(l).multiplyScalar(f.y).addScaledVector(u,-d.y).multiplyScalar(n),m.copy(u).multiplyScalar(d.x).addScaledVector(l,-f.x).multiplyScalar(n),a[t].add(p),a[e].add(p),a[r].add(p),o[t].add(m),o[e].add(m),o[r].add(m))}let y=this.groups;0===y.length&&(y=[{start:0,count:t.count}]);for(let e=0,i=y.length;e<i;++e){const i=y[e],r=i.start;for(let e=r,s=r+i.count;e<s;e+=3)g(t.getX(e+0),t.getX(e+1),t.getX(e+2))}const _=new V,b=new V,x=new V,w=new V;function T(t){x.fromBufferAttribute(r,t),w.copy(x);const e=a[t];_.copy(e),_.sub(x.multiplyScalar(x.dot(e))).normalize(),b.crossVectors(w,e);const i=b.dot(o[t])<0?-1:1;n.setXYZW(t,_.x,_.y,_.z,i)}for(let e=0,i=y.length;e<i;++e){const i=y[e],r=i.start;for(let e=r,s=r+i.count;e<s;e+=3)T(t.getX(e+0)),T(t.getX(e+1)),T(t.getX(e+2))}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let i=this.getAttribute("normal");if(void 0===i)i=new le(new Float32Array(3*e.count),3),this.setAttribute("normal",i);else for(let t=0,e=i.count;t<e;t++)i.setXYZ(t,0,0,0);const r=new V,s=new V,n=new V,a=new V,o=new V,h=new V,l=new V,u=new V;if(t)for(let c=0,d=t.count;c<d;c+=3){const d=t.getX(c+0),f=t.getX(c+1),p=t.getX(c+2);r.fromBufferAttribute(e,d),s.fromBufferAttribute(e,f),n.fromBufferAttribute(e,p),l.subVectors(n,s),u.subVectors(r,s),l.cross(u),a.fromBufferAttribute(i,d),o.fromBufferAttribute(i,f),h.fromBufferAttribute(i,p),a.add(l),o.add(l),h.add(l),i.setXYZ(d,a.x,a.y,a.z),i.setXYZ(f,o.x,o.y,o.z),i.setXYZ(p,h.x,h.y,h.z)}else for(let t=0,a=e.count;t<a;t+=3)r.fromBufferAttribute(e,t+0),s.fromBufferAttribute(e,t+1),n.fromBufferAttribute(e,t+2),l.subVectors(n,s),u.subVectors(r,s),l.cross(u),i.setXYZ(t+0,l.x,l.y,l.z),i.setXYZ(t+1,l.x,l.y,l.z),i.setXYZ(t+2,l.x,l.y,l.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let e=0,i=t.count;e<i;e++)be.fromBufferAttribute(t,e),be.normalize(),t.setXYZ(e,be.x,be.y,be.z)}toNonIndexed(){function t(t,e){const i=t.array,r=t.itemSize,s=t.normalized,n=new i.constructor(e.length*r);let a=0,o=0;for(let s=0,h=e.length;s<h;s++){a=t.isInterleavedBufferAttribute?e[s]*t.data.stride+t.offset:e[s]*r;for(let t=0;t<r;t++)n[o++]=i[a++]}return new le(n,r,s)}if(null===this.index)return S("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new xe,i=this.index.array,r=this.attributes;for(const s in r){const n=t(r[s],i);e.setAttribute(s,n)}const s=this.morphAttributes;for(const r in s){const n=[],a=s[r];for(let e=0,r=a.length;e<r;e++){const r=t(a[e],i);n.push(r)}e.morphAttributes[r]=n}e.morphTargetsRelative=this.morphTargetsRelative;const n=this.groups;for(let t=0,i=n.length;t<i;t++){const i=n[t];e.addGroup(i.start,i.count,i.materialIndex)}return e}toJSON(){const t={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const e=this.parameters;for(const i in e)void 0!==e[i]&&(t[i]=e[i]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const i=this.attributes;for(const e in i){const r=i[e];t.data.attributes[e]=r.toJSON(t.data)}const r={};let s=!1;for(const e in this.morphAttributes){const i=this.morphAttributes[e],n=[];for(let e=0,r=i.length;e<r;e++){const r=i[e];n.push(r.toJSON(t.data))}n.length>0&&(r[e]=n,s=!0)}s&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);const n=this.groups;n.length>0&&(t.data.groups=JSON.parse(JSON.stringify(n)));const a=this.boundingSphere;return null!==a&&(t.data.boundingSphere=a.toJSON()),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const i=t.index;null!==i&&this.setIndex(i.clone());const r=t.attributes;for(const t in r){const i=r[t];this.setAttribute(t,i.clone(e))}const s=t.morphAttributes;for(const t in s){const i=[],r=s[t];for(let t=0,s=r.length;t<s;t++)i.push(r[t].clone(e));this.morphAttributes[t]=i}this.morphTargetsRelative=t.morphTargetsRelative;const n=t.groups;for(let t=0,e=n.length;t<e;t++){const e=n[t];this.addGroup(e.start,e.count,e.materialIndex)}const a=t.boundingBox;null!==a&&(this.boundingBox=a.clone());const o=t.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}function we(t,e){return t&&t.constructor!==e?"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t):t}class Te{constructor(t,e,i,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(i),this.sampleValues=e,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let i=this._cachedIndex,r=e[i],s=e[i-1];t:{e:{let n;i:{r:if(!(t<r)){for(let n=i+2;;){if(void 0===r){if(t<s)break r;return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===n)break;if(s=r,r=e[++i],t<r)break e}n=e.length;break i}if(t>=s)break t;{const a=e[1];t<a&&(i=2,s=a);for(let n=i-2;;){if(void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(i===n)break;if(r=s,s=e[--i-1],t>=s)break e}n=i,i=0}}for(;i<n;){const r=i+n>>>1;t<e[r]?n=r:i=r+1}if(r=e[i],s=e[i-1],void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,t,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=t*r;for(let t=0;t!==r;++t)e[t]=i[s+t];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Ie extends Te{constructor(t,e,i,r){super(t,e,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:p,endingEnd:p}}intervalChanged_(t,e,i){const r=this.parameterPositions;let s=t-2,n=t+1,a=r[s],o=r[n];if(void 0===a)switch(this.getSettings_().endingStart){case m:s=t,a=2*e-i;break;case g:s=r.length-2,a=e+r[s]-r[s+1];break;default:s=t,a=i}if(void 0===o)switch(this.getSettings_().endingEnd){case m:n=t,o=2*i-e;break;case g:n=1,o=i+r[1]-r[0];break;default:n=t-1,o=e}const h=.5*(i-e),l=this.valueSize;this._weightPrev=h/(e-a),this._weightNext=h/(o-i),this._offsetPrev=s*l,this._offsetNext=n*l}interpolate_(t,e,i,r){const s=this.resultBuffer,n=this.sampleValues,a=this.valueSize,o=t*a,h=o-a,l=this._offsetPrev,u=this._offsetNext,c=this._weightPrev,d=this._weightNext,f=(i-e)/(r-e),p=f*f,m=p*f,g=-c*m+2*c*p-c*f,y=(1+c)*m+(-1.5-2*c)*p+(-.5+c)*f+1,_=(-1-d)*m+(1.5+d)*p+.5*f,b=d*m-d*p;for(let t=0;t!==a;++t)s[t]=g*n[l+t]+y*n[h+t]+_*n[o+t]+b*n[u+t];return s}}class ve extends Te{constructor(t,e,i,r){super(t,e,i,r)}interpolate_(t,e,i,r){const s=this.resultBuffer,n=this.sampleValues,a=this.valueSize,o=t*a,h=o-a,l=(i-e)/(r-e),u=1-l;for(let t=0;t!==a;++t)s[t]=n[h+t]*u+n[o+t]*l;return s}}class Ae extends Te{constructor(t,e,i,r){super(t,e,i,r)}interpolate_(t){return this.copySampleValue_(t-1)}}class Ee{constructor(t,e,i,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=we(e,this.TimeBufferType),this.values=we(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let i;if(e.toJSON!==this.toJSON)i=e.toJSON(t);else{i={name:t.name,times:we(t.times,Array),values:we(t.values,Array)};const e=t.getInterpolation();e!==t.DefaultInterpolation&&(i.interpolation=e)}return i.type=t.ValueTypeName,i}InterpolantFactoryMethodDiscrete(t){return new Ae(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new ve(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new Ie(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case c:e=this.InterpolantFactoryMethodDiscrete;break;case d:e=this.InterpolantFactoryMethodLinear;break;case f:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}return S("KeyframeTrack:",e),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return c;case this.InterpolantFactoryMethodLinear:return d;case this.InterpolantFactoryMethodSmooth:return f}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let i=0,r=e.length;i!==r;++i)e[i]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let i=0,r=e.length;i!==r;++i)e[i]*=t}return this}trim(t,e){const i=this.times,r=i.length;let s=0,n=r-1;for(;s!==r&&i[s]<t;)++s;for(;-1!==n&&i[n]>e;)--n;if(++n,0!==s||n!==r){s>=n&&(n=Math.max(n,1),s=n-1);const t=this.getValueSize();this.times=i.slice(s,n),this.values=this.values.slice(s*t,n*t)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!=0&&(M("KeyframeTrack: Invalid value size in track.",this),t=!1);const i=this.times,r=this.values,s=i.length;0===s&&(M("KeyframeTrack: Track is empty.",this),t=!1);let n=null;for(let e=0;e!==s;e++){const r=i[e];if("number"==typeof r&&isNaN(r)){M("KeyframeTrack: Time is not a valid number.",this,e,r),t=!1;break}if(null!==n&&n>r){M("KeyframeTrack: Out of order keys.",this,e,r,n),t=!1;break}n=r}if(void 0!==r&&v(r))for(let e=0,i=r.length;e!==i;++e){const i=r[e];if(isNaN(i)){M("KeyframeTrack: Value is not a valid number.",this,e,i),t=!1;break}}return t}optimize(){const t=this.times.slice(),e=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===f,s=t.length-1;let n=1;for(let a=1;a<s;++a){let s=!1;const o=t[a];if(o!==t[a+1]&&(1!==a||o!==t[0]))if(r)s=!0;else{const t=a*i,r=t-i,n=t+i;for(let a=0;a!==i;++a){const i=e[t+a];if(i!==e[r+a]||i!==e[n+a]){s=!0;break}}}if(s){if(a!==n){t[n]=t[a];const r=a*i,s=n*i;for(let t=0;t!==i;++t)e[s+t]=e[r+t]}++n}}if(s>0){t[n]=t[s];for(let t=s*i,r=n*i,a=0;a!==i;++a)e[r+a]=e[t+a];++n}return n!==t.length?(this.times=t.slice(0,n),this.values=e.slice(0,n*i)):(this.times=t,this.values=e),this}clone(){const t=this.times.slice(),e=this.values.slice(),i=new(0,this.constructor)(this.name,t,e);return i.createInterpolant=this.createInterpolant,i}}Ee.prototype.ValueTypeName="",Ee.prototype.TimeBufferType=Float32Array,Ee.prototype.ValueBufferType=Float32Array,Ee.prototype.DefaultInterpolation=d;class Ne extends Ee{constructor(t,e,i){super(t,e,i)}}Ne.prototype.ValueTypeName="bool",Ne.prototype.ValueBufferType=Array,Ne.prototype.DefaultInterpolation=c,Ne.prototype.InterpolantFactoryMethodLinear=void 0,Ne.prototype.InterpolantFactoryMethodSmooth=void 0;class Se extends Ee{constructor(t,e,i,r){super(t,e,i,r)}}Se.prototype.ValueTypeName="color";class Me extends Ee{constructor(t,e,i,r){super(t,e,i,r)}}Me.prototype.ValueTypeName="number";class ke extends Te{constructor(t,e,i,r){super(t,e,i,r)}interpolate_(t,e,i,r){const s=this.resultBuffer,n=this.sampleValues,a=this.valueSize,o=(i-e)/(r-e);let h=t*a;for(let t=h+a;h!==t;h+=4)P.slerpFlat(s,0,n,h-a,n,h,o);return s}}class Fe extends Ee{constructor(t,e,i,r){super(t,e,i,r)}InterpolantFactoryMethodLinear(t){return new ke(this.times,this.values,this.getValueSize(),t)}}Fe.prototype.ValueTypeName="quaternion",Fe.prototype.InterpolantFactoryMethodSmooth=void 0;class Ce extends Ee{constructor(t,e,i){super(t,e,i)}}Ce.prototype.ValueTypeName="string",Ce.prototype.ValueBufferType=Array,Ce.prototype.DefaultInterpolation=c,Ce.prototype.InterpolantFactoryMethodLinear=void 0,Ce.prototype.InterpolantFactoryMethodSmooth=void 0;class ze extends Ee{constructor(t,e,i,r){super(t,e,i,r)}}ze.prototype.ValueTypeName="vector";const Ue={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class De{constructor(t,e,i){const r=this;let s,n=!1,a=0,o=0;const h=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this._abortController=null,this.itemStart=function(t){o++,!1===n&&void 0!==r.onStart&&r.onStart(t,a,o),n=!0},this.itemEnd=function(t){a++,void 0!==r.onProgress&&r.onProgress(t,a,o),a===o&&(n=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(t){void 0!==r.onError&&r.onError(t)},this.resolveURL=function(t){return s?s(t):t},this.setURLModifier=function(t){return s=t,this},this.addHandler=function(t,e){return h.push(t,e),this},this.removeHandler=function(t){const e=h.indexOf(t);return-1!==e&&h.splice(e,2),this},this.getHandler=function(t){for(let e=0,i=h.length;e<i;e+=2){const i=h[e],r=h[e+1];if(i.global&&(i.lastIndex=0),i.test(t))return r}return null},this.abort=function(){return this.abortController.abort(),this._abortController=null,this}}get abortController(){return this._abortController||(this._abortController=new AbortController),this._abortController}}const Be=new De;class Oe{constructor(t){this.manager=void 0!==t?t:Be,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const i=this;return new Promise((function(r,s){i.load(t,r,e,s)}))}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}abort(){return this}}Oe.DEFAULT_MATERIAL_NAME="__DEFAULT";const Re={};class Le extends Error{constructor(t,e){super(t),this.response=e}}class Pe extends Oe{constructor(t){super(t),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(t,e,i,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const s=Ue.get(`file:${t}`);if(void 0!==s)return this.manager.itemStart(t),setTimeout((()=>{e&&e(s),this.manager.itemEnd(t)}),0),s;if(void 0!==Re[t])return void Re[t].push({onLoad:e,onProgress:i,onError:r});Re[t]=[],Re[t].push({onLoad:e,onProgress:i,onError:r});const n=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:"function"==typeof AbortSignal.any?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),a=this.mimeType,o=this.responseType;fetch(n).then((e=>{if(200===e.status||0===e.status){if(0===e.status&&S("FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===e.body||void 0===e.body.getReader)return e;const i=Re[t],r=e.body.getReader(),s=e.headers.get("X-File-Size")||e.headers.get("Content-Length"),n=s?parseInt(s):0,a=0!==n;let o=0;const h=new ReadableStream({start(t){!function e(){r.read().then((({done:r,value:s})=>{if(r)t.close();else{o+=s.byteLength;const r=new ProgressEvent("progress",{lengthComputable:a,loaded:o,total:n});for(let t=0,e=i.length;t<e;t++){const e=i[t];e.onProgress&&e.onProgress(r)}t.enqueue(s),e()}}),(e=>{t.error(e)}))}()}});return new Response(h)}throw new Le(`fetch for "${e.url}" responded with ${e.status}: ${e.statusText}`,e)})).then((t=>{switch(o){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"document":return t.text().then((t=>(new DOMParser).parseFromString(t,a)));case"json":return t.json();default:if(""===a)return t.text();{const e=/charset="?([^;"\s]*)"?/i.exec(a),i=e&&e[1]?e[1].toLowerCase():void 0,r=new TextDecoder(i);return t.arrayBuffer().then((t=>r.decode(t)))}}})).then((e=>{Ue.add(`file:${t}`,e);const i=Re[t];delete Re[t];for(let t=0,r=i.length;t<r;t++){const r=i[t];r.onLoad&&r.onLoad(e)}})).catch((e=>{const i=Re[t];if(void 0===i)throw this.manager.itemError(t),e;delete Re[t];for(let t=0,r=i.length;t<r;t++){const r=i[t];r.onError&&r.onError(e)}this.manager.itemError(t)})).finally((()=>{this.manager.itemEnd(t)})),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}new WeakMap;new WeakMap;const Ve="\\[\\]\\.:\\/",Ge=new RegExp("["+Ve+"]","g"),qe="[^"+Ve+"]",Ye="[^"+Ve.replace("\\.","")+"]",je=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",qe)+/(WCOD+)?/.source.replace("WCOD",Ye)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",qe)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",qe)+"$"),Ze=["material","materials","bones","map"];class We{constructor(t,e,i){this.path=e,this.parsedPath=i||We.parseTrackName(e),this.node=We.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,i){return t&&t.isAnimationObjectGroup?new We.Composite(t,e,i):new We(t,e,i)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(Ge,"")}static parseTrackName(t){const e=je.exec(t);if(null===e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const i={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const t=i.nodeName.substring(r+1);-1!==Ze.indexOf(t)&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=t)}if(null===i.propertyName||0===i.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return i}static findNode(t,e){if(void 0===e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){const i=t.skeleton.getBoneByName(e);if(void 0!==i)return i}if(t.children){const i=function(t){for(let r=0;r<t.length;r++){const s=t[r];if(s.name===e||s.uuid===e)return s;const n=i(s.children);if(n)return n}return null},r=i(t.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)t[e++]=i[r]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,i=e.objectName,r=e.propertyName;let s=e.propertyIndex;if(t||(t=We.findNode(this.rootNode,e.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void S("PropertyBinding: No target node found for track: "+this.path+".");if(i){let r=e.objectIndex;switch(i){case"materials":if(!t.material)return void M("PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void M("PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void M("PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let e=0;e<t.length;e++)if(t[e].name===r){r=e;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void M("PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void M("PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[i])return void M("PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[i]}if(void 0!==r){if(void 0===t[r])return void M("PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[r]}}const n=t[r];if(void 0===n){return void M("PropertyBinding: Trying to update property for track: "+e.nodeName+"."+r+" but it wasn't found.",t)}let a=this.Versioning.None;this.targetObject=t,!0===t.isMaterial?a=this.Versioning.NeedsUpdate:!0===t.isObject3D&&(a=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(void 0!==s){if("morphTargetInfluences"===r){if(!t.geometry)return void M("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void M("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[s]&&(s=t.morphTargetDictionary[s])}o=this.BindingType.ArrayElement,this.resolvedProperty=n,this.propertyIndex=s}else void 0!==n.fromArray&&void 0!==n.toArray?(o=this.BindingType.HasFromToArray,this.resolvedProperty=n):Array.isArray(n)?(o=this.BindingType.EntireArray,this.resolvedProperty=n):this.propertyName=r;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}We.Composite=class{constructor(t,e,i){const r=i||We.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}getValue(t,e){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];void 0!==r&&r.getValue(t,e)}setValue(t,e){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].unbind()}},We.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},We.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},We.prototype.GetterByBindingType=[We.prototype._getValue_direct,We.prototype._getValue_array,We.prototype._getValue_arrayElement,We.prototype._getValue_toArray],We.prototype.SetterByBindingTypeAndVersioning=[[We.prototype._setValue_direct,We.prototype._setValue_direct_setNeedsUpdate,We.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[We.prototype._setValue_array,We.prototype._setValue_array_setNeedsUpdate,We.prototype._setValue_array_setMatrixWorldNeedsUpdate],[We.prototype._setValue_arrayElement,We.prototype._setValue_arrayElement_setNeedsUpdate,We.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[We.prototype._setValue_fromArray,We.prototype._setValue_fromArray_setNeedsUpdate,We.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];new Float32Array(1);"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"182"}})),"undefined"!=typeof window&&(window.__THREE__?S("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="182");Ue.maxFiles=20,Ue.keys=[],Ue.add=function(t,e){if(!1===this.enabled)return;if("string"!=typeof t)return;const i=this.files[t];i?i.file=e:this.files[t]={hit:0,file:e},this.purge(t)},Ue.get=function(t){if(!1===this.enabled)return;if("string"!=typeof t)return;const e=this.files[t];return e?(e.hit++,e.file):void 0},Ue.remove=function(t){if("string"!=typeof t)return;const e=this.files[t];e&&delete e.files},Ue.purge=function(t){let e=this.maxFiles>=1?this.maxFiles:0;const i=[];for(let e in this.files)if(e!==t){const t=this.files[e];t.file&&i.push({hit:t.hit,key:e})}if(t&&e--,!(i.length<=e)){i.sort(((t,e)=>e.hit-t.hit)),e-=i.length;for(let t=0;t<e;t++){delete this.files[i[t].key].file}}};const He={};class Xe{constructor(t,e,i=0,r=8){this.workerScript=t,this.softSize=Math.ceil(i),this.softSize<=0&&(this.softSize=0),this.maxSize=Math.ceil(r),this.maxSize<=this.softSize&&(this.maxSize=this.softSize),this._pool=new Map,this._dispatcher=new F,this.logger=e||console.debug,this._lastSpawnTime=0,this._spawnThrottleMs=100}_spawnWorker(){let t="";const e={idle:!1,timeOut:15e3,onError:void 0,onProgress:void 0,onResult:void 0,startWorker:void 0,terminate:void 0,elapsed:void 0,token:void 0},i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(;""===t||this._pool.has(t);){let e=0;for(;e<8;)t+=i.charAt(Math.floor(62*Math.random())),e+=1,4==e&&(t+="-")}this._pool.set(t,e);let r=0;const s=i=>{if(i){if(e.idle)return;const i=this._pool.size;i>this.softSize?(this.logger(`Pruning 1 worker (UUID: ${t}, still running: ${i-1})`),e.terminate(!0)):(this.logger(`Worker ${t} -> idle`),e.idle=!0,e.token=void 0,e.timeOut=15e3),this._dispatcher.dispatchEvent({type:"WorkerPool.idle",uuid:t})}else{if(!e.idle)return;this.logger(`Worker ${t} -> busy`),r=(new Date).getTime(),e.idle=!1}},n=new window.Worker(this.workerScript),a=t=>{if(e.idle)return;const i=e.onError;e.onError=void 0,e.onResult=void 0,s(!0),"function"==typeof i&&i(t)},o=t=>{if(e.idle)return;const i=e.onResult;if(e.onError=void 0,e.onResult=void 0,"function"==typeof i)try{i(t)}catch(t){console.error(t)}s(!0)};return n.onerror=a,n.onmessageerror=a,n.onmessage=t=>{if(!e.idle)if(t.data&&"object"==typeof t.data&&"string"==typeof t.data.status)switch(t.data.status){case"scheduled":if(void 0!==t.data.object)return void o(t.data.object);break;case"progress":if(void 0!==t.data.object)return void(t=>{if(e.idle)return;const i=e.onProgress;if("function"==typeof i)try{i(t)}catch(t){}})(t.data.object);break;case"done":return void o(t.data.object);case"error":a(t.data.object)}else a(new TypeError("Worker does not return with proper message event."))},e.startWorker=({methodNames:i,args:r,transferables:a}={})=>{if(!e.idle)throw new Error("Worker is not idle");s(!1);const o={methodNames:i,args:r,token:t};Array.isArray(a)&&a.length>0?n.postMessage(o,a):n.postMessage(o);e.timeOut},e.terminate=(i=!1)=>{if(!i&&!e.idle)try{a(new Error("Worker has been terminated."))}catch(t){}e.idle=!1,e.onError=void 0,e.onResult=void 0,n.terminate(),this._pool.delete(t),e.idle=!0,e.token=void 0,e.timeOut=15e3},e.elapsed=()=>(new Date).getTime()-r,e.idle=!0,e.token=void 0,t}_spawn(){const t=Date.now();if(t-this._lastSpawnTime<this._spawnThrottleMs){const e=this._spawnThrottleMs-(t-this._lastSpawnTime);return this.logger(`Spawn throttled. Waiting ${e}ms...`),e}const e=this._pool.size;if(e>=this.maxSize)return;if(e<this.softSize)return this.logger(`Spawning 1 parallel workers... Current workers: ${e}+1`),this._spawnWorker(),void(this._lastSpawnTime=t);let i=!1,r=0;this._pool.forEach(((t,e)=>{t.idle&&(i=!0);const s=t.elapsed();r<s&&(r=s)})),i||(this.logger(`Spawning 1 parallel workers... Current workers: ${e}+1`),this._spawnWorker(),this._lastSpawnTime=t)}_startWorker(t,e,i,{onResult:r,onError:s,onProgress:n,timeOut:a,token:o,transferables:h}={}){this.logger(`Starting worker ${t} -> threeBrain.${e.join(".")}`);const l=this._pool.get(t);l.onError=s,l.onResult=r,l.onProgress=n,"number"==typeof a&&(l.timeOut=a),l.token=o,l.startWorker({methodNames:e,args:i,transferables:h})}startWorker({methodNames:t,args:e,onProgress:i,token:r,timeOut:s=15e3,transferables:n}={}){this._tokenStartTimeList||(this._tokenStartTimeList={});const a=Date.now();return r&&(this._tokenStartTimeList[r]=a),new Promise(((o,h)=>{let l=!1;const u=()=>{if(!l){l=!0;try{this._dispatcher.hasEventListener("WorkerPool.idle",u)&&this._dispatcher.removeEventListener("WorkerPool.idle",u),this._dispatcher.hasEventListener("WorkerPool.timeout",u)&&this._dispatcher.removeEventListener("WorkerPool.timeout",u);const c=this._spawn(),d=[...this._pool.keys()];for(let l=0;l<d.length;l++){const u=d[l];if(this._pool.get(u).idle){if(r){if(this._tokenStartTimeList[r]>a){const t=new Error(`A newer worker with token [${r}] already started`);return t._muffle=!0,void h(t)}}return void this._startWorker(u,t,e,{onResult:o,onError:h,onProgress:i,timeOut:s,token:r,transferables:n})}}if("number"==typeof c)return l=!1,void setTimeout(u,c+1);const f=new Error("No available worker.");throw f._muffle=!0,f}catch(t){this.logger(`Awaiting... (${t.message})`),l=!1,this._dispatcher.addEventListener("WorkerPool.idle",u),this._dispatcher.addEventListener("WorkerPool.timeout",u)}}};u()}))}stopWorkers(t){t?this._pool.forEach((e=>{e.token===t&&e.terminate()})):this._pool.forEach((t=>{t.terminate()}))}}const $e=[],Ke={};function Qe(t,e){let i,r=$e.indexOf(t);r>-1&&(i=Ke[r],i.stopWorkers(e))}var Je=i(4809),ti=i(8854),ei=i.n(ti);class ii{constructor(t){if(this.isInvalid=!0,!t)return;ei().isCompressed(t)&&(t=ei().decompress(t)),this.header=ei().readHeader(t),this.slope=this.header.scl_slope||1,this.intercept=this.header.scl_inter||0,this.calMin=this.header.cal_min||0,this.calMax=this.header.cal_max||0;const e=ei().readImage(this.header,t);this.header.datatypeCode===ei().NIFTI1.TYPE_INT8?(this.image=new Int8Array(e),this.imageDataType=a,this.dataIsInt8=!0):this.header.datatypeCode===ei().NIFTI1.TYPE_INT16?(this.image=new Int16Array(e),this.imageDataType=o,this.dataIsInt16=!0):this.header.datatypeCode===ei().NIFTI1.TYPE_INT32?(this.image=new Int32Array(e),this.imageDataType=l,this.dataIsInt32=!0):this.header.datatypeCode===ei().NIFTI1.TYPE_FLOAT32?(this.image=new Float32Array(e),this.imageDataType=u,this.dataIsFloat32=!0):this.header.datatypeCode===ei().NIFTI1.TYPE_FLOAT64?(this.image=new Float64Array(e),this.dataIsFloat64=!0):this.header.datatypeCode===ei().NIFTI1.TYPE_UINT8?(this.image=new Uint8Array(e),this.imageDataType=n,this.dataIsUInt8=!0):this.header.datatypeCode===ei().NIFTI1.TYPE_UINT16?(this.image=new Uint16Array(e),this.imageDataType=h,this.dataIsUInt16=!0):this.header.datatypeCode===ei().NIFTI1.TYPE_UINT32?(this.image=new Uint32Array(e),this.imageDataType=UnsignedIntType,this.dataIsUInt32=!0):console.warn("NiftiImage: Cannot load NIFTI image data: the data type code is unsupported.");let i=1,r=0;this.image.length>0&&(i=this.image[0],r=this.image[0],this.image.forEach((t=>{t>i?i=t:t<r&&(r=t)}))),this.dataMin=r*this.slope+this.intercept,this.dataMax=i*this.slope+this.intercept,this.isNiftiImage=!0,this.header.sform_code<=0&&(this.header.affine=this.header.getQformMat()),this.affine=(new Et).set(this.header.affine[0][0],this.header.affine[0][1],this.header.affine[0][2],this.header.affine[0][3],this.header.affine[1][0],this.header.affine[1][1],this.header.affine[1][2],this.header.affine[1][3],this.header.affine[2][0],this.header.affine[2][1],this.header.affine[2][2],this.header.affine[2][3],this.header.affine[3][0],this.header.affine[3][1],this.header.affine[3][2],this.header.affine[3][3]),this.shape=new V(this.header.dims[1],this.header.dims[2],this.header.dims[3]);const s=new at(1,1,1,0).applyMatrix4(this.affine),c=(new Et).set(1,0,0,(this.shape.x-1)/2,0,1,0,(this.shape.y-1)/2,0,0,1,(this.shape.z-1)/2,0,0,0,1);this.model2vox=c,this.ijkIndexOrder=(new V).copy(s),this.model2RAS=this.affine.clone().multiply(c),this.model2tkrRAS=this.affine.clone().setPosition(0,0,0);const d=this.shape.clone().multiplyScalar(-.5).applyMatrix4(this.model2tkrRAS);this.model2tkrRAS.setPosition(d.x,d.y,d.z),this.model2tkrRAS.multiply(c),this.isInvalid=!1}getNormalizedImage(){const t=this.slope||1,e=this.intercept,i=this.dataMin,r=this.dataMax,s=r==i?1:r-i,n=(e-i)/s,a=t/s,o=this.image.length,h=new Float32Array(o);for(let t=0;t<o;t++)h[t]=a*this.image[t]+n;return h}trimToBoundingBox(){const t=Math.floor(this.image.length/this.shape.x/this.shape.y/this.shape.z);let e=this.shape.x,i=0,r=this.shape.y,s=0,n=this.shape.z,a=0,o=0;const h=this.image;for(let l=0;l<t;l++)for(let t=0;t<this.shape.z;t++)for(let l=0;l<this.shape.y;l++)for(let u=0;u<this.shape.x;u++,o++)0!==h[o]&&(e>=u&&(e=u),i<=u&&(i=u),r>=l&&(r=l),s<=l&&(s=l),n>=t&&(n=t),a<=t&&(a=t));e>i&&(e=i),r>s&&(r=s),n>a&&(n=a);const l=(new V).set(i-e+1,s-r+1,a-n+1),u=l.x*l.y*l.z*t;if(h.length===u)return this;let c=null;this.dataIsInt8?c=new Int8Array(u):this.dataIsInt16?c=new Int16Array(u):this.dataIsInt32?c=new Int32Array(u):this.dataIsFloat32?c=new Float32Array(u):this.dataIsFloat64?c=new Float64Array(u):this.dataIsUInt8?c=new Uint8Array(u):this.dataIsUInt16?c=new Uint16Array(u):this.dataIsUInt32?c=new Uint32Array(u):console.warn("NiftiImage: Cannot load NIFTI image data: the data type code is unsupported.");const d=this.shape.x,f=this.shape.y,p=d*f*this.shape.z,m=d*f;for(let l=0,u=0,f=0;l<t;l++)for(let t=n;t<=a;t++){f=p*l+m*t;for(let t=r;t<=s;t++){o=f+d*t+e;for(let t=e;t<=i;t++,o++,u++)c[u]=h[o]}}return this.image=c,this.shape.copy(l),this.affine.multiply((new Et).set(1,0,0,e,0,1,0,r,0,0,1,n,0,0,0,1)),this.model2vox.set(1,0,0,(this.shape.x-1)/2,0,1,0,(this.shape.y-1)/2,0,0,1,(this.shape.z-1)/2,0,0,0,1),this.model2RAS.copy(this.affine).multiply(this.model2vox),this}dispose(){this.header=void 0,this.image=void 0,this.affine=void 0,this.shape=void 0,this.ijkIndexOrder=void 0,this.model2RAS=void 0,this.model2vox=void 0}copy(t){return this.isInvalid=t.isInvalid,this.isInvalid||(this.header=t.header,this.image=t.image,this.imageDataType=t.imageDataType,t.dataIsInt8?this.dataIsInt8=!0:t.dataIsInt16?this.dataIsInt16=!0:t.dataIsInt32?this.dataIsInt32=!0:t.dataIsFloat32?this.dataIsFloat32=!0:t.dataIsFloat64?this.dataIsFloat64=!0:t.dataIsUInt8?this.dataIsUInt8=!0:t.dataIsUInt16?this.dataIsUInt16=!0:t.dataIsUInt32&&(this.dataIsUInt32=!0),this.slope=t.slope||1,this.intercept=t.intercept,this.calMin=t.calMin,this.calMax=t.calMax,this.dataMin=t.dataMin,this.dataMax=t.dataMax,this.isNiftiImage=!0,this.affine=(new Et).copy(t.affine),this.shape=(new V).copy(t.shape),this.ijkIndexOrder=(new V).copy(t.ijkIndexOrder),this.model2RAS=(new Et).copy(t.model2RAS),this.model2tkrRAS=(new Et).copy(t.model2tkrRAS),this.model2vox=(new Et).copy(t.model2vox)),this}}var ri=Uint8Array,si=Uint16Array,ni=Uint32Array,ai=new ri([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),oi=new ri([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),hi=new ri([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),li=function(t,e){for(var i=new si(31),r=0;r<31;++r)i[r]=e+=1<<t[r-1];var s=new ni(i[30]);for(r=1;r<30;++r)for(var n=i[r];n<i[r+1];++n)s[n]=n-i[r]<<5|r;return[i,s]},ui=li(ai,2),ci=ui[0],di=ui[1];ci[28]=258,di[258]=28;for(var fi=li(oi,0),pi=fi[0],mi=(fi[1],new si(32768)),gi=0;gi<32768;++gi){var yi=(43690&gi)>>>1|(21845&gi)<<1;yi=(61680&(yi=(52428&yi)>>>2|(13107&yi)<<2))>>>4|(3855&yi)<<4,mi[gi]=((65280&yi)>>>8|(255&yi)<<8)>>>1}var _i=function(t,e,i){for(var r=t.length,s=0,n=new si(e);s<r;++s)t[s]&&++n[t[s]-1];var a,o=new si(e);for(s=0;s<e;++s)o[s]=o[s-1]+n[s-1]<<1;if(i){a=new si(1<<e);var h=15-e;for(s=0;s<r;++s)if(t[s])for(var l=s<<4|t[s],u=e-t[s],c=o[t[s]-1]++<<u,d=c|(1<<u)-1;c<=d;++c)a[mi[c]>>>h]=l}else for(a=new si(r),s=0;s<r;++s)t[s]&&(a[s]=mi[o[t[s]-1]++]>>>15-t[s]);return a},bi=new ri(288);for(gi=0;gi<144;++gi)bi[gi]=8;for(gi=144;gi<256;++gi)bi[gi]=9;for(gi=256;gi<280;++gi)bi[gi]=7;for(gi=280;gi<288;++gi)bi[gi]=8;var xi=new ri(32);for(gi=0;gi<32;++gi)xi[gi]=5;var wi=_i(bi,9,1),Ti=_i(xi,5,1),Ii=function(t){for(var e=t[0],i=1;i<t.length;++i)t[i]>e&&(e=t[i]);return e},vi=function(t,e,i){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(7&e)&i},Ai=function(t,e){var i=e/8|0;return(t[i]|t[i+1]<<8|t[i+2]<<16)>>(7&e)},Ei=function(t){return(t+7)/8|0},Ni=function(t,e,i){(null==e||e<0)&&(e=0),(null==i||i>t.length)&&(i=t.length);var r=new(2==t.BYTES_PER_ELEMENT?si:4==t.BYTES_PER_ELEMENT?ni:ri)(i-e);return r.set(t.subarray(e,i)),r},Si=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Mi=function(t,e,i){var r=new Error(e||Si[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,Mi),!i)throw r;return r},ki=function(t,e,i){var r=t.length;if(!r||i&&i.f&&!i.l)return e||new ri(0);var s=!e||i,n=!i||i.i;i||(i={}),e||(e=new ri(3*r));var a=function(t){var i=e.length;if(t>i){var r=new ri(Math.max(2*i,t));r.set(e),e=r}},o=i.f||0,h=i.p||0,l=i.b||0,u=i.l,c=i.d,d=i.m,f=i.n,p=8*r;do{if(!u){o=vi(t,h,1);var m=vi(t,h+1,3);if(h+=3,!m){var g=t[(N=Ei(h)+4)-4]|t[N-3]<<8,y=N+g;if(y>r){n&&Mi(0);break}s&&a(l+g),e.set(t.subarray(N,y),l),i.b=l+=g,i.p=h=8*y,i.f=o;continue}if(1==m)u=wi,c=Ti,d=9,f=5;else if(2==m){var _=vi(t,h,31)+257,b=vi(t,h+10,15)+4,x=_+vi(t,h+5,31)+1;h+=14;for(var w=new ri(x),T=new ri(19),I=0;I<b;++I)T[hi[I]]=vi(t,h+3*I,7);h+=3*b;var v=Ii(T),A=(1<<v)-1,E=_i(T,v,1);for(I=0;I<x;){var N,S=E[vi(t,h,A)];if(h+=15&S,(N=S>>>4)<16)w[I++]=N;else{var M=0,k=0;for(16==N?(k=3+vi(t,h,3),h+=2,M=w[I-1]):17==N?(k=3+vi(t,h,7),h+=3):18==N&&(k=11+vi(t,h,127),h+=7);k--;)w[I++]=M}}var F=w.subarray(0,_),C=w.subarray(_);d=Ii(F),f=Ii(C),u=_i(F,d,1),c=_i(C,f,1)}else Mi(1);if(h>p){n&&Mi(0);break}}s&&a(l+131072);for(var z=(1<<d)-1,U=(1<<f)-1,D=h;;D=h){var B=(M=u[Ai(t,h)&z])>>>4;if((h+=15&M)>p){n&&Mi(0);break}if(M||Mi(2),B<256)e[l++]=B;else{if(256==B){D=h,u=null;break}var O=B-254;if(B>264){var R=ai[I=B-257];O=vi(t,h,(1<<R)-1)+ci[I],h+=R}var L=c[Ai(t,h)&U],P=L>>>4;L||Mi(3),h+=15&L;C=pi[P];if(P>3){R=oi[P];C+=Ai(t,h)&(1<<R)-1,h+=R}if(h>p){n&&Mi(0);break}s&&a(l+131072);for(var V=l+O;l<V;l+=4)e[l]=e[l-C],e[l+1]=e[l+1-C],e[l+2]=e[l+2-C],e[l+3]=e[l+3-C];l=V}}i.l=u,i.p=D,i.b=l,i.f=o,u&&(o=1,i.m=d,i.d=c,i.n=f)}while(!o);return l==e.length?e:Ni(e,0,l)},Fi=new ri(0),Ci=function(t){31==t[0]&&139==t[1]&&8==t[2]||Mi(6,"invalid gzip data");var e=t[3],i=10;4&e&&(i+=t[10]|2+(t[11]<<8));for(var r=(e>>3&1)+(e>>4&1);r>0;r-=!t[i++]);return i+(2&e)},zi=function(t){var e=t.length;return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0},Ui=function(t){(8!=(15&t[0])||t[0]>>>4>7||(t[0]<<8|t[1])%31)&&Mi(6,"invalid zlib data"),32&t[1]&&Mi(6,"invalid zlib data: preset dictionaries not supported")};function Di(t,e){return ki(t,e)}function Bi(t,e){return ki(t.subarray(Ci(t),-8),e||new ri(zi(t)))}function Oi(t,e){return ki((Ui(t),t.subarray(2,-4)),e)}function Ri(t,e){return 31==t[0]&&139==t[1]&&8==t[2]?Bi(t,e):8!=(15&t[0])||t[0]>>4>7||(t[0]<<8|t[1])%31?Di(t,e):Oi(t,e)}var Li="undefined"!=typeof TextDecoder&&new TextDecoder;try{Li.decode(Fi,{stream:!0}),1}catch(t){}"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;class Pi{constructor(t){if(this.isMGHImage=!0,this.isInvalid=!0,!t)return;let e=t,i=new DataView(t);if(31===i.getUint8(0)&&139===i.getUint8(1)){e=Ri(new Uint8Array(t)).buffer,i=new DataView(e)}let r=i.getInt32(0,!1),s=i.getInt32(4,!1),a=i.getInt32(8,!1),h=i.getInt32(12,!1),c=i.getInt32(16,!1),d=i.getInt32(20,!1),f=i.getFloat32(30,!1),p=i.getFloat32(34,!1),m=i.getFloat32(38,!1),g=i.getFloat32(42,!1),y=i.getFloat32(46,!1),_=i.getFloat32(50,!1),b=i.getFloat32(54,!1),x=i.getFloat32(58,!1),w=i.getFloat32(62,!1),T=i.getFloat32(66,!1),I=i.getFloat32(70,!1),v=i.getFloat32(74,!1),A=i.getFloat32(78,!1),E=i.getFloat32(82,!1),N=i.getFloat32(86,!1);this._MGHHeader={version:r,width:s,height:a,depth:h,nframes:c,mtype:d,spacingX:f,spacingY:p,spacingZ:m,xr:g,xa:y,xs:_,yr:b,ya:x,ys:w,zr:T,za:I,zs:v,cr:A,ca:E,cs:N},this.header=new(ei().NIFTI1);const S=!1;if(this.header.littleEndian=S,this.header.dims=[3,1,1,1,0,0,0,0],this.header.pixDims=[1,1,1,1,1,0,0,0],1!==r||d<0||d>4)return console.warn("MGHImage: this is an invalid MGH/MGZ file"),void(this.isInvalid=!0);0===d?(this.header.numBitsPerVoxel=8,this.header.datatypeCode=ei().NIFTI1.TYPE_UINT8):4===d?(this.header.numBitsPerVoxel=16,this.header.datatypeCode=ei().NIFTI1.TYPE_INT16):1===d?(this.header.numBitsPerVoxel=32,this.header.datatypeCode=ei().NIFTI1.TYPE_INT32):3===d&&(this.header.numBitsPerVoxel=32,this.header.datatypeCode=ei().NIFTI1.TYPE_FLOAT32),this.header.dims[1]=s,this.header.dims[2]=a,this.header.dims[3]=h,this.header.dims[4]=c,c>1&&(this.header.dims[0]=4),this.header.pixDims[1]=f,this.header.pixDims[2]=p,this.header.pixDims[3]=m,this.header.vox_offset=284,this.header.sform_code=1,this.slope=this.header.scl_slope=1,this.intercept=this.header.scl_inter=0;const M=(new Et).set(g*f,b*p,T*m,0,y*f,x*p,I*m,0,_*f,w*p,v*m,0,0,0,0,1),k=(new V).set(s,a,h).divideScalar(2),F=(new V).copy(k).applyMatrix4(M);M.setPosition(-F.x,-F.y,-F.z),this.ijk2tkrRAS=M;const C=M.clone();C.setPosition(-F.x+A,-F.y+E,-F.z+N),this.affine=C;const z=this.header.dims[1]*this.header.dims[2]*this.header.dims[3]*this.header.dims[4],U=z*(this.header.numBitsPerVoxel/8),D=e.slice(this.header.vox_offset,this.header.vox_offset+U),B=new DataView(D);let O=1/0,R=-1/0;if(this.header.datatypeCode===ei().NIFTI1.TYPE_INT16){this.image=new Int16Array(z);for(let t=0;t<z;t++){const e=B.getInt16(2*t,S);e>R&&(R=e),e<O&&(O=e),this.image[t]=e}this.imageDataType=o,this.dataIsInt16=!0}else if(this.header.datatypeCode===ei().NIFTI1.TYPE_INT32){this.image=new Int32Array(z);for(let t=0;t<z;t++){const e=B.getInt32(4*t,S);e>R&&(R=e),e<O&&(O=e),this.image[t]=e}this.imageDataType=l,this.dataIsInt32=!0}else if(this.header.datatypeCode===ei().NIFTI1.TYPE_FLOAT32){this.image=new Float32Array(z);for(let t=0;t<z;t++){const e=B.getFloat32(4*t,S);e>R&&(R=e),e<O&&(O=e),this.image[t]=e}this.imageDataType=u,this.dataIsFloat32=!0}else this.header.datatypeCode===ei().NIFTI1.TYPE_UINT8&&(this.image=new Uint8Array(D),this.imageDataType=n,this.dataIsUInt8=!0,O=0,R=255);this.calMin=this.header.cal_min=O*this.slope+this.intercept,this.calMax=this.header.cal_max=R*this.slope+this.intercept,this.dataMin=O*this.slope+this.intercept,this.dataMax=R*this.slope+this.intercept,this.shape=new V(this.header.dims[1],this.header.dims[2],this.header.dims[3]);const L=new at(1,1,1,0).applyMatrix4(this.affine),P=(new Et).set(1,0,0,this.shape.x/2-.5,0,1,0,this.shape.y/2-.5,0,0,1,this.shape.z/2-.5,0,0,0,1);this.model2vox=P,this.ijkIndexOrder=(new V).copy(L),this.model2RAS=this.affine.clone().multiply(P),this.model2tkrRAS=this.ijk2tkrRAS.clone().multiply(P),this.isInvalid=!1}getNormalizedImage(){const t=this.slope||1,e=this.intercept,i=this.dataMin,r=this.dataMax,s=r==i?1:r-i,n=(e-i)/s,a=t/s,o=this.image.length,h=new Float32Array(o);for(let t=0;t<o;t++)h[t]=a*this.image[t]+n;return h}dispose(){this.isInvalid=!1,this._MGHHeader=void 0,this.header=void 0,this.ijk2tkrRAS=void 0,this.affine=void 0,this.image=void 0,this.shape=void 0,this.ijkIndexOrder=void 0,this.model2RAS=void 0,this.model2tkrRAS=void 0,this.model2vox=void 0}copy(t){return this.isMGHImage=t.isMGHImage,this.isInvalid=t.isInvalid,this.isInvalid||(this._MGHHeader=t._MGHHeader,this.header=t.header,this.slope=t.slope||1,this.intercept=t.intercept,this.calMin=t.calMin,this.calMax=t.calMax,this.dataMin=t.dataMin,this.dataMax=t.dataMax,this.ijk2tkrRAS=(new Et).copy(t.ijk2tkrRAS),this.affine=(new Et).copy(t.affine),this.shape=(new V).copy(t.shape),this.ijkIndexOrder=(new V).copy(t.ijkIndexOrder),this.model2RAS=(new Et).copy(t.model2RAS),this.model2tkrRAS=(new Et).copy(t.model2tkrRAS),this.model2vox=(new Et).copy(t.model2vox),this.image=t.image,this.imageDataType=t.imageDataType,t.dataIsInt16?this.dataIsInt16=!0:t.dataIsInt32?this.dataIsInt32=!0:t.dataIsFloat32?this.dataIsFloat32=!0:t.dataIsUInt8&&(this.dataIsUInt8=!0)),this}}var Vi=i(1590),Gi=i.n(Vi);class qi{constructor(t){if(this.isInvalid=!0,!t)return;const e=Gi().parse(t);window.gii=e,this.nVertices=e.getNumPoints(),this.nFaces=e.getNumTriangles();const i=e.getPointsDataArray();let r;if(this.position=i.getData(),Array.isArray(i.transforms))for(let t=0;t<i.transforms.length;t++){const e=i.transforms[t];try{if("NIFTI_XFORM_SCANNER_ANAT"!==e.transformedSpace)continue;const t=e.matrixData.split("\n").map((t=>t.trim().split(/[ ]+/g).map(parseFloat))).filter((t=>4===t.length));if(3!==t.length&&4!==t.length)throw"Not a valid transform";r=t}catch(t){}}if(r){const t=this.position,e=r[0][0],i=r[0][1],s=r[0][2],n=r[0][3],a=r[1][0],o=r[1][1],h=r[1][2],l=r[1][3],u=r[2][0],c=r[2][1],d=r[2][2],f=r[2][3];for(let r=0;r<t.length/3;r++){const p=t[3*r],m=t[3*r+1],g=t[3*r+2];t[3*r]=e*p+i*m+s*g+n,t[3*r+1]=a*p+o*m+h*g+l,t[3*r+2]=u*p+c*m+d*g+f}}const s=e.getTrianglesDataArray().getData(),n=new Uint32Array(3*this.nFaces);for(let t=0;t<3*this.nFaces;t++)n[t]=s[t];this.index=n,this.isGiftiMesh=!0,this.isSurfaceMesh=!0,this.isInvalid=!1}dispose(){this.isInvalid=!0,this.position=NaN,this.index=NaN}copy(t){return this.isInvalid=t.isInvalid,this.nVertices=t.nVertices,this.nFaces=t.nFaces,this.position=t.position,this.index=t.index,this.isSurfaceMesh=!0,this.isGiftiMesh=!0,this}}class Yi extends Oe{constructor(t){super(t)}load(t,e,i,r){const s=this,n=new Pe(this.manager);n.setPath(this.path),n.setResponseType("arraybuffer"),n.setRequestHeader(this.requestHeader),n.setWithCredentials(this.withCredentials),n.load(t,(function(i){try{e(s.parse(i))}catch(e){r?r(e):console.error(e),s.manager.itemError(t)}}),i,r)}parse(t){function e(t,e,i){for(let r=0,s=t.length;r<s;r++)if(t[r]!==e.getUint8(i+r))return!1;return!0}const i=function(t){if("string"==typeof t){const e=new Uint8Array(t.length);for(let i=0;i<t.length;i++)e[i]=255&t.charCodeAt(i);return e.buffer||e}return t}(t);return function(t){const i=new DataView(t);if(84+50*i.getUint32(80,!0)===i.byteLength)return!0;const r=[115,111,108,105,100];for(let t=0;t<5;t++)if(e(r,i,t))return!1;return!0}(i)?function(t){const e=new DataView(t),i=e.getUint32(80,!0);let r,s,n,a,o,h,l,u,c=!1;for(let t=0;t<70;t++)1129270351==e.getUint32(t,!1)&&82==e.getUint8(t+4)&&61==e.getUint8(t+5)&&(c=!0,a=new Float32Array(3*i*3),o=e.getUint8(t+6)/255,h=e.getUint8(t+7)/255,l=e.getUint8(t+8)/255,u=e.getUint8(t+9)/255);const d=new xe,f=new Float32Array(3*i*3),p=new Float32Array(3*i*3),m=new se;for(let t=0;t<i;t++){const i=84+50*t,u=e.getFloat32(i,!0),d=e.getFloat32(i+4,!0),g=e.getFloat32(i+8,!0);if(c){const t=e.getUint16(i+48,!0);32768&t?(r=o,s=h,n=l):(r=(31&t)/31,s=(t>>5&31)/31,n=(t>>10&31)/31)}for(let o=1;o<=3;o++){const h=i+12*o,l=3*t*3+3*(o-1);f[l]=e.getFloat32(h,!0),f[l+1]=e.getFloat32(h+4,!0),f[l+2]=e.getFloat32(h+8,!0),p[l]=u,p[l+1]=d,p[l+2]=g,c&&(m.setRGB(r,s,n,y),a[l]=m.r,a[l+1]=m.g,a[l+2]=m.b)}}return d.setAttribute("position",new le(f,3)),d.setAttribute("normal",new le(p,3)),c&&(d.setAttribute("color",new le(a,3)),d.hasColors=!0,d.alpha=u),d}(i):function(t){const e=new xe,i=/solid([\s\S]*?)endsolid/g,r=/facet([\s\S]*?)endfacet/g,s=/solid\s(.+)/;let n=0;const a=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,o=new RegExp("vertex"+a+a+a,"g"),h=new RegExp("normal"+a+a+a,"g"),l=[],u=[],c=[],d=new V;let f,p=0,m=0,g=0;for(;null!==(f=i.exec(t));){m=g;const t=f[0],i=null!==(f=s.exec(t))?f[1]:"";for(c.push(i);null!==(f=r.exec(t));){let t=0,e=0;const i=f[0];for(;null!==(f=h.exec(i));)d.x=parseFloat(f[1]),d.y=parseFloat(f[2]),d.z=parseFloat(f[3]),e++;for(;null!==(f=o.exec(i));)l.push(parseFloat(f[1]),parseFloat(f[2]),parseFloat(f[3])),u.push(d.x,d.y,d.z),t++,g++;1!==e&&console.error("THREE.STLLoader: Something isn't right with the normal of face number "+n),3!==t&&console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+n),n++}const a=m,y=g-m;e.userData.groupNames=c,e.addGroup(a,y,p),p++}return e.setAttribute("position",new de(l,3)),e.setAttribute("normal",new de(u,3)),e}("string"!=typeof(r=t)?(new TextDecoder).decode(r):r);var r}}function ji(t,e){let i;if(i="index"===e?t.index:t.getAttribute(e),i&&"object"==typeof i&&i.isBufferAttribute)return i}class Zi{constructor(t){if(this.isInvalid=!0,!t)return;const e=(new Yi).parse(t),i=ji(e,"position");if(!i)return;this.nVertices=i.count,this.position=i.array;const r=ji(e,"index");r?(this.nFaces=r.count,this.index=r.array):(this.nFaces=0,this.index=null);const s=ji(e,"normal");s?(this.normal=s.array,this.hasNormals=!0):(this.normal=null,this.hasNormals=!1);const n=ji(e,"color");n?(this.color=n.array,this.hasColors=!0):(this.color=null,this.hasColors=!1),this.isSTLMesh=!0,this.isSurfaceMesh=!0,this.isInvalid=!1}dispose(){this.isInvalid=!0,this.position=NaN,this.index=NaN}copy(t){return this.isInvalid=t.isInvalid,this.nVertices=t.nVertices,this.nFaces=t.nFaces,this.position=t.position,this.index=t.index,this.isSurfaceMesh=!0,this.isSTLMesh=!0,this.hasNormals=t.hasNormals,t.hasNormals?this.normal=t.normal:this.normal=null,this.hasColors=t.hasColors,t.hasColors?this.color=t.color:this.color=null,this}}const Wi=function(t,e=-1/0){if(0===t.length)return e;let i=1/0;for(let e in t){let r=t[e];Array.isArray(r)&&(r=Wi(r,i,!0)),r<i&&(i=r)}return i},Hi=function(t,e){for(let i in t){let r=t[i];Array.isArray(r)?Hi(r,e):t[i]=r-e}return t};Xi=new Float32Array(1),$i=new Int32Array(Xi.buffer);var Xi,$i;class Ki{position;index;constructor(t){if(this.isInvalid=!0,!t)return;let e=new DataView(t);e.getUint32(0,!1),e.getUint32(4,!1);let i=0;for(;10!==e.getUint8(i);)i++;this.nVertices=e.getUint32(i+2,!1),this.nFaces=e.getUint32(i+6,!1),i+=10,this.position=new Float32Array(3*this.nVertices);for(let t=0;t<3*this.nVertices;t++,i+=4)this.position[t]=e.getFloat32(i,!1);this.index=new Uint32Array(3*this.nFaces);for(let t=0;t<3*this.nFaces;t++,i+=4)this.index[t]=e.getUint32(i,!1);const r=Wi(this.index,0);0!==r&&Hi(this.index,r),this.isFreeSurferMesh=!0,this.isSurfaceMesh=!0,this.isInvalid=!1,this.tkrToScan=null;try{if(i<e.byteLength){let t=e.getUint32(i,!1),r=0,s=2;if(i+=4,20!==t&&(s=t,r=e.getUint32(i,!1),t=e.getUint32(i+4,!1),i+=8),20==t&&0==r&&2==s){const t=new DataView(buf,i),e=(new TextDecoder).decode(t).split("\n")[7].match(/^[ ]{0,}cras[ ]{0,}=[ ]{0,}(.*)$/i)[1].split(/[ \t]+/i).map(parseFloat);this.tkrToScan=[1,0,0,0,0,1,0,0,0,0,1,0,e[0],e[1],e[2],1]}}}catch(t){}}dispose(){this.isInvalid=!0,this.position=null,this.index=null}copy(t){return this.isInvalid=t.isInvalid,this.nVertices=t.nVertices,this.nFaces=t.nFaces,this.position=t.position,this.index=t.index,this.tkrToScan=t.tkrToScan,this.isSurfaceMesh=!0,this.isFreeSurferMesh=!0,this}}class Qi{constructor(t){if(this.isInvalid=!0,!t)return;let e=new DataView(t),i=e.getUint8(0),r=e.getUint8(1),s=e.getUint8(2);255===i&&255===r&&255===s||console.warn("FreeSurferNodeValues: this is not a FreeSurfer curv/sulc format."),this.nVertices=e.getUint32(3,!1),this.nFrames=e.getUint32(11,!1),this.vertexData=new Float32Array(this.nFrames*this.nVertices),this._frameData=new Float32Array(this.nVertices);let n,a=15,o=1/0,h=-1/0;for(let t=0;t<this.nFrames*this.nVertices;t++,a+=4)n=e.getFloat32(a,!1),o>n&&(o=n),h<n&&(h=n),this.vertexData[t]=n;this.max=h,this.min=o,this.isFreeSurferNodeValues=!0,this.isSurfaceMeasurement=!0,this.nFrames>0&&this.setFrame(0),this.isInvalid=!1}setFrame(t){if(t=parseInt(t),isNaN(t)||t<0||t>=this.nFrames)throw"FreeSurferNodeValues: Invalid frame";const e=t*this.nVertices;for(let t=0;t<this.nVertices;t++)this._frameData[t]=this.vertexData[e+t];return this._frameData}dispose(){this.vertexData=NaN,this._frameData=NaN}copy(t){return this.isInvalid=t.isInvalid,this.nVertices=t.nVertices,this.nFrames=t.nFrames,this.vertexData=t.vertexData,this._frameData=t._frameData,this.max=t.max,this.min=t.min,this.isFreeSurferNodeValues=!0,this.isSurfaceMeasurement=!0,this}}function Ji(t,e,i=!1){const r=new DataView(t),s=r.getUint32(0,!1);void 0===e&&(e=s);if(e!==function(t,e){if(t%e==0)return t;const i=Math.round(Math.log((t-2)/10)/Math.log(4)),r=Math.round(Math.log((e-2)/10)/Math.log(4)),s=10*Math.pow(4,i)+2,n=10*Math.pow(4,r)+2;return s!==t||n!==e?t:e}(s,e))throw new Error("ANNOT file has different number of vertices than mesh");if(t.byteLength<4+8*s)throw new Error("ANNOT file smaller than specified");let n=0;const a=new Uint32Array(s);for(let t=0;t<s;t++){a[r.getUint32(n+=4,!1)]=r.getUint32(n+=4,!1)}if(!i)return a;let o=0;try{o=r.getInt32(n+=4,!1)}catch(t){return a}if(1!==o)return a;if(r.getInt32(n+=4,!1)>0)return a;const h=r.getInt32(n+=4,!1),l=r.getInt32(n+=4,!1);n+=l;const u=r.getInt32(n+=4,!1);if(u<1)return a;const c={R:Array(h).fill(0),G:Array(h).fill(0),B:Array(h).fill(0),A:Array(h).fill(0),I:Array(h).fill(0),labels:Array(h).fill("")};for(let t=0;t<u;t++){const t=r.getInt32(n+=4,!1),e=r.getInt32(n+=4,!1);n+=4;let i="";for(let t=0;t<e;t++){const t=r.getUint8(n++);if(0===t)break;i+=String.fromCharCode(t)}n-=4;const s=r.getInt32(n+=4,!1),a=r.getInt32(n+=4,!1),o=r.getInt32(n+=4,!1),l=r.getInt32(n+=4,!1);t<0||t>=h?connsole.warn("annot entry out of range"):(c.R[t]=s,c.G[t]=a,c.B[t]=o,c.A[t]=l,c.I[t]=(l<<24)+(o<<16)+(a<<8)+s,c.labels[t]=i)}const d=new Float32Array(s);d.fill(-1);let f=0;for(let t=0;t<e;t++){const e=a[t];for(let i=0;i<h;i++)if(c.I[i]===e){d[t]=i;break}d[t]<0&&(f++,d[t]=0)}f>0&&console.error(`annot vertex colors do not match ${f} of ${s} vertices.`);for(let t=0;t<h;t++)c.I[t]=t;return{scalars:d,colormapLabel:c}}class tr{constructor(t){if(this.isInvalid=!0,!t)return;const e=Ji(t);this.nVertices=e.length,this.vertexColor=new Uint8Array(e.buffer),this.isFreeSurferAnnot=!0,this.isSurfaceAnnotation=!0,this.isInvalid=!1}dispose(){this.vertexColor=NaN}copy(t){return this.isInvalid=t.isInvalid,this.nVertices=t.nVertices,this.vertexColor=t.vertexColor,this.isFreeSurferAnnot=!0,this.isSurfaceAnnotation=!0,this}}var er="undefined"!=typeof Float32Array?Float32Array:Array;Math.random;Math.PI;function ir(){var t=new er(16);return er!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function rr(t,e,i,r,s,n,a,o,h,l,u,c,d,f,p,m){var g=new er(16);return g[0]=t,g[1]=e,g[2]=i,g[3]=r,g[4]=s,g[5]=n,g[6]=a,g[7]=o,g[8]=h,g[9]=l,g[10]=u,g[11]=c,g[12]=d,g[13]=f,g[14]=p,g[15]=m,g}function sr(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var nr=function(t,e,i){var r=e[0],s=e[1],n=e[2],a=e[3],o=e[4],h=e[5],l=e[6],u=e[7],c=e[8],d=e[9],f=e[10],p=e[11],m=e[12],g=e[13],y=e[14],_=e[15],b=i[0],x=i[1],w=i[2],T=i[3];return t[0]=b*r+x*o+w*c+T*m,t[1]=b*s+x*h+w*d+T*g,t[2]=b*n+x*l+w*f+T*y,t[3]=b*a+x*u+w*p+T*_,b=i[4],x=i[5],w=i[6],T=i[7],t[4]=b*r+x*o+w*c+T*m,t[5]=b*s+x*h+w*d+T*g,t[6]=b*n+x*l+w*f+T*y,t[7]=b*a+x*u+w*p+T*_,b=i[8],x=i[9],w=i[10],T=i[11],t[8]=b*r+x*o+w*c+T*m,t[9]=b*s+x*h+w*d+T*g,t[10]=b*n+x*l+w*f+T*y,t[11]=b*a+x*u+w*p+T*_,b=i[12],x=i[13],w=i[14],T=i[15],t[12]=b*r+x*o+w*c+T*m,t[13]=b*s+x*h+w*d+T*g,t[14]=b*n+x*l+w*f+T*y,t[15]=b*a+x*u+w*p+T*_,t};function ar(t,e,i,r){var s=new er(4);return s[0]=t,s[1]=e,s[2]=i,s[3]=r,s}function or(t,e,i){var r=e[0],s=e[1],n=e[2],a=e[3];return t[0]=i[0]*r+i[4]*s+i[8]*n+i[12]*a,t[1]=i[1]*r+i[5]*s+i[9]*n+i[13]*a,t[2]=i[2]*r+i[6]*s+i[10]*n+i[14]*a,t[3]=i[3]*r+i[7]*s+i[11]*n+i[15]*a,t}var hr,lr;hr=new er(4),er!=Float32Array&&(hr[0]=0,hr[1]=0,hr[2]=0,hr[3]=0),lr=hr;function ur(t){let e=t.byteLength;if(e<40)throw new Error("File too small to be MAT v4: bytes = "+t.byteLength);let i=new DataView(t),r=i.getUint16(0,!0),s=t;if(35615===r||8075===r){const n=Ri(new Uint8Array(t));i=new DataView(n.buffer),r=i.getUint16(0,!0),s=n.buffer,e=s.byteLength}const n=new TextDecoder("utf-8");let a=new Uint8Array(s),o=0,h=[];function l(){let t=i.getUint32(o,!0),e=i.getUint32(o+4,!0),r=i.getUint32(o+8,!0),s=i.getUint32(o+12,!0),l=i.getUint32(o+16,!0);if(o+=20,0!==s)throw new Error("Matlab V4 reader does not support imaginary numbers");let u=e*r;if(u<1)throw new Error("mrows * ncols must be greater than one");const c=new Uint8Array(a.subarray(o,o+l));let d=n.decode(c).trim().replaceAll("\0",""),f=(p=t,Math.floor(p/10)%10);var p;let m=8;if(f>=1&&f<=2)m=4;else if(f>=3&&f<=4)m=2;else if(5===f)m=1;else if(0!==f)throw new Error("impossible Matlab v4 datatype");if(o+=l,t>50)throw new Error("Does not appear to be little-endian V4 Matlab file");let g=o+u*m;h[d]=function(t,e,i){const r=new Uint8Array(a.subarray(e,i));return 1===t?new Float32Array(r.buffer):2===t?new Int32Array(r.buffer):3===t?new Int16Array(r.buffer):4===t?new Uint16Array(r.buffer):5===t?new Uint8Array(r.buffer):new Float64Array(r.buffer)}(f,o,g),o=g}for(;o+20<e;)l();return h}class cr{constructor(t){if(this.isInvalid=!0,this.isStreamline=!0,this.isTrkTract=!0,!t)return;const e=function(t){let e=new DataView(t),i=e.getUint32(0,!0);if(1128354388!==i){let r;if(4247762216===i)throw new Error("zstd TRK decompression is not supported");r=Ri(new Uint8Array(t)),t=r.buffer,e=new DataView(t),i=e.getUint32(0,!0)}const r=e.getUint32(992,!0),s=e.getUint32(996,!0);if(r>2||1e3!==s||1128354388!==i)throw new Error("Not a valid TRK file");const n=e.getInt16(36,!0),a=[];for(let e=0;e<n;e++){const i=new Uint8Array(t.slice(38+20*e,58+20*e));let r=(new TextDecoder).decode(i).split("\0").shift();r="string"==typeof r?r.trim():`id_${e}`,a.push({id:r,vals:[]})}const o=rr(1/e.getFloat32(12,!0),0,0,-.5,0,1/e.getFloat32(16,!0),0,-.5,0,0,1/e.getFloat32(20,!0),-.5,0,0,0,1),h=e.getInt16(238,!0),l=[];for(let e=0;e<h;e++){const i=new Uint8Array(t.slice(240+20*e,260+20*e));let r=(new TextDecoder).decode(i).split("\0").shift();r="string"==typeof r?r.trim():`id_${e}`,l.push({id:r,vals:[]})}const u=ir();for(let t=0;t<16;t++)u[t]=e.getFloat32(440+4*t,!0);0===u[15]&&(console.warn("TRK vox_to_ras not set... using identity matrix"),sr(u));const c=ir();nr(c,o,u);let d=null,f=null;d=new Int32Array(t.slice(s)),f=new Float32Array(d.buffer);const p=d.length;if(p<1)throw new Error("Empty TRK file.");let m=0,g=0,y=new Uint32Array(d.length/4+1);y[0]=0;let _,b,x,w,T,I,v,A=new Float32Array(d.length/4),E=0,N=new Float32Array(d.length),S=0;for(;m<p;){const t=d[m];m+=1,v=0;for(let e=0;e<t;e++){const t=f[m+0],i=f[m+1],r=f[m+2];if(m+=3,_=t*c[0]+i*c[1]+r*c[2]+c[3],b=t*c[4]+i*c[5]+r*c[6]+c[7],x=t*c[8]+i*c[9]+r*c[10]+c[11],N[S++]=_,N[S++]=b,N[S++]=x,n>0)for(let t=0;t<n;t++)a[t].vals.push(f[m]),m++;e>0&&(v+=Math.sqrt((_-w)*(_-w)+(b-T)*(b-T)+(x-I)*(x-I))),w=_,T=b,I=x,g++}if(h>0)for(let t=0;t<h;t++,m++)l[t].vals.push(f[m]);A[E]=v,E++,y[E+1]=g}const M=[];for(let t=0;t<l.length;t++)M.push({id:l[t].id,vals:Float32Array.from(l[t].vals)});const k=[];for(let t=0;t<a.length;t++)k.push({id:a[t].id,vals:Float32Array.from(a[t].vals)});return E++,y[E]=g,N=N.slice(0,S),y=y.slice(0,E),A=A.slice(0,E-2),{pts:N,offsetPt0:y,lps:A,dps:M,dpv:k}}(t);this.points=e.pts,this.pointOffset=e.offsetPt0,this.pointOffset[0],this.lengthPerStreamline=e.lps,this.dataPerStreamline=e.dps,this.dataPerVertex=e.dpv,this.isInvalid=!1}dispose(){this.points=void 0,this.pointOffset=void 0,this.lengthPerStreamline=void 0,this.dataPerStreamline=void 0,this.dataPerVertex=!0,this.isInvalid=!1}copy(t){return this.isInvalid=t.isInvalid,this.isInvalid||(this.points=t.points,this.pointOffset=t.pointOffset,this.lengthPerStreamline=t.lengthPerStreamline,this.dataPerStreamline=t.dataPerStreamline,this.dataPerVertex=t.dataPerVertex,this.isStreamline=!0,this.isTrkTract=!0),this}}class dr{constructor(t){if(this.isInvalid=!0,this.isStreamline=!0,this.isTTTract=!0,!t)return;const e=function(t){let e=[],i=[];const r=ur(t);if(!("trans_to_mni"in r))throw new Error("TT format file must have 'trans_to_mni'");if(!("voxel_size"in r))throw new Error("TT format file must have 'voxel_size'");if(!("track"in r))throw new Error("TT format file must have 'track'");let s=ir(),n=r.trans_to_mni;s=rr(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15]),function(t,e){if(t===e){var i=e[1],r=e[2],s=e[3],n=e[6],a=e[7],o=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=i,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=n,t[11]=e[14],t[12]=s,t[13]=a,t[14]=o}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15]}(s,s),function(t){let r=new DataView(t.buffer),n=[],a=0,o=0;for(;o<t.length;){n.push(o);let t=r.getUint32(o,!0);o=o+t+13,a+=t}e=new Uint32Array(n.length+2),e[0]=0,i=new Float32Array(a);let h=0;for(let t=0;t<n.length;t++){e[t+1]=h/3;let s=n[t],a=r.getUint32(s,!0)/3,o=r.getInt32(s+4,!0),l=r.getInt32(s+8,!0),u=r.getInt32(s+12,!0);s+=16,i[h++]=o,i[h++]=l,i[h++]=u;for(let t=2;t<=a;t++)o+=r.getInt8(s++),l+=r.getInt8(s++),u+=r.getInt8(s++),i[h++]=o,i[h++]=l,i[h++]=u}for(let t=0;t<h;t++)i[t]=i[t]/32;let l=0;for(let t=0;t<h/3;t++){const t=ar(i[l],i[l+1],i[l+2],1);or(t,t,s),i[l++]=t[0],i[l++]=t[1],i[l++]=t[2]}e[n.length+1]=h/3}(r.track);let a="#000000";return Array.isArray(r.color)&&r.color.length>0&&(a=r.color[0]),{points:i,cutoff:e,shape:r.voxel_size,color:a}}(t);this.shape=e.shape,this.points=e.points,this.pointOffset=e.cutoff,this.pointOffset[0];const i=[],r=new V,s=new V;let n=0;for(let t=0;t<this.pointOffset.length-1;t++){const e=this.pointOffset[t],a=this.pointOffset[t+1];n=0;for(let t=e;t<a-1;t++)r.fromArray(this.points,3*t),s.fromArray(this.points,3*t+3),n+=s.distanceTo(r);i.push(n)}this.lengthPerStreamline=i,this.color=(new se).set(e.color),this.isInvalid=!1}dispose(){this.shape=void 0,this.points=void 0,this.pointOffset=void 0,this.lengthPerStreamline=void 0,this.color=void 0,this.isInvalid=!0}copy(t){return this.isInvalid=t.isInvalid,this.isInvalid||(this.shape=t.shape,this.points=t.points,this.pointOffset=t.pointOffset,this.lengthPerStreamline=t.lengthPerStreamline,this.color=(new se).copy(t.color),this.isStreamline=!0,this.isTTTract=!0),this}}class fr{constructor(t){if(this.isInvalid=!0,this.isStreamline=!0,this.isTckTract=!0,!t)return;const e=function(t){const e=t.byteLength;if(e<20)throw new Error("File too small to be TCK: bytes = "+e);const i=new Uint8Array(t);let r=0;function s(){for(;r<e&&10===i[r];)r++;const s=r;for(;r<e&&10!==i[r];)r++;return r++,r-s<1?"":(new TextDecoder).decode(t.slice(s,r-1))}let n=s();if(!n.includes("mrtrix tracks"))throw new Error("Not a valid TCK file");let a=-1;for(;r<e&&!n.includes("END");)n=s(),n.toLowerCase().startsWith("file:")&&(a=parseInt(n.split(" ").pop()));if(a<20)throw new Error("Not a valid TCK file (missing file offset)");r=a;const o=new DataView(t);let h=0,l=new Uint32Array(e/16+1),u=1,c=0,d=new Float32Array(e/4);for(l[0]=0;r+12<e;){const t=o.getFloat32(r,!0);r+=4;const e=o.getFloat32(r,!0);r+=4;const i=o.getFloat32(r,!0);if(r+=4,isFinite(t))d[c++]=t,d[c++]=e,d[c++]=i,h++;else if(l[u++]=h,!isNaN(t))break}return d=d.slice(0,c),l=l.slice(0,u),{pts:d,offsetPt0:l}}(t);this.points=e.pts,this.pointOffset=e.offsetPt0,this.pointOffset[0];const i=[],r=new V,s=new V;let n=0;for(let t=0;t<this.pointOffset.length-1;t++){const e=this.pointOffset[t],a=this.pointOffset[t+1];n=0;for(let t=e;t<a-1;t++)r.fromArray(this.points,3*t),s.fromArray(this.points,3*t+3),n+=s.distanceTo(r);i.push(n)}this.lengthPerStreamline=i,this.isInvalid=!1}dispose(){this.points=void 0,this.pointOffset=void 0,this.lengthPerStreamline=void 0,this.isInvalid=!0}copy(t){return this.isInvalid=t.isInvalid,this.isInvalid||(this.points=t.points,this.pointOffset=t.pointOffset,this.lengthPerStreamline=t.lengthPerStreamline,this.isStreamline=!0,this.isTckTract=!0),this}}const pr=new De;pr.onStart=function(t,e,i){console.debug("Started loading file: "+t+".\nLoaded "+e+" of "+i+" files.")},pr.onLoad=function(){console.debug("Loading complete!")},pr.onProgress=function(t,e,i){console.debug("Loading file: "+t+".\nLoaded "+e+" of "+i+" files.")},pr.onError=function(t){console.debug("There was an error loading "+t)};const mr=new De;function gr(t,e,i,r){Ue.enabled=!1,t.load(e,(t=>{i({token:r,status:"done",object:t})}),(t=>{i({token:r,status:"progress",object:{lengthComputable:t.lengthComputable,loaded:t.loaded,timeStamp:t.timeStamp,total:t.total,type:t.type}})}),(t=>{i({token:r,status:"error",object:t})}))}function yr(t){if(t.startsWith("#")){const e=document.querySelectorAll(`script[data-for='${t}']`),i=e[0].getAttribute("data-type");let r=!1;if(i&&i.length>0){const e=i.toLowerCase(),s=t.toLowerCase();(e.endsWith("json")||e.endsWith("csv")||e.endsWith("txt")||e.endsWith("text")||e.endsWith("plain")||e.endsWith("tsv")||s.endsWith("json")||s.endsWith("csv")||s.endsWith("tsv")||s.endsWith("txt"))&&(r=!0)}const s=[];e.forEach((t=>{const e=parseInt(t.getAttribute("data-partition")),i=atob(t.innerHTML.trim());if(r)s[e]=i;else{const r=parseInt(t.getAttribute("data-parition-size")),n=new Uint8Array(r);for(let t=0;t<r;t++)n[t]=i.charCodeAt(t);s[e]=n}}));return{originalUrl:t,response:new Blob(s,{type:i}),isObjectURL:!0}}{let e=t;try{const i=new URL(t,document.baseURI);e=`${i.pathname}${i.search}`,startsWith(e,"/")||(e=`/${e}`)}catch(t){}return{originalUrl:t,resolvedUrl:e,isObjectURL:!1}}}mr.onStart=function(t,e,i){},mr.onLoad=function(){},mr.onProgress=function(t,e,i){},mr.onError=function(t){};class _r extends Oe{constructor(t,{workerScript:e,logger:i,timeOut:r=15e3}={}){super(t),this.workerScript=e,this.loaderName=null,this.timeOut=r,this.debug=!1,this.logger=i||console.debug}stopWorkers(){Qe(this.workerScript).catch((t=>{}))}unpack(t){switch(this.responseType){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"document":return t.text().then((t=>(new DOMParser).parseFromString(t,mimeType)));case"json":return t.text().then((t=>JSON.parse(t)));default:return t.text()}}_loadURLResponse(t,e,i,r,s){this.unpack(t).then((t=>{try{i(this.parse(t))}catch(t){throw t}})).catch((t=>{if(!s)throw this.manager.itemError(e),t;s(t),this.manager.itemError(e)})).finally((()=>{this.manager.itemEnd(e)})),this.manager.itemStart(e)}load(t,e,i,r){let s;try{s=yr(t)}catch(e){return r?r(e):console.error(e),void this.manager.itemError(t)}if(s.isObjectURL)return void this._loadURLResponse(s.response,t,e,i,r);const n=this,a=new Pe(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.setResponseType(this.responseType),a.setMimeType(this.mimeType),a.load(s.resolvedUrl,(function(i){try{e(n.parse(i))}catch(e){r?r(e):console.error(e),n.manager.itemError(t)}}),i,r)}loadAsync(t,e){const i=this;return new Promise((function(r,s){let n;try{n=yr(t)}catch(t){return void s(t)}const a=t=>{try{e&&e(t)}catch(t){s(t)}};if(n.isObjectURL)return void i._loadURLResponse(n.response,t,r,a,s);const o=(h=i.loaderName,"string"==typeof i.workerScript&&"string"==typeof h&&!!window&&!!window.Worker&&!!He[h]&&["workerLoaders",h]);var h;!1!==o?async function(t,{methodNames:e,args:i,onProgress:r,logger:s,token:n,timeOut:a=15e3,transferables:o}={}){let h,l=$e.indexOf(t);if(-1==l){h=new Xe(t,s);const e=$e.length;$e.push(t),Ke[e]=h}else h=Ke[l],s&&(h.logger=s);return await h.startWorker({methodNames:e,args:i,onProgress:r,timeOut:a,token:n,transferables:o})}(i.workerScript,{methodNames:o,timeOut:i.timeOut,logger:i.logger,args:{url:n.resolvedUrl,mimeType:i.mimeType},onProgress:a}).then((t=>{r(t)})).catch((e=>{i.logger(e),i.logger("Unable to resolve parallel worker (see warning above). Trying to use regular loader: "+(n.resolvedUrl??t)),i.load(n.resolvedUrl,(t=>{i.logger("Successfully retrieved via synchronus loader: "+n.resolvedUrl),r(t)}),a,s)})).catch(s):i.load(n.resolvedUrl,r,a,s)}))}copyData(t){return t}}class br extends _r{classType=void 0;parse(t){if(void 0===this.classType)throw new Error("TypedLoader: please implement this.classType");return new this.classType(t)}copyData(t){if(void 0===this.classType)throw new Error("TypedLoader: please implement this.classType");return(new this.classType).copy(t)}}const xr={JSONLoader:class extends _r{responseType="json";loaderName="JSONLoader";parse(t){return t}},CSVLoader:class extends _r{responseType="csv";loaderName="CSVLoader";mimeType=void 0;parse(t,e){return(0,Je.parse)(t,{header:!0,dynamicTyping:!0}).data}},NiftiLoader:class extends br{responseType="arraybuffer";loaderName="NiftiLoader";classType=ii},STLLoader2:class extends br{responseType="arraybuffer";loaderName="STLLoader2";classType=Zi},MGHLoader:class extends br{responseType="arraybuffer";loaderName="MGHLoader";classType=Pi},GiftiLoader:class extends br{responseType="text";loaderName="GiftiLoader";mimeType=void 0;classType=qi},FreeSurferMeshLoader:class extends br{responseType="arraybuffer";loaderName="FreeSurferMeshLoader";classType=Ki},FreeSurferNodeLoader:class extends br{responseType="arraybuffer";loaderName="FreeSurferNodeLoader";classType=Qi},FreeSurferAnnotLoader:class extends br{responseType="arraybuffer";loaderName="FreeSurferAnnotLoader";classType=tr},TrkLoader:class extends br{responseType="arraybuffer";loaderName="TrkLoader";classType=cr},TTLoader:class extends br{responseType="arraybuffer";loaderName="TTLoader";classType=dr},TckLoader:class extends br{responseType="arraybuffer";loaderName="TckLoader";classType=fr}};for(let t in xr){const e=xr[t],i=function({url:t,mimeType:i}={},r,s){const n=new e(mr);i&&(n.mimeType=i),gr(n,t,r,s)};i._workerCallable=!0,He[t]=i}async function wr(t){const e=t.data.methodNames,i=t.data.args,r=t.data.token;if(!Array.isArray(e))throw new TypeError(`Invalid method names: ${e}. Must be an array`);let s={workerLoaders:He};if(e.forEach((t=>{if(s=s[t],void 0===s)throw new TypeError(`Cannot find object: threeBrain.${e.join(".")}`)})),"function"!=typeof s)throw new TypeError(`Object threeBrain.${e.join(".")} is not a function. Abort.`);if(!s._workerCallable)throw new TypeError(`Method threeBrain.${e.join(".")} is not a worker-callable function.`);postMessage({token:r,status:"started"});const n=await s(i,postMessage,r);void 0!==n&&postMessage({token:r,status:"scheduled",object:n})}He.computeVolumeGradients=function(t){const e=async function(e,i,r){const s=await t(...e);let n,a;s&&"object"==typeof s&&"result"in s?(n=s.result,a=s.transferables):(n=s,a=void 0);const o={token:r,status:"done",object:n};return Array.isArray(a)&&a.length>0?i(o,a):i(o),n};return e._workerCallable=!0,e}(((t,e,i,r,s)=>{const n=function(t,e,i,r,s=4){const n=new Uint8Array(e*i*r*4),a=(t,r,s)=>s*i*e+r*e+t,o=(s,n,o)=>{if(s<0||s>=e||n<0||n>=i||o<0||o>=r)return 0;const h=a(s,n,o);return t[h]/255},h=(s,n,o)=>{if(s<0||s>=e||n<0||n>=i||o<0||o>=r)return{r:0,g:0,b:0,a:0};const h=4*a(s,n,o);return{r:t[h],g:t[h+1],b:t[h+2],a:t[h+3]}},l=(n,o,h)=>{if(n<0||n>=e||o<0||o>=i||h<0||h>=r)return 0;const l=a(n,o,h);return 1===s?t[l]:t[4*l+3]};if(1===s)for(let t=0;t<r;t++)for(let r=0;r<i;r++)for(let i=0;i<e;i++){const e=4*a(i,r,t),s=l(i,r,t);if(n[e+3]=s,0===s){n[e]=127,n[e+1]=127,n[e+2]=127;continue}const h=(o(i+1,r,t)-o(i-1,r,t))/2,u=(o(i,r+1,t)-o(i,r-1,t))/2,c=(o(i,r,t+1)-o(i,r,t-1))/2,d=Math.sqrt(h*h+u*u+c*c);n[e]=Math.round(Math.max(0,Math.min(255,127.5*(h+1)))),n[e+1]=Math.round(Math.max(0,Math.min(255,127.5*(u+1)))),n[e+2]=Math.round(Math.max(0,Math.min(255,127.5*(c+1)))),n[e+3]=Math.round(Math.max(0,Math.min(255,255*d)))}else{const t=t=>0===t.a||0===t.r&&0===t.g&&0===t.b?0:t.r<<16|t.g<<8|t.b,s=[[[-1,0,1],[-2,0,2],[-1,0,1]],[[-2,0,2],[-4,0,4],[-2,0,2]],[[-1,0,1],[-2,0,2],[-1,0,1]]],o=[[[-1,-2,-1],[0,0,0],[1,2,1]],[[-2,-4,-2],[0,0,0],[2,4,2]],[[-1,-2,-1],[0,0,0],[1,2,1]]],l=[[[-1,-2,-1],[-2,-4,-2],[-1,-2,-1]],[[0,0,0],[0,0,0],[0,0,0]],[[1,2,1],[2,4,2],[1,2,1]]],u=1/16;for(let c=0;c<r;c++)for(let r=0;r<i;r++)for(let i=0;i<e;i++){const e=4*a(i,r,c),d=h(i,r,c);if(n[e+3]=d.a,0===d.a||0===d.r&&0===d.g&&0===d.b){n[e]=127,n[e+1]=127,n[e+2]=127;continue}const f=t(d);let p=0,m=0,g=0;for(let e=-1;e<=1;e++)for(let n=-1;n<=1;n++)for(let a=-1;a<=1;a++){const u=t(h(i+a,r+n,c+e))!==f?1:0,d=e+1,y=n+1,_=a+1;p+=u*s[d][y][_],m+=u*o[d][y][_],g+=u*l[d][y][_]}p*=u,m*=u,g*=u;const y=Math.sqrt(p*p+m*m+g*g);y>1e-4&&(p/=y,m/=y,g/=y),n[e]=Math.round(Math.max(0,Math.min(255,127.5*(p+1)))),n[e+1]=Math.round(Math.max(0,Math.min(255,127.5*(m+1)))),n[e+2]=Math.round(Math.max(0,Math.min(255,127.5*(g+1)))),n[e+3]=Math.round(Math.max(0,Math.min(255,255*y)))}}return n}(t,e,i,r,s);return{result:n,transferables:[n.buffer]}})),onmessage=t=>{wr(t)}})(),r})()));
//# sourceMappingURL=threebrain-worker.js.map